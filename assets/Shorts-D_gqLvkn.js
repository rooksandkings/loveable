import{j as e}from"./ui-vendor-CVcv4Zzz.js";import{r as s}from"./react-vendor-tkGVC3Du.js";import{u as r}from"./query-vendor-B8TzFr-Q.js";import{B as a,C as t,h as l,i,a as n,I as c,S as o,b as d,d as h,e as m,f as x,j as u}from"./neon-api-C0k2csIQ.js";import{C as g,a as p,D as b}from"./icons-Y8uGFleL.js";import"./index-C_UMKnXa.js";const j=()=>{const[j,f]=s.useState(""),[y,_]=s.useState("all"),[N,C]=s.useState("all"),[w,v]=s.useState(!1),[S,k]=s.useState(!1),[A,F]=s.useState({}),[D,L]=s.useState(new Set),B=e=>{if(!e)return[];const s=e.split(",").map(e=>e.trim()).filter(e=>e.length>0).map(e=>e.replace(/\s+/g," ").trim()).map(e=>{const s=e.toLowerCase();return s.includes("pit bull")||s.includes("pitbull")||s.includes("american pit bull")||s.includes("staffordshire")?"Pit Bull / Staffordshire":s.includes("boxer")?"Boxer":s.includes("labrador")||s.includes("lab mix")?"Labrador Retriever":s.includes("german shepherd")?"German Shepherd":s.includes("husky")||s.includes("alaskan malamute")?"Husky / Northern Breed":s.includes("bulldog")||s.includes("american bulldog")||s.includes("french bulldog")||s.includes("english bulldog")?"Bulldog":s.includes("belgian malinois")||s.includes("belgian shepherd")?"Belgian Malinois":s.includes("rottweiler")?"Rottweiler":s.includes("cane corso")?"Cane Corso":s.includes("border collie")?"Border Collie":s.includes("chihuahua")?"Chihuahua":s.includes("great dane")?"Great Dane":!s.includes("terrier")||s.includes("pit bull")||s.includes("staffordshire")?s.includes("retriever")&&!s.includes("labrador")?"Retriever":s.includes("shepherd")&&!s.includes("german")?"Shepherd":s.includes("mixed breed")||s.includes("mix")?"Mixed Breed":s.includes("akita")?"Akita":e:"Terrier"});return[...new Set(s)]},I=e=>{if(!e)return"";const s=e.indexOf("https://adopt.adopets.com/");return-1!==s?e.substring(0,s).trim():e.trim()},R=e=>e?e.replace(/\s*-\s*in\s+foster\s*$/i,"").replace(/\s*-\s*foster\s*$/i,"").replace(/\s*\(foster\)\s*$/i,"").replace(/\s*\[foster\]\s*$/i,"").trim():"",{data:$=[],isLoading:z,error:M}=r({queryKey:["shortDescriptions"],queryFn:u,staleTime:432e5,gcTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),T=s.useMemo(()=>{const e=[];$.forEach(s=>{if(s.breed_ai){const r=B(s.breed_ai);e.push(...r)}});return[...new Set(e)].sort()},[$]),O=s.useMemo(()=>$.filter(e=>{const s=""===j||e.name?.toLowerCase().includes(j.toLowerCase())||e.animal_id?.toLowerCase().includes(j.toLowerCase())||e.breed_ai?.toLowerCase().includes(j.toLowerCase())||e.chuya_breed_ai?.toLowerCase().includes(j.toLowerCase()),r="all"===y||B(e.breed_ai).includes(y),a=e.location_kennel&&e.location_kennel.toLowerCase().includes("foster")||e.location_room&&e.location_room.toLowerCase().includes("foster");let t=!0;switch(N){case"all":default:t=!0;break;case"all_in_foster":t=a;break;case"all_in_shelter":t=!a;break;case"DCAS_in_shelter":t="DCAS"===e.shelter_location&&!a;break;case"DCAS_in_foster":t=a&&"DCAS"===e.shelter_location;break;case"FCAS_in_shelter":t="FCAS"===e.shelter_location&&!a;break;case"FCAS_in_foster":t=a&&"FCAS"===e.shelter_location;break;case"CAC_in_shelter":t="CAC"===e.shelter_location&&!a;break;case"CAC_in_foster":t=a&&"CAC"===e.shelter_location}return s&&r&&t}),[$,j,y,N]);return z?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-lg text-gray-600",children:"Loading short descriptions..."})})})}):M?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-8xl mb-6",children:"😢"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"We couldn't fetch the short descriptions right now"}),e.jsx(a,{onClick:()=>window.location.reload(),className:"bg-orange-500 hover:bg-orange-600",children:"Try Again"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Breed Resemblance Post Generator"}),e.jsx("p",{className:"text-gray-600",children:"Generate social media posts highlighting AI-identified breed resemblances for rescue dogs"})]}),e.jsxs(t,{className:"mb-6",children:[e.jsx(l,{children:e.jsx(i,{children:"Filters"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(c,{placeholder:"Search by name, ID, or resemblance...",value:j,onChange:e=>f(e.target.value),className:"w-full"})}),e.jsxs(o,{value:y,onValueChange:_,children:[e.jsx(d,{className:"w-48",children:e.jsx(h,{placeholder:"Resembles All"})}),e.jsxs(m,{children:[e.jsx(x,{value:"all",children:"Resembles All"}),T.map(s=>e.jsx(x,{value:s,children:s},s))]})]}),e.jsxs(o,{value:N,onValueChange:C,children:[e.jsx(d,{className:"w-64",children:e.jsx(h,{placeholder:"Location"})}),e.jsxs(m,{children:[e.jsx(x,{value:"all",children:"All Dogs"}),e.jsx(x,{value:"all_in_shelter",children:"All In Shelter"}),e.jsx(x,{value:"all_in_foster",children:"All In Foster"}),e.jsx(x,{value:"DCAS_in_shelter",children:"DCAS In Shelter"}),e.jsx(x,{value:"DCAS_in_foster",children:"DCAS In Foster"}),e.jsx(x,{value:"FCAS_in_shelter",children:"FCAS In Shelter"}),e.jsx(x,{value:"FCAS_in_foster",children:"FCAS In Foster"}),e.jsx(x,{value:"CAC_in_shelter",children:"CAC In Shelter"}),e.jsx(x,{value:"CAC_in_foster",children:"CAC In Foster"})]})]})]})})]}),e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:[O.length," of ",$.length," descriptions"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>{const e=O.map(e=>e.animal_id);L(new Set(e))},className:"text-xs",children:"Select All"}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>{L(new Set)},className:"text-xs",children:"Clear All"})]})]}),e.jsx(t,{children:e.jsx(n,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Pictures"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-l-2 border-gray-300",children:"Short Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32 border-l border-gray-200",children:"Links"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24 border-l border-gray-200",children:"Add to Post"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map((s,r)=>e.jsxs("tr",{className:r%2==0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 text-sm font-medium text-gray-900 truncate bg-gray-50",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:R(s.name||"")}),s.shelter_location&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["DCAS"===s.shelter_location&&"Dekalb","FCAS"===s.shelter_location&&"Fulton","CAC"===s.shelter_location&&"CAC"]})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:e.jsx("div",{className:"relative h-16 w-20",children:(()=>{const r=(e=>{const s=[];return e.mini_pic_1&&s.push(e.mini_pic_1),e.mini_pic_2&&s.push(e.mini_pic_2),e.mini_pic_3&&s.push(e.mini_pic_3),s})(s),a=A[s.animal_id]||0,t=r[a],l=t?(e=>{if(!e||""===e.trim()||"N/A"===e)return null;const s=e.trim();if(s.includes("petango.com"))return s;if(s.includes("drive.google.com")){const e=s.match(/\/d\/([a-zA-Z0-9-_]+)/)?.[1];return e?`https://drive.google.com/uc?id=${e}`:null}return s})(t):null,i=r.length>1;return l?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:l,alt:`${R(s.name||"")} - Photo ${a+1}`,className:"h-16 w-16 object-cover rounded border border-gray-200 mx-auto",loading:"lazy",onError:e=>{e.currentTarget.style.display="none"}}),i&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{return e=s.animal_id,a=r.length,void F(s=>({...s,[e]:(s[e]||-1+a)%a}));var e,a},className:"absolute -left-6 top-1/2 transform -translate-y-1/2 bg-gray-800/90 backdrop-blur-sm p-1 rounded-full hover:bg-gray-700 transition-colors duration-200 shadow-sm",children:e.jsx(g,{className:"h-3 w-3 text-white"})}),e.jsx("button",{onClick:()=>{return e=s.animal_id,a=r.length,void F(s=>({...s,[e]:(s[e]||1)%a}));var e,a},className:"absolute -right-6 top-1/2 transform -translate-y-1/2 bg-gray-800/90 backdrop-blur-sm p-1 rounded-full hover:bg-gray-700 transition-colors duration-200 shadow-sm",children:e.jsx(p,{className:"h-3 w-3 text-white"})}),e.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1",children:r.map((r,t)=>e.jsx("button",{onClick:()=>((e,s)=>{F(r=>({...r,[e]:s}))})(s.animal_id,t),className:"w-1.5 h-1.5 rounded-full transition-colors duration-200 "+(t===a?"bg-white shadow-sm":"bg-white/60")},t))})]})]}):e.jsx("div",{className:"h-16 w-16 bg-gray-100 rounded border border-gray-200 flex items-center justify-center mx-auto",children:e.jsx(b,{className:"h-6 w-6 text-gray-400"})})})()})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 border-l-2 border-gray-300",children:e.jsx("div",{className:"whitespace-pre-wrap break-words leading-relaxed",children:I(s.chuya_breed_ai||"")})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 border-l border-gray-200",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[s.adopets_url&&e.jsx(a,{size:"sm",onClick:()=>window.open(s.adopets_url,"_blank"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white border-0 font-medium text-xs py-2 px-3 transition-colors duration-200",children:"Adopets"}),s.asana_permalink_url&&e.jsx(a,{size:"sm",onClick:()=>window.open(s.asana_permalink_url,"_blank"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white border-0 font-medium text-xs py-2 px-3 transition-colors duration-200",children:"Asana"})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 border-l border-gray-200",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("input",{type:"checkbox",checked:D.has(s.animal_id),onChange:()=>{return e=s.animal_id,void L(s=>{const r=new Set(s);return r.has(e)?r.delete(e):r.add(e),r});var e},className:"h-4 w-4 text-orange-500 border-gray-300 rounded focus:ring-orange-500 focus:ring-2"})})})]},s.animal_id))})]})})})}),e.jsxs(t,{className:"mt-6",children:[e.jsx(l,{children:e.jsx(i,{children:"Create Content"})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"splitByShelter",checked:w,onChange:e=>v(e.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"splitByShelter",className:"text-sm font-medium text-gray-700",children:"Split by shelter?"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"splitByFosterStatus",checked:S,onChange:e=>k(e.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"splitByFosterStatus",className:"text-sm font-medium text-gray-700",children:"Foster status?"})]})]}),e.jsx(a,{className:"bg-orange-500 hover:bg-orange-600 text-white",onClick:()=>{},children:"Create"})]})})]}),0===O.length&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-8xl mb-6",children:"📝"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"No descriptions found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Try adjusting your search criteria to find more descriptions!"}),e.jsx(a,{onClick:()=>{f(""),_("all"),C("all")},className:"bg-orange-500 hover:bg-orange-600",children:"Clear Filters"})]})]})})};export{j as default};
