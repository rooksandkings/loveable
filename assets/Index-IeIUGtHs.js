var Vr=s=>{throw TypeError(s)};var zt=(s,e,t)=>e.has(s)||Vr("Cannot "+t);var Q=(s,e,t)=>(zt(s,e,"read from private field"),t?t.call(s):e.get(s)),xe=(s,e,t)=>e.has(s)?Vr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),he=(s,e,t,o)=>(zt(s,e,"write to private field"),o?o.call(s,t):e.set(s,t),t),pe=(s,e,t)=>(zt(s,e,"access private method"),t);import{r as k,j as S,S as bi,i as _r,k as ut,c as Er,l as kt,m as hs,d as Le,u as We,P as be,h as ue,n as wi,b as fs,e as ds,o as xi,p as Si,q as _i,s as Ei,F as Ci,D as Ii,R as Pe}from"./ui-B0V4iUj-.js";import{S as Ai,p as Hr,r as Be,s as tr,a as Nt,n as rr,i as sr,b as Gr,t as Ri,f as Ni,c as Pi,d as Wr,e as ps,g as Ti,u as Mi,h as me,j as Li,k as ms,R as ji,V as ki,A as Bi,C as Di,l as Oi}from"./index-GFcQ622H.js";import"./vendor-DJG_os-6.js";var Ie,ee,xt,Ee,Ze,ot,Ve,He,St,at,lt,Je,Xe,Ge,ct,te,yt,nr,ir,or,ar,lr,cr,ur,gs,us,Fi=(us=class extends Ai{constructor(e,t){super();xe(this,te);xe(this,Ie);xe(this,ee);xe(this,xt);xe(this,Ee);xe(this,Ze);xe(this,ot);xe(this,Ve);xe(this,He);xe(this,St);xe(this,at);xe(this,lt);xe(this,Je);xe(this,Xe);xe(this,Ge);xe(this,ct,new Set);this.options=t,he(this,Ie,e),he(this,He,null),he(this,Ve,Hr()),this.options.experimental_prefetchInRender||Q(this,Ve).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Q(this,ee).addObserver(this),zr(Q(this,ee),this.options)?pe(this,te,yt).call(this):this.updateResult(),pe(this,te,ar).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return hr(Q(this,ee),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return hr(Q(this,ee),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,pe(this,te,lr).call(this),pe(this,te,cr).call(this),Q(this,ee).removeObserver(this)}setOptions(e){const t=this.options,o=Q(this,ee);if(this.options=Q(this,Ie).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Be(this.options.enabled,Q(this,ee))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");pe(this,te,ur).call(this),Q(this,ee).setOptions(this.options),t._defaulted&&!tr(this.options,t)&&Q(this,Ie).getQueryCache().notify({type:"observerOptionsUpdated",query:Q(this,ee),observer:this});const a=this.hasListeners();a&&Kr(Q(this,ee),o,this.options,t)&&pe(this,te,yt).call(this),this.updateResult(),a&&(Q(this,ee)!==o||Be(this.options.enabled,Q(this,ee))!==Be(t.enabled,Q(this,ee))||Nt(this.options.staleTime,Q(this,ee))!==Nt(t.staleTime,Q(this,ee)))&&pe(this,te,nr).call(this);const i=pe(this,te,ir).call(this);a&&(Q(this,ee)!==o||Be(this.options.enabled,Q(this,ee))!==Be(t.enabled,Q(this,ee))||i!==Q(this,Ge))&&pe(this,te,or).call(this,i)}getOptimisticResult(e){const t=Q(this,Ie).getQueryCache().build(Q(this,Ie),e),o=this.createResult(t,e);return Qi(this,o)&&(he(this,Ee,o),he(this,ot,this.options),he(this,Ze,Q(this,ee).state)),o}getCurrentResult(){return Q(this,Ee)}trackResult(e,t){return new Proxy(e,{get:(o,a)=>(this.trackProp(a),t==null||t(a),Reflect.get(o,a))})}trackProp(e){Q(this,ct).add(e)}getCurrentQuery(){return Q(this,ee)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=Q(this,Ie).defaultQueryOptions(e),o=Q(this,Ie).getQueryCache().build(Q(this,Ie),t);return o.fetch().then(()=>this.createResult(o,t))}fetch(e){return pe(this,te,yt).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Q(this,Ee)))}createResult(e,t){var I;const o=Q(this,ee),a=this.options,i=Q(this,Ee),l=Q(this,Ze),n=Q(this,ot),v=e!==o?e.state:Q(this,xt),{state:g}=e;let b={...g},y=!1,x;if(t._optimisticResults){const L=this.hasListeners(),j=!L&&zr(e,t),U=L&&Kr(e,o,t,a);(j||U)&&(b={...b,...Pi(g.data,e.options)}),t._optimisticResults==="isRestoring"&&(b.fetchStatus="idle")}let{error:c,errorUpdatedAt:h,status:p}=b;x=b.data;let _=!1;if(t.placeholderData!==void 0&&x===void 0&&p==="pending"){let L;i!=null&&i.isPlaceholderData&&t.placeholderData===(n==null?void 0:n.placeholderData)?(L=i.data,_=!0):L=typeof t.placeholderData=="function"?t.placeholderData((I=Q(this,lt))==null?void 0:I.state.data,Q(this,lt)):t.placeholderData,L!==void 0&&(p="success",x=Wr(i==null?void 0:i.data,L,t),y=!0)}if(t.select&&x!==void 0&&!_)if(i&&x===(l==null?void 0:l.data)&&t.select===Q(this,St))x=Q(this,at);else try{he(this,St,t.select),x=t.select(x),x=Wr(i==null?void 0:i.data,x,t),he(this,at,x),he(this,He,null)}catch(L){he(this,He,L)}Q(this,He)&&(c=Q(this,He),x=Q(this,at),h=Date.now(),p="error");const E=b.fetchStatus==="fetching",C=p==="pending",N=p==="error",P=C&&E,w=x!==void 0,A={status:p,fetchStatus:b.fetchStatus,isPending:C,isSuccess:p==="success",isError:N,isInitialLoading:P,isLoading:P,data:x,dataUpdatedAt:b.dataUpdatedAt,error:c,errorUpdatedAt:h,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>v.dataUpdateCount||b.errorUpdateCount>v.errorUpdateCount,isFetching:E,isRefetching:E&&!C,isLoadingError:N&&!w,isPaused:b.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:N&&w,isStale:Cr(e,t),refetch:this.refetch,promise:Q(this,Ve)};if(this.options.experimental_prefetchInRender){const L=$=>{A.status==="error"?$.reject(A.error):A.data!==void 0&&$.resolve(A.data)},j=()=>{const $=he(this,Ve,A.promise=Hr());L($)},U=Q(this,Ve);switch(U.status){case"pending":e.queryHash===o.queryHash&&L(U);break;case"fulfilled":(A.status==="error"||A.data!==U.value)&&j();break;case"rejected":(A.status!=="error"||A.error!==U.reason)&&j();break}}return A}updateResult(){const e=Q(this,Ee),t=this.createResult(Q(this,ee),this.options);if(he(this,Ze,Q(this,ee).state),he(this,ot,this.options),Q(this,Ze).data!==void 0&&he(this,lt,Q(this,ee)),tr(t,e))return;he(this,Ee,t);const o=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!Q(this,ct).size)return!0;const l=new Set(i??Q(this,ct));return this.options.throwOnError&&l.add("error"),Object.keys(Q(this,Ee)).some(n=>{const f=n;return Q(this,Ee)[f]!==e[f]&&l.has(f)})};pe(this,te,gs).call(this,{listeners:o()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&pe(this,te,ar).call(this)}},Ie=new WeakMap,ee=new WeakMap,xt=new WeakMap,Ee=new WeakMap,Ze=new WeakMap,ot=new WeakMap,Ve=new WeakMap,He=new WeakMap,St=new WeakMap,at=new WeakMap,lt=new WeakMap,Je=new WeakMap,Xe=new WeakMap,Ge=new WeakMap,ct=new WeakMap,te=new WeakSet,yt=function(e){pe(this,te,ur).call(this);let t=Q(this,ee).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(rr)),t},nr=function(){pe(this,te,lr).call(this);const e=Nt(this.options.staleTime,Q(this,ee));if(sr||Q(this,Ee).isStale||!Gr(e))return;const o=Ri(Q(this,Ee).dataUpdatedAt,e)+1;he(this,Je,setTimeout(()=>{Q(this,Ee).isStale||this.updateResult()},o))},ir=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Q(this,ee)):this.options.refetchInterval)??!1},or=function(e){pe(this,te,cr).call(this),he(this,Ge,e),!(sr||Be(this.options.enabled,Q(this,ee))===!1||!Gr(Q(this,Ge))||Q(this,Ge)===0)&&he(this,Xe,setInterval(()=>{(this.options.refetchIntervalInBackground||Ni.isFocused())&&pe(this,te,yt).call(this)},Q(this,Ge)))},ar=function(){pe(this,te,nr).call(this),pe(this,te,or).call(this,pe(this,te,ir).call(this))},lr=function(){Q(this,Je)&&(clearTimeout(Q(this,Je)),he(this,Je,void 0))},cr=function(){Q(this,Xe)&&(clearInterval(Q(this,Xe)),he(this,Xe,void 0))},ur=function(){const e=Q(this,Ie).getQueryCache().build(Q(this,Ie),this.options);if(e===Q(this,ee))return;const t=Q(this,ee);he(this,ee,e),he(this,xt,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},gs=function(e){ps.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(Q(this,Ee))}),Q(this,Ie).getQueryCache().notify({query:Q(this,ee),type:"observerResultsUpdated"})})},us);function Ui(s,e){return Be(e.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&e.retryOnMount===!1)}function zr(s,e){return Ui(s,e)||s.state.data!==void 0&&hr(s,e,e.refetchOnMount)}function hr(s,e,t){if(Be(e.enabled,s)!==!1){const o=typeof t=="function"?t(s):t;return o==="always"||o!==!1&&Cr(s,e)}return!1}function Kr(s,e,t,o){return(s!==e||Be(o.enabled,s)===!1)&&(!t.suspense||s.state.status!=="error")&&Cr(s,t)}function Cr(s,e){return Be(e.enabled,s)!==!1&&s.isStaleByTime(Nt(e.staleTime,s))}function Qi(s,e){return!tr(s.getCurrentResult(),e)}var ys=k.createContext(!1),qi=()=>k.useContext(ys);ys.Provider;function $i(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Vi=k.createContext($i()),Hi=()=>k.useContext(Vi),Gi=(s,e)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(e.isReset()||(s.retryOnMount=!1))},Wi=s=>{k.useEffect(()=>{s.clearReset()},[s])},zi=({result:s,errorResetBoundary:e,throwOnError:t,query:o,suspense:a})=>s.isError&&!e.isReset()&&!s.isFetching&&o&&(a&&s.data===void 0||Ti(t,[s.error,o])),Ki=s=>{const e=s.staleTime;s.suspense&&(s.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3)))},Yi=(s,e)=>s.isLoading&&s.isFetching&&!e,Zi=(s,e)=>(s==null?void 0:s.suspense)&&e.isPending,Yr=(s,e,t)=>e.fetchOptimistic(s).catch(()=>{t.clearReset()});function Ji(s,e,t){var b,y,x,c,h;const o=Mi(),a=qi(),i=Hi(),l=o.defaultQueryOptions(s);(y=(b=o.getDefaultOptions().queries)==null?void 0:b._experimental_beforeQuery)==null||y.call(b,l),l._optimisticResults=a?"isRestoring":"optimistic",Ki(l),Gi(l,i),Wi(i);const n=!o.getQueryCache().get(l.queryHash),[f]=k.useState(()=>new e(o,l)),v=f.getOptimisticResult(l),g=!a&&s.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(p=>{const _=g?f.subscribe(ps.batchCalls(p)):rr;return f.updateResult(),_},[f,g]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),k.useEffect(()=>{f.setOptions(l)},[l,f]),Zi(l,v))throw Yr(l,f,i);if(zi({result:v,errorResetBoundary:i,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw v.error;if((c=(x=o.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||c.call(x,l,v),l.experimental_prefetchInRender&&!sr&&Yi(v,a)){const p=n?Yr(l,f,i):(h=o.getQueryCache().get(l.queryHash))==null?void 0:h.promise;p==null||p.catch(rr).finally(()=>{f.updateResult()})}return l.notifyOnChangeProps?v:f.trackResult(v)}function Xi(s,e){return Ji(s,Fi)}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),to=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,o)=>o?o.toUpperCase():t.toLowerCase()),Zr=s=>{const e=to(s);return e.charAt(0).toUpperCase()+e.slice(1)},vs=(...s)=>s.filter((e,t,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===t).join(" ").trim(),ro=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var so={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=k.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:a="",children:i,iconNode:l,...n},f)=>k.createElement("svg",{ref:f,...so,width:e,height:e,stroke:s,strokeWidth:o?Number(t)*24/Number(e):t,className:vs("lucide",a),...!i&&!ro(n)&&{"aria-hidden":"true"},...n},[...l.map(([v,g])=>k.createElement(v,g)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(s,e)=>{const t=k.forwardRef(({className:o,...a},i)=>k.createElement(no,{ref:i,iconNode:e,className:vs(`lucide-${eo(Zr(s))}`,`lucide-${s}`,o),...a}));return t.displayName=Zr(s),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],oo=Se("arrow-up-down",io);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],lo=Se("calendar",ao);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uo=Se("check",co);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bs=Se("chevron-down",ho);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],po=Se("chevron-left",fo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],go=Se("chevron-right",mo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],vo=Se("chevron-up",yo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],wo=Se("clock",bo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]],Kt=Se("dog",xo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],_o=Se("external-link",So);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Co=Se("grid-3x3",Eo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Ao=Se("list",Io);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],No=Se("map-pin",Ro);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],To=Se("ruler",Po);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Jr=Se("search",Mo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],jo=Se("star",Lo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],Bo=Se("weight",ko),fr=k.forwardRef(({className:s,type:e,...t},o)=>S.jsx("input",{type:e,className:me("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:o,value:t.value||"",...t}));fr.displayName="Input";const Xr=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,es=Li,Ir=(s,e)=>t=>{var o;if((e==null?void 0:e.variants)==null)return es(s,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:a,defaultVariants:i}=e,l=Object.keys(a).map(v=>{const g=t==null?void 0:t[v],b=i==null?void 0:i[v];if(g===null)return null;const y=Xr(g)||Xr(b);return a[v][y]}),n=t&&Object.entries(t).reduce((v,g)=>{let[b,y]=g;return y===void 0||(v[b]=y),v},{}),f=e==null||(o=e.compoundVariants)===null||o===void 0?void 0:o.reduce((v,g)=>{let{class:b,className:y,...x}=g;return Object.entries(x).every(c=>{let[h,p]=c;return Array.isArray(p)?p.includes({...i,...n}[h]):{...i,...n}[h]===p})?[...v,b,y]:v},[]);return es(s,l,f,t==null?void 0:t.class,t==null?void 0:t.className)},Do=Ir("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),wt=k.forwardRef(({className:s,variant:e,size:t,asChild:o=!1,...a},i)=>{const l=o?bi:"button";return S.jsx(l,{className:me(Do({variant:e,size:t,className:s})),ref:i,...a})});wt.displayName="Button";function ts(s,[e,t]){return Math.min(t,Math.max(e,s))}function Oo(s){const e=k.useRef({value:s,previous:s});return k.useMemo(()=>(e.current.value!==s&&(e.current.previous=e.current.value,e.current.value=s),e.current.previous),[s])}var Fo=[" ","Enter","ArrowUp","ArrowDown"],Uo=[" ","Enter"],et="Select",[Bt,Dt,Qo]=hs(et),[ht,zl]=Er(et,[Qo,ms]),Ot=ms(),[qo,ze]=ht(et),[$o,Vo]=ht(et),ws=s=>{const{__scopeSelect:e,children:t,open:o,defaultOpen:a,onOpenChange:i,value:l,defaultValue:n,onValueChange:f,dir:v,name:g,autoComplete:b,disabled:y,required:x,form:c}=s,h=Ot(e),[p,_]=k.useState(null),[E,C]=k.useState(null),[N,P]=k.useState(!1),w=_r(v),[T,A]=ut({prop:o,defaultProp:a??!1,onChange:i,caller:et}),[I,L]=ut({prop:l,defaultProp:n,onChange:f,caller:et}),j=k.useRef(null),U=p?c||!!p.closest("form"):!0,[$,B]=k.useState(new Set),F=Array.from($).map(q=>q.props.value).join(";");return S.jsx(ji,{...h,children:S.jsxs(qo,{required:x,scope:e,trigger:p,onTriggerChange:_,valueNode:E,onValueNodeChange:C,valueNodeHasChildren:N,onValueNodeHasChildrenChange:P,contentId:kt(),value:I,onValueChange:L,open:T,onOpenChange:A,dir:w,triggerPointerDownPosRef:j,disabled:y,children:[S.jsx(Bt.Provider,{scope:e,children:S.jsx($o,{scope:s.__scopeSelect,onNativeOptionAdd:k.useCallback(q=>{B(V=>new Set(V).add(q))},[]),onNativeOptionRemove:k.useCallback(q=>{B(V=>{const z=new Set(V);return z.delete(q),z})},[]),children:t})}),U?S.jsxs(Vs,{"aria-hidden":!0,required:x,tabIndex:-1,name:g,autoComplete:b,value:I,onChange:q=>L(q.target.value),disabled:y,form:c,children:[I===void 0?S.jsx("option",{value:""}):null,Array.from($)]},F):null]})})};ws.displayName=et;var xs="SelectTrigger",Ss=k.forwardRef((s,e)=>{const{__scopeSelect:t,disabled:o=!1,...a}=s,i=Ot(t),l=ze(xs,t),n=l.disabled||o,f=Le(e,l.onTriggerChange),v=Dt(t),g=k.useRef("touch"),[b,y,x]=Gs(h=>{const p=v().filter(C=>!C.disabled),_=p.find(C=>C.value===l.value),E=Ws(p,h,_);E!==void 0&&l.onValueChange(E.value)}),c=h=>{n||(l.onOpenChange(!0),x()),h&&(l.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return S.jsx(Bi,{asChild:!0,...i,children:S.jsx(be.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:n,"data-disabled":n?"":void 0,"data-placeholder":Hs(l.value)?"":void 0,...a,ref:f,onClick:ue(a.onClick,h=>{h.currentTarget.focus(),g.current!=="mouse"&&c(h)}),onPointerDown:ue(a.onPointerDown,h=>{g.current=h.pointerType;const p=h.target;p.hasPointerCapture(h.pointerId)&&p.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(c(h),h.preventDefault())}),onKeyDown:ue(a.onKeyDown,h=>{const p=b.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&y(h.key),!(p&&h.key===" ")&&Fo.includes(h.key)&&(c(),h.preventDefault())})})})});Ss.displayName=xs;var _s="SelectValue",Es=k.forwardRef((s,e)=>{const{__scopeSelect:t,className:o,style:a,children:i,placeholder:l="",...n}=s,f=ze(_s,t),{onValueNodeHasChildrenChange:v}=f,g=i!==void 0,b=Le(e,f.onValueNodeChange);return We(()=>{v(g)},[v,g]),S.jsx(be.span,{...n,ref:b,style:{pointerEvents:"none"},children:Hs(f.value)?S.jsx(S.Fragment,{children:l}):i})});Es.displayName=_s;var Ho="SelectIcon",Cs=k.forwardRef((s,e)=>{const{__scopeSelect:t,children:o,...a}=s;return S.jsx(be.span,{"aria-hidden":!0,...a,ref:e,children:o||"â–¼"})});Cs.displayName=Ho;var Go="SelectPortal",Is=s=>S.jsx(wi,{asChild:!0,...s});Is.displayName=Go;var tt="SelectContent",As=k.forwardRef((s,e)=>{const t=ze(tt,s.__scopeSelect),[o,a]=k.useState();if(We(()=>{a(new DocumentFragment)},[]),!t.open){const i=o;return i?fs.createPortal(S.jsx(Rs,{scope:s.__scopeSelect,children:S.jsx(Bt.Slot,{scope:s.__scopeSelect,children:S.jsx("div",{children:s.children})})}),i):null}return S.jsx(Ns,{...s,ref:e})});As.displayName=tt;var Me=10,[Rs,Ke]=ht(tt),Wo="SelectContentImpl",zo=Ei("SelectContent.RemoveScroll"),Ns=k.forwardRef((s,e)=>{const{__scopeSelect:t,position:o="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:n,sideOffset:f,align:v,alignOffset:g,arrowPadding:b,collisionBoundary:y,collisionPadding:x,sticky:c,hideWhenDetached:h,avoidCollisions:p,..._}=s,E=ze(tt,t),[C,N]=k.useState(null),[P,w]=k.useState(null),T=Le(e,Y=>N(Y)),[A,I]=k.useState(null),[L,j]=k.useState(null),U=Dt(t),[$,B]=k.useState(!1),F=k.useRef(!1);k.useEffect(()=>{if(C)return xi(C)},[C]),Si();const q=k.useCallback(Y=>{const[re,...ge]=U().map(se=>se.ref.current),[oe]=ge.slice(-1),ie=document.activeElement;for(const se of Y)if(se===ie||(se==null||se.scrollIntoView({block:"nearest"}),se===re&&P&&(P.scrollTop=0),se===oe&&P&&(P.scrollTop=P.scrollHeight),se==null||se.focus(),document.activeElement!==ie))return},[U,P]),V=k.useCallback(()=>q([A,C]),[q,A,C]);k.useEffect(()=>{$&&V()},[$,V]);const{onOpenChange:z,triggerPointerDownPosRef:Z}=E;k.useEffect(()=>{if(C){let Y={x:0,y:0};const re=oe=>{var ie,se;Y={x:Math.abs(Math.round(oe.pageX)-(((ie=Z.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(oe.pageY)-(((se=Z.current)==null?void 0:se.y)??0))}},ge=oe=>{Y.x<=10&&Y.y<=10?oe.preventDefault():C.contains(oe.target)||z(!1),document.removeEventListener("pointermove",re),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",ge,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",ge,{capture:!0})}}},[C,z,Z]),k.useEffect(()=>{const Y=()=>z(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[z]);const[we,ne]=Gs(Y=>{const re=U().filter(ie=>!ie.disabled),ge=re.find(ie=>ie.ref.current===document.activeElement),oe=Ws(re,Y,ge);oe&&setTimeout(()=>oe.ref.current.focus())}),fe=k.useCallback((Y,re,ge)=>{const oe=!F.current&&!ge;(E.value!==void 0&&E.value===re||oe)&&(I(Y),oe&&(F.current=!0))},[E.value]),De=k.useCallback(()=>C==null?void 0:C.focus(),[C]),ke=k.useCallback((Y,re,ge)=>{const oe=!F.current&&!ge;(E.value!==void 0&&E.value===re||oe)&&j(Y)},[E.value]),Qe=o==="popper"?dr:Ps,Oe=Qe===dr?{side:n,sideOffset:f,align:v,alignOffset:g,arrowPadding:b,collisionBoundary:y,collisionPadding:x,sticky:c,hideWhenDetached:h,avoidCollisions:p}:{};return S.jsx(Rs,{scope:t,content:C,viewport:P,onViewportChange:w,itemRefCallback:fe,selectedItem:A,onItemLeave:De,itemTextRefCallback:ke,focusSelectedItem:V,selectedItemText:L,position:o,isPositioned:$,searchRef:we,children:S.jsx(_i,{as:zo,allowPinchZoom:!0,children:S.jsx(Ci,{asChild:!0,trapped:E.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:ue(a,Y=>{var re;(re=E.trigger)==null||re.focus({preventScroll:!0}),Y.preventDefault()}),children:S.jsx(Ii,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:S.jsx(Qe,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:Y=>Y.preventDefault(),..._,...Oe,onPlaced:()=>B(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:ue(_.onKeyDown,Y=>{const re=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!re&&Y.key.length===1&&ne(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let oe=U().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const ie=Y.target,se=oe.indexOf(ie);oe=oe.slice(se+1)}setTimeout(()=>q(oe)),Y.preventDefault()}})})})})})})});Ns.displayName=Wo;var Ko="SelectItemAlignedPosition",Ps=k.forwardRef((s,e)=>{const{__scopeSelect:t,onPlaced:o,...a}=s,i=ze(tt,t),l=Ke(tt,t),[n,f]=k.useState(null),[v,g]=k.useState(null),b=Le(e,T=>g(T)),y=Dt(t),x=k.useRef(!1),c=k.useRef(!0),{viewport:h,selectedItem:p,selectedItemText:_,focusSelectedItem:E}=l,C=k.useCallback(()=>{if(i.trigger&&i.valueNode&&n&&v&&h&&p&&_){const T=i.trigger.getBoundingClientRect(),A=v.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),L=_.getBoundingClientRect();if(i.dir!=="rtl"){const ie=L.left-A.left,se=I.left-ie,_e=T.left-se,Ce=T.width+_e,dt=Math.max(Ce,A.width),nt=window.innerWidth-Me,qe=ts(se,[Me,Math.max(Me,nt-dt)]);n.style.minWidth=Ce+"px",n.style.left=qe+"px"}else{const ie=A.right-L.right,se=window.innerWidth-I.right-ie,_e=window.innerWidth-T.right-se,Ce=T.width+_e,dt=Math.max(Ce,A.width),nt=window.innerWidth-Me,qe=ts(se,[Me,Math.max(Me,nt-dt)]);n.style.minWidth=Ce+"px",n.style.right=qe+"px"}const j=y(),U=window.innerHeight-Me*2,$=h.scrollHeight,B=window.getComputedStyle(v),F=parseInt(B.borderTopWidth,10),q=parseInt(B.paddingTop,10),V=parseInt(B.borderBottomWidth,10),z=parseInt(B.paddingBottom,10),Z=F+q+$+z+V,we=Math.min(p.offsetHeight*5,Z),ne=window.getComputedStyle(h),fe=parseInt(ne.paddingTop,10),De=parseInt(ne.paddingBottom,10),ke=T.top+T.height/2-Me,Qe=U-ke,Oe=p.offsetHeight/2,Y=p.offsetTop+Oe,re=F+q+Y,ge=Z-re;if(re<=ke){const ie=j.length>0&&p===j[j.length-1].ref.current;n.style.bottom="0px";const se=v.clientHeight-h.offsetTop-h.offsetHeight,_e=Math.max(Qe,Oe+(ie?De:0)+se+V),Ce=re+_e;n.style.height=Ce+"px"}else{const ie=j.length>0&&p===j[0].ref.current;n.style.top="0px";const _e=Math.max(ke,F+h.offsetTop+(ie?fe:0)+Oe)+ge;n.style.height=_e+"px",h.scrollTop=re-ke+h.offsetTop}n.style.margin=`${Me}px 0`,n.style.minHeight=we+"px",n.style.maxHeight=U+"px",o==null||o(),requestAnimationFrame(()=>x.current=!0)}},[y,i.trigger,i.valueNode,n,v,h,p,_,i.dir,o]);We(()=>C(),[C]);const[N,P]=k.useState();We(()=>{v&&P(window.getComputedStyle(v).zIndex)},[v]);const w=k.useCallback(T=>{T&&c.current===!0&&(C(),E==null||E(),c.current=!1)},[C,E]);return S.jsx(Zo,{scope:t,contentWrapper:n,shouldExpandOnScrollRef:x,onScrollButtonChange:w,children:S.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:S.jsx(be.div,{...a,ref:b,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Ps.displayName=Ko;var Yo="SelectPopperPosition",dr=k.forwardRef((s,e)=>{const{__scopeSelect:t,align:o="start",collisionPadding:a=Me,...i}=s,l=Ot(t);return S.jsx(Di,{...l,...i,ref:e,align:o,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dr.displayName=Yo;var[Zo,Ar]=ht(tt,{}),pr="SelectViewport",Ts=k.forwardRef((s,e)=>{const{__scopeSelect:t,nonce:o,...a}=s,i=Ke(pr,t),l=Ar(pr,t),n=Le(e,i.onViewportChange),f=k.useRef(0);return S.jsxs(S.Fragment,{children:[S.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),S.jsx(Bt.Slot,{scope:t,children:S.jsx(be.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:n,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ue(a.onScroll,v=>{const g=v.currentTarget,{contentWrapper:b,shouldExpandOnScrollRef:y}=l;if(y!=null&&y.current&&b){const x=Math.abs(f.current-g.scrollTop);if(x>0){const c=window.innerHeight-Me*2,h=parseFloat(b.style.minHeight),p=parseFloat(b.style.height),_=Math.max(h,p);if(_<c){const E=_+x,C=Math.min(c,E),N=E-C;b.style.height=C+"px",b.style.bottom==="0px"&&(g.scrollTop=N>0?N:0,b.style.justifyContent="flex-end")}}}f.current=g.scrollTop})})})]})});Ts.displayName=pr;var Ms="SelectGroup",[Jo,Xo]=ht(Ms),ea=k.forwardRef((s,e)=>{const{__scopeSelect:t,...o}=s,a=kt();return S.jsx(Jo,{scope:t,id:a,children:S.jsx(be.div,{role:"group","aria-labelledby":a,...o,ref:e})})});ea.displayName=Ms;var Ls="SelectLabel",js=k.forwardRef((s,e)=>{const{__scopeSelect:t,...o}=s,a=Xo(Ls,t);return S.jsx(be.div,{id:a.id,...o,ref:e})});js.displayName=Ls;var Lt="SelectItem",[ta,ks]=ht(Lt),Bs=k.forwardRef((s,e)=>{const{__scopeSelect:t,value:o,disabled:a=!1,textValue:i,...l}=s,n=ze(Lt,t),f=Ke(Lt,t),v=n.value===o,[g,b]=k.useState(i??""),[y,x]=k.useState(!1),c=Le(e,E=>{var C;return(C=f.itemRefCallback)==null?void 0:C.call(f,E,o,a)}),h=kt(),p=k.useRef("touch"),_=()=>{a||(n.onValueChange(o),n.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return S.jsx(ta,{scope:t,value:o,disabled:a,textId:h,isSelected:v,onItemTextChange:k.useCallback(E=>{b(C=>C||((E==null?void 0:E.textContent)??"").trim())},[]),children:S.jsx(Bt.ItemSlot,{scope:t,value:o,disabled:a,textValue:g,children:S.jsx(be.div,{role:"option","aria-labelledby":h,"data-highlighted":y?"":void 0,"aria-selected":v&&y,"data-state":v?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:c,onFocus:ue(l.onFocus,()=>x(!0)),onBlur:ue(l.onBlur,()=>x(!1)),onClick:ue(l.onClick,()=>{p.current!=="mouse"&&_()}),onPointerUp:ue(l.onPointerUp,()=>{p.current==="mouse"&&_()}),onPointerDown:ue(l.onPointerDown,E=>{p.current=E.pointerType}),onPointerMove:ue(l.onPointerMove,E=>{var C;p.current=E.pointerType,a?(C=f.onItemLeave)==null||C.call(f):p.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(l.onPointerLeave,E=>{var C;E.currentTarget===document.activeElement&&((C=f.onItemLeave)==null||C.call(f))}),onKeyDown:ue(l.onKeyDown,E=>{var N;((N=f.searchRef)==null?void 0:N.current)!==""&&E.key===" "||(Uo.includes(E.key)&&_(),E.key===" "&&E.preventDefault())})})})})});Bs.displayName=Lt;var vt="SelectItemText",Ds=k.forwardRef((s,e)=>{const{__scopeSelect:t,className:o,style:a,...i}=s,l=ze(vt,t),n=Ke(vt,t),f=ks(vt,t),v=Vo(vt,t),[g,b]=k.useState(null),y=Le(e,_=>b(_),f.onItemTextChange,_=>{var E;return(E=n.itemTextRefCallback)==null?void 0:E.call(n,_,f.value,f.disabled)}),x=g==null?void 0:g.textContent,c=k.useMemo(()=>S.jsx("option",{value:f.value,disabled:f.disabled,children:x},f.value),[f.disabled,f.value,x]),{onNativeOptionAdd:h,onNativeOptionRemove:p}=v;return We(()=>(h(c),()=>p(c)),[h,p,c]),S.jsxs(S.Fragment,{children:[S.jsx(be.span,{id:f.textId,...i,ref:y}),f.isSelected&&l.valueNode&&!l.valueNodeHasChildren?fs.createPortal(i.children,l.valueNode):null]})});Ds.displayName=vt;var Os="SelectItemIndicator",Fs=k.forwardRef((s,e)=>{const{__scopeSelect:t,...o}=s;return ks(Os,t).isSelected?S.jsx(be.span,{"aria-hidden":!0,...o,ref:e}):null});Fs.displayName=Os;var mr="SelectScrollUpButton",Us=k.forwardRef((s,e)=>{const t=Ke(mr,s.__scopeSelect),o=Ar(mr,s.__scopeSelect),[a,i]=k.useState(!1),l=Le(e,o.onScrollButtonChange);return We(()=>{if(t.viewport&&t.isPositioned){let n=function(){const v=f.scrollTop>0;i(v)};const f=t.viewport;return n(),f.addEventListener("scroll",n),()=>f.removeEventListener("scroll",n)}},[t.viewport,t.isPositioned]),a?S.jsx(qs,{...s,ref:l,onAutoScroll:()=>{const{viewport:n,selectedItem:f}=t;n&&f&&(n.scrollTop=n.scrollTop-f.offsetHeight)}}):null});Us.displayName=mr;var gr="SelectScrollDownButton",Qs=k.forwardRef((s,e)=>{const t=Ke(gr,s.__scopeSelect),o=Ar(gr,s.__scopeSelect),[a,i]=k.useState(!1),l=Le(e,o.onScrollButtonChange);return We(()=>{if(t.viewport&&t.isPositioned){let n=function(){const v=f.scrollHeight-f.clientHeight,g=Math.ceil(f.scrollTop)<v;i(g)};const f=t.viewport;return n(),f.addEventListener("scroll",n),()=>f.removeEventListener("scroll",n)}},[t.viewport,t.isPositioned]),a?S.jsx(qs,{...s,ref:l,onAutoScroll:()=>{const{viewport:n,selectedItem:f}=t;n&&f&&(n.scrollTop=n.scrollTop+f.offsetHeight)}}):null});Qs.displayName=gr;var qs=k.forwardRef((s,e)=>{const{__scopeSelect:t,onAutoScroll:o,...a}=s,i=Ke("SelectScrollButton",t),l=k.useRef(null),n=Dt(t),f=k.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return k.useEffect(()=>()=>f(),[f]),We(()=>{var g;const v=n().find(b=>b.ref.current===document.activeElement);(g=v==null?void 0:v.ref.current)==null||g.scrollIntoView({block:"nearest"})},[n]),S.jsx(be.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:ue(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(o,50))}),onPointerMove:ue(a.onPointerMove,()=>{var v;(v=i.onItemLeave)==null||v.call(i),l.current===null&&(l.current=window.setInterval(o,50))}),onPointerLeave:ue(a.onPointerLeave,()=>{f()})})}),ra="SelectSeparator",$s=k.forwardRef((s,e)=>{const{__scopeSelect:t,...o}=s;return S.jsx(be.div,{"aria-hidden":!0,...o,ref:e})});$s.displayName=ra;var yr="SelectArrow",sa=k.forwardRef((s,e)=>{const{__scopeSelect:t,...o}=s,a=Ot(t),i=ze(yr,t),l=Ke(yr,t);return i.open&&l.position==="popper"?S.jsx(Oi,{...a,...o,ref:e}):null});sa.displayName=yr;var na="SelectBubbleInput",Vs=k.forwardRef(({__scopeSelect:s,value:e,...t},o)=>{const a=k.useRef(null),i=Le(o,a),l=Oo(e);return k.useEffect(()=>{const n=a.current;if(!n)return;const f=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(f,"value").set;if(l!==e&&g){const b=new Event("change",{bubbles:!0});g.call(n,e),n.dispatchEvent(b)}},[l,e]),S.jsx(be.select,{...t,style:{...ki,...t.style},ref:i,defaultValue:e})});Vs.displayName=na;function Hs(s){return s===""||s===void 0}function Gs(s){const e=ds(s),t=k.useRef(""),o=k.useRef(0),a=k.useCallback(l=>{const n=t.current+l;e(n),function f(v){t.current=v,window.clearTimeout(o.current),v!==""&&(o.current=window.setTimeout(()=>f(""),1e3))}(n)},[e]),i=k.useCallback(()=>{t.current="",window.clearTimeout(o.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(o.current),[]),[t,a,i]}function Ws(s,e,t){const a=e.length>1&&Array.from(e).every(v=>v===e[0])?e[0]:e,i=t?s.indexOf(t):-1;let l=ia(s,Math.max(i,0));a.length===1&&(l=l.filter(v=>v!==t));const f=l.find(v=>v.textValue.toLowerCase().startsWith(a.toLowerCase()));return f!==t?f:void 0}function ia(s,e){return s.map((t,o)=>s[(e+o)%s.length])}var oa=ws,zs=Ss,aa=Es,la=Cs,ca=Is,Ks=As,ua=Ts,Ys=js,Zs=Bs,ha=Ds,fa=Fs,Js=Us,Xs=Qs,en=$s;const Yt=oa,Zt=aa,Pt=k.forwardRef(({className:s,children:e,...t},o)=>S.jsxs(zs,{ref:o,className:me("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[e,S.jsx(la,{asChild:!0,children:S.jsx(bs,{className:"h-4 w-4 opacity-50"})})]}));Pt.displayName=zs.displayName;const tn=k.forwardRef(({className:s,...e},t)=>S.jsx(Js,{ref:t,className:me("flex cursor-default items-center justify-center py-1",s),...e,children:S.jsx(vo,{className:"h-4 w-4"})}));tn.displayName=Js.displayName;const rn=k.forwardRef(({className:s,...e},t)=>S.jsx(Xs,{ref:t,className:me("flex cursor-default items-center justify-center py-1",s),...e,children:S.jsx(bs,{className:"h-4 w-4"})}));rn.displayName=Xs.displayName;const Tt=k.forwardRef(({className:s,children:e,position:t="popper",...o},a)=>S.jsx(ca,{children:S.jsxs(Ks,{ref:a,className:me("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...o,children:[S.jsx(tn,{}),S.jsx(ua,{className:me("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),S.jsx(rn,{})]})}));Tt.displayName=Ks.displayName;const da=k.forwardRef(({className:s,...e},t)=>S.jsx(Ys,{ref:t,className:me("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...e}));da.displayName=Ys.displayName;const Re=k.forwardRef(({className:s,children:e,...t},o)=>S.jsxs(Zs,{ref:o,className:me("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[S.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:S.jsx(fa,{children:S.jsx(uo,{className:"h-4 w-4"})})}),S.jsx(ha,{children:e})]}));Re.displayName=Zs.displayName;const pa=k.forwardRef(({className:s,...e},t)=>S.jsx(en,{ref:t,className:me("-mx-1 my-1 h-px bg-muted",s),...e}));pa.displayName=en.displayName;var Jt="rovingFocusGroup.onEntryFocus",ma={bubbles:!1,cancelable:!0},_t="RovingFocusGroup",[vr,sn,ga]=hs(_t),[ya,nn]=Er(_t,[ga]),[va,ba]=ya(_t),on=k.forwardRef((s,e)=>S.jsx(vr.Provider,{scope:s.__scopeRovingFocusGroup,children:S.jsx(vr.Slot,{scope:s.__scopeRovingFocusGroup,children:S.jsx(wa,{...s,ref:e})})}));on.displayName=_t;var wa=k.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,orientation:o,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:n,onCurrentTabStopIdChange:f,onEntryFocus:v,preventScrollOnEntryFocus:g=!1,...b}=s,y=k.useRef(null),x=Le(e,y),c=_r(i),[h,p]=ut({prop:l,defaultProp:n??null,onChange:f,caller:_t}),[_,E]=k.useState(!1),C=ds(v),N=sn(t),P=k.useRef(!1),[w,T]=k.useState(0);return k.useEffect(()=>{const A=y.current;if(A)return A.addEventListener(Jt,C),()=>A.removeEventListener(Jt,C)},[C]),S.jsx(va,{scope:t,orientation:o,dir:c,loop:a,currentTabStopId:h,onItemFocus:k.useCallback(A=>p(A),[p]),onItemShiftTab:k.useCallback(()=>E(!0),[]),onFocusableItemAdd:k.useCallback(()=>T(A=>A+1),[]),onFocusableItemRemove:k.useCallback(()=>T(A=>A-1),[]),children:S.jsx(be.div,{tabIndex:_||w===0?-1:0,"data-orientation":o,...b,ref:x,style:{outline:"none",...s.style},onMouseDown:ue(s.onMouseDown,()=>{P.current=!0}),onFocus:ue(s.onFocus,A=>{const I=!P.current;if(A.target===A.currentTarget&&I&&!_){const L=new CustomEvent(Jt,ma);if(A.currentTarget.dispatchEvent(L),!L.defaultPrevented){const j=N().filter(q=>q.focusable),U=j.find(q=>q.active),$=j.find(q=>q.id===h),F=[U,$,...j].filter(Boolean).map(q=>q.ref.current);cn(F,g)}}P.current=!1}),onBlur:ue(s.onBlur,()=>E(!1))})})}),an="RovingFocusGroupItem",ln=k.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,focusable:o=!0,active:a=!1,tabStopId:i,children:l,...n}=s,f=kt(),v=i||f,g=ba(an,t),b=g.currentTabStopId===v,y=sn(t),{onFocusableItemAdd:x,onFocusableItemRemove:c,currentTabStopId:h}=g;return k.useEffect(()=>{if(o)return x(),()=>c()},[o,x,c]),S.jsx(vr.ItemSlot,{scope:t,id:v,focusable:o,active:a,children:S.jsx(be.span,{tabIndex:b?0:-1,"data-orientation":g.orientation,...n,ref:e,onMouseDown:ue(s.onMouseDown,p=>{o?g.onItemFocus(v):p.preventDefault()}),onFocus:ue(s.onFocus,()=>g.onItemFocus(v)),onKeyDown:ue(s.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){g.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const _=_a(p,g.orientation,g.dir);if(_!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let C=y().filter(N=>N.focusable).map(N=>N.ref.current);if(_==="last")C.reverse();else if(_==="prev"||_==="next"){_==="prev"&&C.reverse();const N=C.indexOf(p.currentTarget);C=g.loop?Ea(C,N+1):C.slice(N+1)}setTimeout(()=>cn(C))}}),children:typeof l=="function"?l({isCurrentTabStop:b,hasTabStop:h!=null}):l})})});ln.displayName=an;var xa={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Sa(s,e){return e!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function _a(s,e,t){const o=Sa(s.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return xa[o]}function cn(s,e=!1){const t=document.activeElement;for(const o of s)if(o===t||(o.focus({preventScroll:e}),document.activeElement!==t))return}function Ea(s,e){return s.map((t,o)=>s[(e+o)%s.length])}var Ca=on,Ia=ln,un="Toggle",Rr=k.forwardRef((s,e)=>{const{pressed:t,defaultPressed:o,onPressedChange:a,...i}=s,[l,n]=ut({prop:t,onChange:a,defaultProp:o??!1,caller:un});return S.jsx(be.button,{type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":s.disabled?"":void 0,...i,ref:e,onClick:ue(s.onClick,()=>{s.disabled||n(!l)})})});Rr.displayName=un;var hn=Rr,Ye="ToggleGroup",[fn,Kl]=Er(Ye,[nn]),dn=nn(),Nr=Pe.forwardRef((s,e)=>{const{type:t,...o}=s;if(t==="single"){const a=o;return S.jsx(Aa,{...a,ref:e})}if(t==="multiple"){const a=o;return S.jsx(Ra,{...a,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${Ye}\``)});Nr.displayName=Ye;var[pn,mn]=fn(Ye),Aa=Pe.forwardRef((s,e)=>{const{value:t,defaultValue:o,onValueChange:a=()=>{},...i}=s,[l,n]=ut({prop:t,defaultProp:o??"",onChange:a,caller:Ye});return S.jsx(pn,{scope:s.__scopeToggleGroup,type:"single",value:Pe.useMemo(()=>l?[l]:[],[l]),onItemActivate:n,onItemDeactivate:Pe.useCallback(()=>n(""),[n]),children:S.jsx(gn,{...i,ref:e})})}),Ra=Pe.forwardRef((s,e)=>{const{value:t,defaultValue:o,onValueChange:a=()=>{},...i}=s,[l,n]=ut({prop:t,defaultProp:o??[],onChange:a,caller:Ye}),f=Pe.useCallback(g=>n((b=[])=>[...b,g]),[n]),v=Pe.useCallback(g=>n((b=[])=>b.filter(y=>y!==g)),[n]);return S.jsx(pn,{scope:s.__scopeToggleGroup,type:"multiple",value:l,onItemActivate:f,onItemDeactivate:v,children:S.jsx(gn,{...i,ref:e})})});Nr.displayName=Ye;var[Na,Pa]=fn(Ye),gn=Pe.forwardRef((s,e)=>{const{__scopeToggleGroup:t,disabled:o=!1,rovingFocus:a=!0,orientation:i,dir:l,loop:n=!0,...f}=s,v=dn(t),g=_r(l),b={role:"group",dir:g,...f};return S.jsx(Na,{scope:t,rovingFocus:a,disabled:o,children:a?S.jsx(Ca,{asChild:!0,...v,orientation:i,dir:g,loop:n,children:S.jsx(be.div,{...b,ref:e})}):S.jsx(be.div,{...b,ref:e})})}),jt="ToggleGroupItem",yn=Pe.forwardRef((s,e)=>{const t=mn(jt,s.__scopeToggleGroup),o=Pa(jt,s.__scopeToggleGroup),a=dn(s.__scopeToggleGroup),i=t.value.includes(s.value),l=o.disabled||s.disabled,n={...s,pressed:i,disabled:l},f=Pe.useRef(null);return o.rovingFocus?S.jsx(Ia,{asChild:!0,...a,focusable:!l,active:i,ref:f,children:S.jsx(rs,{...n,ref:e})}):S.jsx(rs,{...n,ref:e})});yn.displayName=jt;var rs=Pe.forwardRef((s,e)=>{const{__scopeToggleGroup:t,value:o,...a}=s,i=mn(jt,t),l={role:"radio","aria-checked":s.pressed,"aria-pressed":void 0},n=i.type==="single"?l:void 0;return S.jsx(Rr,{...n,...a,ref:e,onPressedChange:f=>{f?i.onItemActivate(o):i.onItemDeactivate(o)}})}),vn=Nr,bn=yn;const wn=Ir("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),Ta=k.forwardRef(({className:s,variant:e,size:t,...o},a)=>S.jsx(hn,{ref:a,className:me(wn({variant:e,size:t,className:s})),...o}));Ta.displayName=hn.displayName;const xn=k.createContext({size:"default",variant:"default"}),Sn=k.forwardRef(({className:s,variant:e,size:t,children:o,...a},i)=>S.jsx(vn,{ref:i,className:me("flex items-center justify-center gap-1",s),...a,children:S.jsx(xn.Provider,{value:{variant:e,size:t},children:o})}));Sn.displayName=vn.displayName;const br=k.forwardRef(({className:s,children:e,variant:t,size:o,...a},i)=>{const l=k.useContext(xn);return S.jsx(bn,{ref:i,className:me(wn({variant:l.variant||t,size:l.size||o}),s),...a,children:e})});br.displayName=bn.displayName;const _n=k.forwardRef(({className:s,...e},t)=>S.jsx("div",{ref:t,className:me("rounded-lg border bg-card text-card-foreground shadow-sm",s),...e}));_n.displayName="Card";const Ma=k.forwardRef(({className:s,...e},t)=>S.jsx("div",{ref:t,className:me("flex flex-col space-y-1.5 p-6",s),...e}));Ma.displayName="CardHeader";const La=k.forwardRef(({className:s,...e},t)=>S.jsx("h3",{ref:t,className:me("text-2xl font-semibold leading-none tracking-tight",s),...e}));La.displayName="CardTitle";const ja=k.forwardRef(({className:s,...e},t)=>S.jsx("p",{ref:t,className:me("text-sm text-muted-foreground",s),...e}));ja.displayName="CardDescription";const En=k.forwardRef(({className:s,...e},t)=>S.jsx("div",{ref:t,className:me("p-6 pt-0",s),...e}));En.displayName="CardContent";const ka=k.forwardRef(({className:s,...e},t)=>S.jsx("div",{ref:t,className:me("flex items-center p-6 pt-0",s),...e}));ka.displayName="CardFooter";const Ba=Ir("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $e({className:s,variant:e,...t}){return S.jsx("div",{className:me(Ba({variant:e}),s),...t})}const ss=s=>{if(!s)return 0;const e=s.match(/(\d+)\s*yr?\s*(\d+)?\s*mo?/);if(e){const t=parseInt(e[1])||0,o=parseInt(e[2])||0;return t*12+o}return 0},Cn=(s,e)=>{if(s==="Foster Care")return"In Foster";if(s&&s.startsWith("ISO")&&e==="ISO Dogs")return`ISO Dogs ${s.replace("ISO","")}`;if(s&&s.startsWith("IsoP")&&e==="ISO Puppies")return`ISO Puppies ${s.replace("IsoP","")}`;if(s&&s.includes("Cat Holding")&&e&&e.includes("Cat Hold")){const t=s.match(/Cat Holding \((\d+)\) (\d+)/),o=e.match(/Cat Hold\((\d+)\)/);if(t&&o){const[,a,i]=t;return`Cat Holdings (${a}) - ${i}`}}if(s&&s.startsWith("Hold")&&e==="Dog Hold")return`Dog Holding ${s.replace("Hold","")}`;if(s&&s.startsWith("Bonding Rooms")&&(e==="Bonding Rooms"||!e)){const t=s.match(/Bonding Rooms ([A-Z]\d+)([A-Z])/);if(t){const[,o,a]=t;return`Bonding Rooms ${o} - ${a}`}return s}if(s&&s.includes("Hall Crate")&&(e==="Hall Crate"||!e)){let t=s.replace(/^Hall Crate\s+Hall Crate\s+/,"Hall Crate ");return t=t.replace(/(\d+)-([A-Z])/g,"$1 - $2"),t}return e&&e.includes("Adopt Dogs")&&s&&s.match(/^[A-Z]\d+/)?s.replace(/^([A-Z])(\d+)/,"$1 - $2"):e&&e!==s?`${s} â€¢ ${e}`:s},Da=Pe.memo(({dog:s,isFavorite:e,onToggleFavorite:t})=>{const[o,a]=k.useState(0),[i,l]=k.useState(!1),n=A=>{var L;if(!A||A.trim()===""||A==="N/A")return null;const I=A.trim();if(I.includes("petango.com"))return I;if(I.includes("drive.google.com")){const j=(L=I.match(/\/d\/([a-zA-Z0-9-_]+)/))==null?void 0:L[1];return j?`https://drive.google.com/uc?id=${j}`:null}return I},f=A=>{switch(A){case 1:return"bg-green-100 text-green-800 border-green-200";case 2:return"bg-yellow-100 text-yellow-800 border-yellow-200";case 3:return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=A=>A["Breed AI"]||"Mixed Breed",g=A=>A<=25?"Small":A<=60?"Medium":"Large",b=(A,I)=>A==="Yes"?(I==null?void 0:I.toLowerCase())==="female"?"Spayed":"Neutered":(I==null?void 0:I.toLowerCase())==="female"?"Not Spayed":"Not Neutered",y=A=>A==="Yes"?"bg-green-100 text-green-800 border-green-200":"bg-yellow-100 text-yellow-800 border-yellow-200",x=A=>A.toLowerCase()==="male"?{icon:"â™‚",className:"text-blue-500 text-lg"}:A.toLowerCase()==="female"?{icon:"â™€",className:"text-pink-500 text-lg"}:null,c=[s.Photo_1,s.Photo_2,s.Photo_3].filter(A=>A&&A.trim()!==""&&A!=="N/A"),h=c.length>1,p=()=>{h&&a(A=>(A+1)%c.length)},_=()=>{h&&a(A=>(A-1+c.length)%c.length)},E=k.useMemo(()=>n(c[o]||s.Photo_1),[c,o,s.Photo_1]),C=k.useMemo(()=>s.DFTD_eligibility==="Yes",[s.DFTD_eligibility]),N=k.useMemo(()=>g(s.Weight),[s.Weight]),P=k.useMemo(()=>v(s),[s]),w=x(s.Gender),T=!s.Level&&!s.Days_in_Shelter;return S.jsxs(_n,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-300 bg-gradient-to-br from-orange-50 to-yellow-50 border-orange-200 flex flex-col h-full",children:[S.jsxs("div",{className:"relative h-64 bg-gradient-to-br from-orange-100 to-yellow-100 overflow-hidden rounded-t-lg",children:[E?S.jsx("img",{src:E,alt:s.Name,className:"w-full h-full object-contain",onError:A=>{l(!0)}}):S.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-400",children:[S.jsx(Kt,{className:"h-16 w-16 mb-2"}),S.jsx("span",{className:"text-sm font-medium",children:"Photo Coming Soon"}),S.jsxs("span",{className:"text-xs",children:["We're working on getting ",s.Name,"'s photo!"]})]}),i&&S.jsxs("div",{className:"absolute inset-0 w-full h-full flex flex-col items-center justify-center text-gray-400 bg-gradient-to-br from-orange-100 to-yellow-100",children:[S.jsx(Kt,{className:"h-16 w-16 mb-2"}),S.jsx("span",{className:"text-sm font-medium",children:"Image Not Available"}),S.jsxs("span",{className:"text-xs text-center px-4",children:["We're working on updating ",s.Name,"'s photo!"]})]}),h&&E&&!i&&S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:_,className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm p-1 rounded-full hover:bg-white transition-colors duration-200 shadow-sm",children:S.jsx(po,{className:"h-4 w-4 text-gray-700"})}),S.jsx("button",{onClick:p,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm p-1 rounded-full hover:bg-white transition-colors duration-200 shadow-sm",children:S.jsx(go,{className:"h-4 w-4 text-gray-700"})})]}),h&&E&&!i&&S.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1",children:c.map((A,I)=>S.jsx("button",{onClick:()=>a(I),className:`w-2 h-2 rounded-full transition-colors duration-200 ${I===o?"bg-white shadow-sm":"bg-white/60"}`},I))}),s.Level&&s.Level>0&&S.jsxs($e,{variant:"outline",className:`absolute top-2 right-2 text-xs font-medium ${f(s.Level)}`,children:["Level ",s.Level]}),S.jsxs("div",{className:"flex items-center justify-between mb-3",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.Name}),w&&S.jsx("span",{className:w.className,children:w.icon})]}),S.jsxs($e,{variant:"outline",className:"text-xs bg-white/80 backdrop-blur-sm",children:["ID: ",s["Dog ID"]]})]})]}),S.jsxs(En,{className:"p-4 flex-1 flex flex-col",children:[S.jsxs("div",{className:"flex items-center justify-between mb-3",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.Name}),w&&S.jsx("span",{className:w.className,children:w.icon})]}),S.jsxs($e,{variant:"outline",className:"text-xs bg-white/80 backdrop-blur-sm",children:["ID: ",s["Dog ID"]]})]}),T?S.jsxs("div",{className:"space-y-2 mb-3",children:[S.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),S.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]}):S.jsxs("div",{className:"space-y-2 mb-3",children:[S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[S.jsx(Kt,{className:"h-4 w-4"}),S.jsxs("div",{className:"relative group",children:[S.jsx("span",{className:"font-medium cursor-help underline decoration-dotted",children:"Breed:"}),S.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:["AI-identified breed. DNA test may be required to verify.",S.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"})]})]}),S.jsx("span",{children:P})]}),S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[S.jsx(wo,{className:"h-4 w-4"}),S.jsx("span",{className:"font-medium",children:"Age:"}),S.jsx("span",{children:s.Approx_Age})]}),S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[S.jsx(Bo,{className:"h-4 w-4"}),S.jsx("span",{className:"font-medium",children:"Weight:"}),S.jsxs("span",{children:[s.Weight," lbs"]})]}),S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[S.jsx(lo,{className:"h-4 w-4"}),S.jsxs("span",{children:[s.Days_in_DCAS," days in shelter"]})]})]}),S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[S.jsx(No,{className:"h-4 w-4"}),S.jsx("span",{className:"font-medium",children:"Location:"}),S.jsx("span",{children:Cn(s.Location_kennel,s.Location_room)})]}),S.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[C&&S.jsxs($e,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0 font-medium",children:[S.jsx(jo,{className:"h-3 w-3 mr-1"}),"DFTD Eligible"]}),S.jsxs($e,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center gap-1",children:[S.jsx(To,{className:"h-3 w-3"}),N]})]}),S.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[S.jsx($e,{variant:"outline",className:y(s.Spay_Neuter_status),children:b(s.Spay_Neuter_status,s.Gender)}),s.Sociability_status&&S.jsx($e,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:s.Sociability_status}),s.Sociablity_playstyle&&S.jsx($e,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:s.Sociablity_playstyle})]}),S.jsx("div",{className:"flex-1"}),S.jsx(wt,{className:"w-full bg-orange-500 hover:bg-orange-600 text-white",onClick:()=>{s.Adopets_url&&s.Adopets_url!=="Dog Not Found"&&window.open(s.Adopets_url,"_blank")},disabled:!s.Adopets_url||s.Adopets_url==="Dog Not Found",children:!s.Adopets_url||s.Adopets_url==="Dog Not Found"?"Currently Unavailable":"View Adoption Details"})]})]})},(s,e)=>s.dog["Dog ID"]===e.dog["Dog ID"]&&s.isFavorite===e.isFavorite),Oa=({dogs:s,favorites:e,onToggleFavorite:t,viewMode:o="cards"})=>{const a=n=>{switch(n){case 1:return"bg-green-100 text-green-800 border-green-300";case 2:return"bg-yellow-100 text-yellow-800 border-yellow-300";case 3:return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},i=n=>n.toLowerCase()==="male"?S.jsx("span",{className:"text-blue-500 text-lg",children:"â™‚"}):n.toLowerCase()==="female"?S.jsx("span",{className:"text-pink-500 text-lg",children:"â™€"}):null,l=k.useCallback(n=>{var f;if(!n)return"https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=400&fit=crop&crop=face";if(n.includes("drive.google.com")){const v=(f=n.match(/\/d\/([a-zA-Z0-9-_]+)/))==null?void 0:f[1];if(v)return`https://drive.google.com/uc?export=view&id=${v}`}return n},[]);return o==="table"?S.jsx("div",{children:S.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-orange-200 overflow-hidden",children:S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full",children:[S.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 border-b border-orange-200",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Photo"}),S.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Name"}),S.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 relative",children:S.jsxs("div",{className:"relative group",children:[S.jsx("span",{className:"cursor-help underline decoration-dotted",children:"Breed"}),S.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:["AI-identified breed. DNA test may be required to verify.",S.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-800"})]})]})}),S.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-24",children:"Age"}),S.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Weight"}),S.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700 w-20",children:"Level"}),S.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700",children:"Location"}),S.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700",children:"Adopt"})]})}),S.jsx("tbody",{className:"divide-y divide-orange-100",children:s.map(n=>{const f=i(n.Gender);return S.jsxs("tr",{className:"hover:bg-orange-25 transition-colors",children:[S.jsx("td",{className:"px-4 py-3",children:S.jsx("div",{className:"w-16 h-16 bg-orange-50 rounded-lg overflow-hidden flex items-center justify-center",children:S.jsx("img",{src:l(n.Photo_1),alt:n.Name,className:"max-w-full max-h-full object-cover",onError:v=>{v.currentTarget.src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=400&fit=crop&crop=face"}})})}),S.jsxs("td",{className:"px-4 py-3",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[f&&S.jsx("span",{className:f.className,children:f.icon}),S.jsx("span",{className:"font-medium text-gray-900",children:n.Name})]}),S.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",n["Dog ID"]]})]}),S.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:n["Breed AI_1"]||n["Breed AI"]||"Mixed Breed"}),S.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 whitespace-nowrap",children:n.Approx_Age}),S.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[n.Weight," lbs"]}),S.jsx("td",{className:"px-4 py-3 text-center",children:S.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap ${a(n.Level)}`,children:["Level ",n.Level]})}),S.jsx("td",{className:"px-4 py-3 text-center",children:S.jsx("span",{className:"text-sm text-gray-700",children:Cn(n.Location_kennel,n.Location_room)})}),S.jsx("td",{className:"px-4 py-3 text-center",children:n.Adopets_url?S.jsx(wt,{asChild:!0,size:"sm",className:"bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white",children:S.jsxs("a",{href:n.Adopets_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1",children:[S.jsx("span",{children:"Adopt"}),S.jsx(_o,{className:"h-3 w-3"})]})}):S.jsx("span",{className:"text-gray-400 text-sm",children:"N/A"})})]},n["Dog ID"])})})]})})})}):S.jsx("div",{children:S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.map(n=>S.jsx(Da,{dog:n,isFavorite:e.has(n["Dog ID"]),onToggleFavorite:()=>t(n["Dog ID"])},n["Dog ID"]))})})};var Fa=Object.create,ft=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Qa=Object.getOwnPropertyNames,qa=Object.getPrototypeOf,$a=Object.prototype.hasOwnProperty,Va=(s,e,t)=>e in s?ft(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,m=(s,e)=>ft(s,"name",{value:e,configurable:!0}),Ae=(s,e)=>()=>(s&&(e=s(s=0)),e),X=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),je=(s,e)=>{for(var t in e)ft(s,t,{get:e[t],enumerable:!0})},In=(s,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Qa(e))!$a.call(s,a)&&a!==t&&ft(s,a,{get:()=>e[a],enumerable:!(o=Ua(e,a))||o.enumerable});return s},rt=(s,e,t)=>(t=s!=null?Fa(qa(s)):{},In(e||!s||!s.__esModule?ft(t,"default",{value:s,enumerable:!0}):t,s)),ve=s=>In(ft({},"__esModule",{value:!0}),s),K=(s,e,t)=>Va(s,typeof e!="symbol"?e+"":e,t),Ha=X(s=>{H(),s.byteLength=f,s.toByteArray=g,s.fromByteArray=x;var e=[],t=[],o=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,l=a.length;i<l;++i)e[i]=a[i],t[a.charCodeAt(i)]=i;var i,l;t[45]=62,t[95]=63;function n(c){var h=c.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=c.indexOf("=");p===-1&&(p=h);var _=p===h?0:4-p%4;return[p,_]}m(n,"getLens");function f(c){var h=n(c),p=h[0],_=h[1];return(p+_)*3/4-_}m(f,"byteLength");function v(c,h,p){return(h+p)*3/4-p}m(v,"_byteLength");function g(c){var h,p=n(c),_=p[0],E=p[1],C=new o(v(c,_,E)),N=0,P=E>0?_-4:_,w;for(w=0;w<P;w+=4)h=t[c.charCodeAt(w)]<<18|t[c.charCodeAt(w+1)]<<12|t[c.charCodeAt(w+2)]<<6|t[c.charCodeAt(w+3)],C[N++]=h>>16&255,C[N++]=h>>8&255,C[N++]=h&255;return E===2&&(h=t[c.charCodeAt(w)]<<2|t[c.charCodeAt(w+1)]>>4,C[N++]=h&255),E===1&&(h=t[c.charCodeAt(w)]<<10|t[c.charCodeAt(w+1)]<<4|t[c.charCodeAt(w+2)]>>2,C[N++]=h>>8&255,C[N++]=h&255),C}m(g,"toByteArray");function b(c){return e[c>>18&63]+e[c>>12&63]+e[c>>6&63]+e[c&63]}m(b,"tripletToBase64");function y(c,h,p){for(var _,E=[],C=h;C<p;C+=3)_=(c[C]<<16&16711680)+(c[C+1]<<8&65280)+(c[C+2]&255),E.push(b(_));return E.join("")}m(y,"encodeChunk");function x(c){for(var h,p=c.length,_=p%3,E=[],C=16383,N=0,P=p-_;N<P;N+=C)E.push(y(c,N,N+C>P?P:N+C));return _===1?(h=c[p-1],E.push(e[h>>2]+e[h<<4&63]+"==")):_===2&&(h=(c[p-2]<<8)+c[p-1],E.push(e[h>>10]+e[h>>4&63]+e[h<<2&63]+"=")),E.join("")}m(x,"fromByteArray")}),Ga=X(s=>{H(),s.read=function(e,t,o,a,i){var l,n,f=i*8-a-1,v=(1<<f)-1,g=v>>1,b=-7,y=o?i-1:0,x=o?-1:1,c=e[t+y];for(y+=x,l=c&(1<<-b)-1,c>>=-b,b+=f;b>0;l=l*256+e[t+y],y+=x,b-=8);for(n=l&(1<<-b)-1,l>>=-b,b+=a;b>0;n=n*256+e[t+y],y+=x,b-=8);if(l===0)l=1-g;else{if(l===v)return n?NaN:(c?-1:1)*(1/0);n=n+Math.pow(2,a),l=l-g}return(c?-1:1)*n*Math.pow(2,l-a)},s.write=function(e,t,o,a,i,l){var n,f,v,g=l*8-i-1,b=(1<<g)-1,y=b>>1,x=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=a?0:l-1,h=a?1:-1,p=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(f=isNaN(t)?1:0,n=b):(n=Math.floor(Math.log(t)/Math.LN2),t*(v=Math.pow(2,-n))<1&&(n--,v*=2),n+y>=1?t+=x/v:t+=x*Math.pow(2,1-y),t*v>=2&&(n++,v/=2),n+y>=b?(f=0,n=b):n+y>=1?(f=(t*v-1)*Math.pow(2,i),n=n+y):(f=t*Math.pow(2,y-1)*Math.pow(2,i),n=0));i>=8;e[o+c]=f&255,c+=h,f/=256,i-=8);for(n=n<<i|f,g+=i;g>0;e[o+c]=n&255,c+=h,n/=256,g-=8);e[o+c-h]|=p*128}}),Wa=X(s=>{H();var e=Ha(),t=Ga(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=n,s.SlowBuffer=E,s.INSPECT_MAX_BYTES=50;var a=2147483647;s.kMaxLength=a,n.TYPED_ARRAY_SUPPORT=i(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let r=new Uint8Array(1),u={foo:m(function(){return 42},"foo")};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(r,u),r.foo()===42}catch{return!1}}m(i,"typedArraySupport"),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:m(function(){if(n.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:m(function(){if(n.isBuffer(this))return this.byteOffset},"get")});function l(r){if(r>a)throw new RangeError('The value "'+r+'" is invalid for option "size"');let u=new Uint8Array(r);return Object.setPrototypeOf(u,n.prototype),u}m(l,"createBuffer");function n(r,u,d){if(typeof r=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(r)}return f(r,u,d)}m(n,"Buffer"),n.poolSize=8192;function f(r,u,d){if(typeof r=="string")return y(r,u);if(ArrayBuffer.isView(r))return c(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Te(r,ArrayBuffer)||r&&Te(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Te(r,SharedArrayBuffer)||r&&Te(r.buffer,SharedArrayBuffer)))return h(r,u,d);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let R=r.valueOf&&r.valueOf();if(R!=null&&R!==r)return n.from(R,u,d);let M=p(r);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return n.from(r[Symbol.toPrimitive]("string"),u,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}m(f,"from"),n.from=function(r,u,d){return f(r,u,d)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array);function v(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}m(v,"assertSize");function g(r,u,d){return v(r),r<=0?l(r):u!==void 0?typeof d=="string"?l(r).fill(u,d):l(r).fill(u):l(r)}m(g,"alloc"),n.alloc=function(r,u,d){return g(r,u,d)};function b(r){return v(r),l(r<0?0:_(r)|0)}m(b,"allocUnsafe"),n.allocUnsafe=function(r){return b(r)},n.allocUnsafeSlow=function(r){return b(r)};function y(r,u){if((typeof u!="string"||u==="")&&(u="utf8"),!n.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let d=C(r,u)|0,R=l(d),M=R.write(r,u);return M!==d&&(R=R.slice(0,M)),R}m(y,"fromString");function x(r){let u=r.length<0?0:_(r.length)|0,d=l(u);for(let R=0;R<u;R+=1)d[R]=r[R]&255;return d}m(x,"fromArrayLike");function c(r){if(Te(r,Uint8Array)){let u=new Uint8Array(r);return h(u.buffer,u.byteOffset,u.byteLength)}return x(r)}m(c,"fromArrayView");function h(r,u,d){if(u<0||r.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<u+(d||0))throw new RangeError('"length" is outside of buffer bounds');let R;return u===void 0&&d===void 0?R=new Uint8Array(r):d===void 0?R=new Uint8Array(r,u):R=new Uint8Array(r,u,d),Object.setPrototypeOf(R,n.prototype),R}m(h,"fromArrayBuffer");function p(r){if(n.isBuffer(r)){let u=_(r.length)|0,d=l(u);return d.length===0||r.copy(d,0,0,u),d}if(r.length!==void 0)return typeof r.length!="number"||Ct(r.length)?l(0):x(r);if(r.type==="Buffer"&&Array.isArray(r.data))return x(r.data)}m(p,"fromObject");function _(r){if(r>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return r|0}m(_,"checked");function E(r){return+r!=r&&(r=0),n.alloc(+r)}m(E,"SlowBuffer"),n.isBuffer=m(function(r){return r!=null&&r._isBuffer===!0&&r!==n.prototype},"isBuffer"),n.compare=m(function(r,u){if(Te(r,Uint8Array)&&(r=n.from(r,r.offset,r.byteLength)),Te(u,Uint8Array)&&(u=n.from(u,u.offset,u.byteLength)),!n.isBuffer(r)||!n.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===u)return 0;let d=r.length,R=u.length;for(let M=0,D=Math.min(d,R);M<D;++M)if(r[M]!==u[M]){d=r[M],R=u[M];break}return d<R?-1:R<d?1:0},"compare"),n.isEncoding=m(function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),n.concat=m(function(r,u){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return n.alloc(0);let d;if(u===void 0)for(u=0,d=0;d<r.length;++d)u+=r[d].length;let R=n.allocUnsafe(u),M=0;for(d=0;d<r.length;++d){let D=r[d];if(Te(D,Uint8Array))M+D.length>R.length?(n.isBuffer(D)||(D=n.from(D)),D.copy(R,M)):Uint8Array.prototype.set.call(R,D,M);else if(n.isBuffer(D))D.copy(R,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=D.length}return R},"concat");function C(r,u){if(n.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Te(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let d=r.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&d===0)return 0;let M=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return qe(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return Wt(r).length;default:if(M)return R?-1:qe(r).length;u=(""+u).toLowerCase(),M=!0}}m(C,"byteLength"),n.byteLength=C;function N(r,u,d){let R=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,u>>>=0,d<=u))return"";for(r||(r="utf8");;)switch(r){case"hex":return Z(this,u,d);case"utf8":case"utf-8":return B(this,u,d);case"ascii":return V(this,u,d);case"latin1":case"binary":return z(this,u,d);case"base64":return $(this,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,u,d);default:if(R)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),R=!0}}m(N,"slowToString"),n.prototype._isBuffer=!0;function P(r,u,d){let R=r[u];r[u]=r[d],r[d]=R}m(P,"swap"),n.prototype.swap16=m(function(){let r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<r;u+=2)P(this,u,u+1);return this},"swap16"),n.prototype.swap32=m(function(){let r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<r;u+=4)P(this,u,u+3),P(this,u+1,u+2);return this},"swap32"),n.prototype.swap64=m(function(){let r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<r;u+=8)P(this,u,u+7),P(this,u+1,u+6),P(this,u+2,u+5),P(this,u+3,u+4);return this},"swap64"),n.prototype.toString=m(function(){let r=this.length;return r===0?"":arguments.length===0?B(this,0,r):N.apply(this,arguments)},"toString"),n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=m(function(r){if(!n.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:n.compare(this,r)===0},"equals"),n.prototype.inspect=m(function(){let r="",u=s.INSPECT_MAX_BYTES;return r=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(r+=" ... "),"<Buffer "+r+">"},"inspect"),o&&(n.prototype[o]=n.prototype.inspect),n.prototype.compare=m(function(r,u,d,R,M){if(Te(r,Uint8Array)&&(r=n.from(r,r.offset,r.byteLength)),!n.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(u===void 0&&(u=0),d===void 0&&(d=r?r.length:0),R===void 0&&(R=0),M===void 0&&(M=this.length),u<0||d>r.length||R<0||M>this.length)throw new RangeError("out of range index");if(R>=M&&u>=d)return 0;if(R>=M)return-1;if(u>=d)return 1;if(u>>>=0,d>>>=0,R>>>=0,M>>>=0,this===r)return 0;let D=M-R,O=d-u,ae=Math.min(D,O),ye=this.slice(R,M),ce=r.slice(u,d);for(let le=0;le<ae;++le)if(ye[le]!==ce[le]){D=ye[le],O=ce[le];break}return D<O?-1:O<D?1:0},"compare");function w(r,u,d,R,M){if(r.length===0)return-1;if(typeof d=="string"?(R=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,Ct(d)&&(d=M?0:r.length-1),d<0&&(d=r.length+d),d>=r.length){if(M)return-1;d=r.length-1}else if(d<0)if(M)d=0;else return-1;if(typeof u=="string"&&(u=n.from(u,R)),n.isBuffer(u))return u.length===0?-1:T(r,u,d,R,M);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(r,u,d):Uint8Array.prototype.lastIndexOf.call(r,u,d):T(r,[u],d,R,M);throw new TypeError("val must be string, number or Buffer")}m(w,"bidirectionalIndexOf");function T(r,u,d,R,M){let D=1,O=r.length,ae=u.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(r.length<2||u.length<2)return-1;D=2,O/=2,ae/=2,d/=2}function ye(le,de){return D===1?le[de]:le.readUInt16BE(de*D)}m(ye,"read");let ce;if(M){let le=-1;for(ce=d;ce<O;ce++)if(ye(r,ce)===ye(u,le===-1?0:ce-le)){if(le===-1&&(le=ce),ce-le+1===ae)return le*D}else le!==-1&&(ce-=ce-le),le=-1}else for(d+ae>O&&(d=O-ae),ce=d;ce>=0;ce--){let le=!0;for(let de=0;de<ae;de++)if(ye(r,ce+de)!==ye(u,de)){le=!1;break}if(le)return ce}return-1}m(T,"arrayIndexOf"),n.prototype.includes=m(function(r,u,d){return this.indexOf(r,u,d)!==-1},"includes"),n.prototype.indexOf=m(function(r,u,d){return w(this,r,u,d,!0)},"indexOf"),n.prototype.lastIndexOf=m(function(r,u,d){return w(this,r,u,d,!1)},"lastIndexOf");function A(r,u,d,R){d=Number(d)||0;let M=r.length-d;R?(R=Number(R),R>M&&(R=M)):R=M;let D=u.length;R>D/2&&(R=D/2);let O;for(O=0;O<R;++O){let ae=parseInt(u.substr(O*2,2),16);if(Ct(ae))return O;r[d+O]=ae}return O}m(A,"hexWrite");function I(r,u,d,R){return pt(qe(u,r.length-d),r,d,R)}m(I,"utf8Write");function L(r,u,d,R){return pt(Qr(u),r,d,R)}m(L,"asciiWrite");function j(r,u,d,R){return pt(Wt(u),r,d,R)}m(j,"base64Write");function U(r,u,d,R){return pt(qr(u,r.length-d),r,d,R)}m(U,"ucs2Write"),n.prototype.write=m(function(r,u,d,R){if(u===void 0)R="utf8",d=this.length,u=0;else if(d===void 0&&typeof u=="string")R=u,d=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(d)?(d=d>>>0,R===void 0&&(R="utf8")):(R=d,d=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let M=this.length-u;if((d===void 0||d>M)&&(d=M),r.length>0&&(d<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");let D=!1;for(;;)switch(R){case"hex":return A(this,r,u,d);case"utf8":case"utf-8":return I(this,r,u,d);case"ascii":case"latin1":case"binary":return L(this,r,u,d);case"base64":return j(this,r,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,r,u,d);default:if(D)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),D=!0}},"write"),n.prototype.toJSON=m(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function $(r,u,d){return u===0&&d===r.length?e.fromByteArray(r):e.fromByteArray(r.slice(u,d))}m($,"base64Slice");function B(r,u,d){d=Math.min(r.length,d);let R=[],M=u;for(;M<d;){let D=r[M],O=null,ae=D>239?4:D>223?3:D>191?2:1;if(M+ae<=d){let ye,ce,le,de;switch(ae){case 1:D<128&&(O=D);break;case 2:ye=r[M+1],(ye&192)===128&&(de=(D&31)<<6|ye&63,de>127&&(O=de));break;case 3:ye=r[M+1],ce=r[M+2],(ye&192)===128&&(ce&192)===128&&(de=(D&15)<<12|(ye&63)<<6|ce&63,de>2047&&(de<55296||de>57343)&&(O=de));break;case 4:ye=r[M+1],ce=r[M+2],le=r[M+3],(ye&192)===128&&(ce&192)===128&&(le&192)===128&&(de=(D&15)<<18|(ye&63)<<12|(ce&63)<<6|le&63,de>65535&&de<1114112&&(O=de))}}O===null?(O=65533,ae=1):O>65535&&(O-=65536,R.push(O>>>10&1023|55296),O=56320|O&1023),R.push(O),M+=ae}return q(R)}m(B,"utf8Slice");var F=4096;function q(r){let u=r.length;if(u<=F)return String.fromCharCode.apply(String,r);let d="",R=0;for(;R<u;)d+=String.fromCharCode.apply(String,r.slice(R,R+=F));return d}m(q,"decodeCodePointsArray");function V(r,u,d){let R="";d=Math.min(r.length,d);for(let M=u;M<d;++M)R+=String.fromCharCode(r[M]&127);return R}m(V,"asciiSlice");function z(r,u,d){let R="";d=Math.min(r.length,d);for(let M=u;M<d;++M)R+=String.fromCharCode(r[M]);return R}m(z,"latin1Slice");function Z(r,u,d){let R=r.length;(!u||u<0)&&(u=0),(!d||d<0||d>R)&&(d=R);let M="";for(let D=u;D<d;++D)M+=vi[r[D]];return M}m(Z,"hexSlice");function we(r,u,d){let R=r.slice(u,d),M="";for(let D=0;D<R.length-1;D+=2)M+=String.fromCharCode(R[D]+R[D+1]*256);return M}m(we,"utf16leSlice"),n.prototype.slice=m(function(r,u){let d=this.length;r=~~r,u=u===void 0?d:~~u,r<0?(r+=d,r<0&&(r=0)):r>d&&(r=d),u<0?(u+=d,u<0&&(u=0)):u>d&&(u=d),u<r&&(u=r);let R=this.subarray(r,u);return Object.setPrototypeOf(R,n.prototype),R},"slice");function ne(r,u,d){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+u>d)throw new RangeError("Trying to access beyond buffer length")}m(ne,"checkOffset"),n.prototype.readUintLE=n.prototype.readUIntLE=m(function(r,u,d){r=r>>>0,u=u>>>0,d||ne(r,u,this.length);let R=this[r],M=1,D=0;for(;++D<u&&(M*=256);)R+=this[r+D]*M;return R},"readUIntLE"),n.prototype.readUintBE=n.prototype.readUIntBE=m(function(r,u,d){r=r>>>0,u=u>>>0,d||ne(r,u,this.length);let R=this[r+--u],M=1;for(;u>0&&(M*=256);)R+=this[r+--u]*M;return R},"readUIntBE"),n.prototype.readUint8=n.prototype.readUInt8=m(function(r,u){return r=r>>>0,u||ne(r,1,this.length),this[r]},"readUInt8"),n.prototype.readUint16LE=n.prototype.readUInt16LE=m(function(r,u){return r=r>>>0,u||ne(r,2,this.length),this[r]|this[r+1]<<8},"readUInt16LE"),n.prototype.readUint16BE=n.prototype.readUInt16BE=m(function(r,u){return r=r>>>0,u||ne(r,2,this.length),this[r]<<8|this[r+1]},"readUInt16BE"),n.prototype.readUint32LE=n.prototype.readUInt32LE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216},"readUInt32LE"),n.prototype.readUint32BE=n.prototype.readUInt32BE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])},"readUInt32BE"),n.prototype.readBigUInt64LE=Fe(m(function(r){r=r>>>0,_e(r,"offset");let u=this[r],d=this[r+7];(u===void 0||d===void 0)&&Ce(r,this.length-8);let R=u+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24,M=this[++r]+this[++r]*2**8+this[++r]*2**16+d*2**24;return BigInt(R)+(BigInt(M)<<BigInt(32))},"readBigUInt64LE")),n.prototype.readBigUInt64BE=Fe(m(function(r){r=r>>>0,_e(r,"offset");let u=this[r],d=this[r+7];(u===void 0||d===void 0)&&Ce(r,this.length-8);let R=u*2**24+this[++r]*2**16+this[++r]*2**8+this[++r],M=this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+d;return(BigInt(R)<<BigInt(32))+BigInt(M)},"readBigUInt64BE")),n.prototype.readIntLE=m(function(r,u,d){r=r>>>0,u=u>>>0,d||ne(r,u,this.length);let R=this[r],M=1,D=0;for(;++D<u&&(M*=256);)R+=this[r+D]*M;return M*=128,R>=M&&(R-=Math.pow(2,8*u)),R},"readIntLE"),n.prototype.readIntBE=m(function(r,u,d){r=r>>>0,u=u>>>0,d||ne(r,u,this.length);let R=u,M=1,D=this[r+--R];for(;R>0&&(M*=256);)D+=this[r+--R]*M;return M*=128,D>=M&&(D-=Math.pow(2,8*u)),D},"readIntBE"),n.prototype.readInt8=m(function(r,u){return r=r>>>0,u||ne(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]},"readInt8"),n.prototype.readInt16LE=m(function(r,u){r=r>>>0,u||ne(r,2,this.length);let d=this[r]|this[r+1]<<8;return d&32768?d|4294901760:d},"readInt16LE"),n.prototype.readInt16BE=m(function(r,u){r=r>>>0,u||ne(r,2,this.length);let d=this[r+1]|this[r]<<8;return d&32768?d|4294901760:d},"readInt16BE"),n.prototype.readInt32LE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},"readInt32LE"),n.prototype.readInt32BE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},"readInt32BE"),n.prototype.readBigInt64LE=Fe(m(function(r){r=r>>>0,_e(r,"offset");let u=this[r],d=this[r+7];(u===void 0||d===void 0)&&Ce(r,this.length-8);let R=this[r+4]+this[r+5]*2**8+this[r+6]*2**16+(d<<24);return(BigInt(R)<<BigInt(32))+BigInt(u+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24)},"readBigInt64LE")),n.prototype.readBigInt64BE=Fe(m(function(r){r=r>>>0,_e(r,"offset");let u=this[r],d=this[r+7];(u===void 0||d===void 0)&&Ce(r,this.length-8);let R=(u<<24)+this[++r]*2**16+this[++r]*2**8+this[++r];return(BigInt(R)<<BigInt(32))+BigInt(this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+d)},"readBigInt64BE")),n.prototype.readFloatLE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),t.read(this,r,!0,23,4)},"readFloatLE"),n.prototype.readFloatBE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),t.read(this,r,!1,23,4)},"readFloatBE"),n.prototype.readDoubleLE=m(function(r,u){return r=r>>>0,u||ne(r,8,this.length),t.read(this,r,!0,52,8)},"readDoubleLE"),n.prototype.readDoubleBE=m(function(r,u){return r=r>>>0,u||ne(r,8,this.length),t.read(this,r,!1,52,8)},"readDoubleBE");function fe(r,u,d,R,M,D){if(!n.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>M||u<D)throw new RangeError('"value" argument is out of bounds');if(d+R>r.length)throw new RangeError("Index out of range")}m(fe,"checkInt"),n.prototype.writeUintLE=n.prototype.writeUIntLE=m(function(r,u,d,R){if(r=+r,u=u>>>0,d=d>>>0,!R){let O=Math.pow(2,8*d)-1;fe(this,r,u,d,O,0)}let M=1,D=0;for(this[u]=r&255;++D<d&&(M*=256);)this[u+D]=r/M&255;return u+d},"writeUIntLE"),n.prototype.writeUintBE=n.prototype.writeUIntBE=m(function(r,u,d,R){if(r=+r,u=u>>>0,d=d>>>0,!R){let O=Math.pow(2,8*d)-1;fe(this,r,u,d,O,0)}let M=d-1,D=1;for(this[u+M]=r&255;--M>=0&&(D*=256);)this[u+M]=r/D&255;return u+d},"writeUIntBE"),n.prototype.writeUint8=n.prototype.writeUInt8=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,1,255,0),this[u]=r&255,u+1},"writeUInt8"),n.prototype.writeUint16LE=n.prototype.writeUInt16LE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,2,65535,0),this[u]=r&255,this[u+1]=r>>>8,u+2},"writeUInt16LE"),n.prototype.writeUint16BE=n.prototype.writeUInt16BE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,2,65535,0),this[u]=r>>>8,this[u+1]=r&255,u+2},"writeUInt16BE"),n.prototype.writeUint32LE=n.prototype.writeUInt32LE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,4,4294967295,0),this[u+3]=r>>>24,this[u+2]=r>>>16,this[u+1]=r>>>8,this[u]=r&255,u+4},"writeUInt32LE"),n.prototype.writeUint32BE=n.prototype.writeUInt32BE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,4,4294967295,0),this[u]=r>>>24,this[u+1]=r>>>16,this[u+2]=r>>>8,this[u+3]=r&255,u+4},"writeUInt32BE");function De(r,u,d,R,M){se(u,R,M,r,d,7);let D=Number(u&BigInt(4294967295));r[d++]=D,D=D>>8,r[d++]=D,D=D>>8,r[d++]=D,D=D>>8,r[d++]=D;let O=Number(u>>BigInt(32)&BigInt(4294967295));return r[d++]=O,O=O>>8,r[d++]=O,O=O>>8,r[d++]=O,O=O>>8,r[d++]=O,d}m(De,"wrtBigUInt64LE");function ke(r,u,d,R,M){se(u,R,M,r,d,7);let D=Number(u&BigInt(4294967295));r[d+7]=D,D=D>>8,r[d+6]=D,D=D>>8,r[d+5]=D,D=D>>8,r[d+4]=D;let O=Number(u>>BigInt(32)&BigInt(4294967295));return r[d+3]=O,O=O>>8,r[d+2]=O,O=O>>8,r[d+1]=O,O=O>>8,r[d]=O,d+8}m(ke,"wrtBigUInt64BE"),n.prototype.writeBigUInt64LE=Fe(m(function(r,u=0){return De(this,r,u,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),n.prototype.writeBigUInt64BE=Fe(m(function(r,u=0){return ke(this,r,u,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),n.prototype.writeIntLE=m(function(r,u,d,R){if(r=+r,u=u>>>0,!R){let ae=Math.pow(2,8*d-1);fe(this,r,u,d,ae-1,-ae)}let M=0,D=1,O=0;for(this[u]=r&255;++M<d&&(D*=256);)r<0&&O===0&&this[u+M-1]!==0&&(O=1),this[u+M]=(r/D>>0)-O&255;return u+d},"writeIntLE"),n.prototype.writeIntBE=m(function(r,u,d,R){if(r=+r,u=u>>>0,!R){let ae=Math.pow(2,8*d-1);fe(this,r,u,d,ae-1,-ae)}let M=d-1,D=1,O=0;for(this[u+M]=r&255;--M>=0&&(D*=256);)r<0&&O===0&&this[u+M+1]!==0&&(O=1),this[u+M]=(r/D>>0)-O&255;return u+d},"writeIntBE"),n.prototype.writeInt8=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,1,127,-128),r<0&&(r=255+r+1),this[u]=r&255,u+1},"writeInt8"),n.prototype.writeInt16LE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,2,32767,-32768),this[u]=r&255,this[u+1]=r>>>8,u+2},"writeInt16LE"),n.prototype.writeInt16BE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,2,32767,-32768),this[u]=r>>>8,this[u+1]=r&255,u+2},"writeInt16BE"),n.prototype.writeInt32LE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,4,2147483647,-2147483648),this[u]=r&255,this[u+1]=r>>>8,this[u+2]=r>>>16,this[u+3]=r>>>24,u+4},"writeInt32LE"),n.prototype.writeInt32BE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[u]=r>>>24,this[u+1]=r>>>16,this[u+2]=r>>>8,this[u+3]=r&255,u+4},"writeInt32BE"),n.prototype.writeBigInt64LE=Fe(m(function(r,u=0){return De(this,r,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),n.prototype.writeBigInt64BE=Fe(m(function(r,u=0){return ke(this,r,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function Qe(r,u,d,R,M,D){if(d+R>r.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}m(Qe,"checkIEEE754");function Oe(r,u,d,R,M){return u=+u,d=d>>>0,M||Qe(r,u,d,4),t.write(r,u,d,R,23,4),d+4}m(Oe,"writeFloat"),n.prototype.writeFloatLE=m(function(r,u,d){return Oe(this,r,u,!0,d)},"writeFloatLE"),n.prototype.writeFloatBE=m(function(r,u,d){return Oe(this,r,u,!1,d)},"writeFloatBE");function Y(r,u,d,R,M){return u=+u,d=d>>>0,M||Qe(r,u,d,8),t.write(r,u,d,R,52,8),d+8}m(Y,"writeDouble"),n.prototype.writeDoubleLE=m(function(r,u,d){return Y(this,r,u,!0,d)},"writeDoubleLE"),n.prototype.writeDoubleBE=m(function(r,u,d){return Y(this,r,u,!1,d)},"writeDoubleBE"),n.prototype.copy=m(function(r,u,d,R){if(!n.isBuffer(r))throw new TypeError("argument should be a Buffer");if(d||(d=0),!R&&R!==0&&(R=this.length),u>=r.length&&(u=r.length),u||(u=0),R>0&&R<d&&(R=d),R===d||r.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),r.length-u<R-d&&(R=r.length-u+d);let M=R-d;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,d,R):Uint8Array.prototype.set.call(r,this.subarray(d,R),u),M},"copy"),n.prototype.fill=m(function(r,u,d,R){if(typeof r=="string"){if(typeof u=="string"?(R=u,u=0,d=this.length):typeof d=="string"&&(R=d,d=this.length),R!==void 0&&typeof R!="string")throw new TypeError("encoding must be a string");if(typeof R=="string"&&!n.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(r.length===1){let D=r.charCodeAt(0);(R==="utf8"&&D<128||R==="latin1")&&(r=D)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(u<0||this.length<u||this.length<d)throw new RangeError("Out of range index");if(d<=u)return this;u=u>>>0,d=d===void 0?this.length:d>>>0,r||(r=0);let M;if(typeof r=="number")for(M=u;M<d;++M)this[M]=r;else{let D=n.isBuffer(r)?r:n.from(r,R),O=D.length;if(O===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(M=0;M<d-u;++M)this[M+u]=D[M%O]}return this},"fill");var re={};function ge(r,u,d){var R;re[r]=(R=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}},m(R,"NodeError"),R)}m(ge,"E"),ge("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(r,u){return`The "${r}" argument must be of type number. Received type ${typeof u}`},TypeError),ge("ERR_OUT_OF_RANGE",function(r,u,d){let R=`The value of "${r}" is out of range.`,M=d;return Number.isInteger(d)&&Math.abs(d)>2**32?M=oe(String(d)):typeof d=="bigint"&&(M=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(M=oe(M)),M+="n"),R+=` It must be ${u}. Received ${M}`,R},RangeError);function oe(r){let u="",d=r.length,R=r[0]==="-"?1:0;for(;d>=R+4;d-=3)u=`_${r.slice(d-3,d)}${u}`;return`${r.slice(0,d)}${u}`}m(oe,"addNumericalSeparator");function ie(r,u,d){_e(u,"offset"),(r[u]===void 0||r[u+d]===void 0)&&Ce(u,r.length-(d+1))}m(ie,"checkBounds");function se(r,u,d,R,M,D){if(r>d||r<u){let O=typeof u=="bigint"?"n":"",ae;throw D>3?u===0||u===BigInt(0)?ae=`>= 0${O} and < 2${O} ** ${(D+1)*8}${O}`:ae=`>= -(2${O} ** ${(D+1)*8-1}${O}) and < 2 ** ${(D+1)*8-1}${O}`:ae=`>= ${u}${O} and <= ${d}${O}`,new re.ERR_OUT_OF_RANGE("value",ae,r)}ie(R,M,D)}m(se,"checkIntBI");function _e(r,u){if(typeof r!="number")throw new re.ERR_INVALID_ARG_TYPE(u,"number",r)}m(_e,"validateNumber");function Ce(r,u,d){throw Math.floor(r)!==r?(_e(r,d),new re.ERR_OUT_OF_RANGE(d||"offset","an integer",r)):u<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE(d||"offset",`>= ${d?1:0} and <= ${u}`,r)}m(Ce,"boundsError");var dt=/[^+/0-9A-Za-z-_]/g;function nt(r){if(r=r.split("=")[0],r=r.trim().replace(dt,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}m(nt,"base64clean");function qe(r,u){u=u||1/0;let d,R=r.length,M=null,D=[];for(let O=0;O<R;++O){if(d=r.charCodeAt(O),d>55295&&d<57344){if(!M){if(d>56319){(u-=3)>-1&&D.push(239,191,189);continue}else if(O+1===R){(u-=3)>-1&&D.push(239,191,189);continue}M=d;continue}if(d<56320){(u-=3)>-1&&D.push(239,191,189),M=d;continue}d=(M-55296<<10|d-56320)+65536}else M&&(u-=3)>-1&&D.push(239,191,189);if(M=null,d<128){if((u-=1)<0)break;D.push(d)}else if(d<2048){if((u-=2)<0)break;D.push(d>>6|192,d&63|128)}else if(d<65536){if((u-=3)<0)break;D.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((u-=4)<0)break;D.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return D}m(qe,"utf8ToBytes");function Qr(r){let u=[];for(let d=0;d<r.length;++d)u.push(r.charCodeAt(d)&255);return u}m(Qr,"asciiToBytes");function qr(r,u){let d,R,M,D=[];for(let O=0;O<r.length&&!((u-=2)<0);++O)d=r.charCodeAt(O),R=d>>8,M=d%256,D.push(M),D.push(R);return D}m(qr,"utf16leToBytes");function Wt(r){return e.toByteArray(nt(r))}m(Wt,"base64ToBytes");function pt(r,u,d,R){let M;for(M=0;M<R&&!(M+d>=u.length||M>=r.length);++M)u[M+d]=r[M];return M}m(pt,"blitBuffer");function Te(r,u){return r instanceof u||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===u.name}m(Te,"isInstance");function Ct(r){return r!==r}m(Ct,"numberIsNaN");var vi=function(){let r="0123456789abcdef",u=new Array(256);for(let d=0;d<16;++d){let R=d*16;for(let M=0;M<16;++M)u[R+M]=r[d]+r[M]}return u}();function Fe(r){return typeof BigInt>"u"?$r:r}m(Fe,"defineBigIntMethod");function $r(){throw new Error("BigInt not supported")}m($r,"BufferBigIntNotDefined")}),Ft,Pr,W,J,H=Ae(()=>{Ft=globalThis,Pr=globalThis.setImmediate??(s=>setTimeout(s,0)),W=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:Wa().Buffer,J=globalThis.process??{},J.env??(J.env={});try{J.nextTick(()=>{})}catch{let s=Promise.resolve();J.nextTick=s.then.bind(s)}}),st=X((s,e)=>{H();var t=typeof Reflect=="object"?Reflect:null,o=t&&typeof t.apply=="function"?t.apply:m(function(w,T,A){return Function.prototype.apply.call(w,T,A)},"ReflectApply"),a;t&&typeof t.ownKeys=="function"?a=t.ownKeys:Object.getOwnPropertySymbols?a=m(function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))},"ReflectOwnKeys"):a=m(function(w){return Object.getOwnPropertyNames(w)},"ReflectOwnKeys");function i(w){console&&console.warn&&console.warn(w)}m(i,"ProcessEmitWarning");var l=Number.isNaN||m(function(w){return w!==w},"NumberIsNaN");function n(){n.init.call(this)}m(n,"EventEmitter"),e.exports=n,e.exports.once=C,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var f=10;function v(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}m(v,"checkListener"),Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:m(function(){return f},"get"),set:m(function(w){if(typeof w!="number"||w<0||l(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");f=w},"set")}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=m(function(w){if(typeof w!="number"||w<0||l(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this},"setMaxListeners");function g(w){return w._maxListeners===void 0?n.defaultMaxListeners:w._maxListeners}m(g,"_getMaxListeners"),n.prototype.getMaxListeners=m(function(){return g(this)},"getMaxListeners"),n.prototype.emit=m(function(w){for(var T=[],A=1;A<arguments.length;A++)T.push(arguments[A]);var I=w==="error",L=this._events;if(L!==void 0)I=I&&L.error===void 0;else if(!I)return!1;if(I){var j;if(T.length>0&&(j=T[0]),j instanceof Error)throw j;var U=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw U.context=j,U}var $=L[w];if($===void 0)return!1;if(typeof $=="function")o($,this,T);else for(var B=$.length,F=p($,B),A=0;A<B;++A)o(F[A],this,T);return!0},"emit");function b(w,T,A,I){var L,j,U;if(v(A),j=w._events,j===void 0?(j=w._events=Object.create(null),w._eventsCount=0):(j.newListener!==void 0&&(w.emit("newListener",T,A.listener?A.listener:A),j=w._events),U=j[T]),U===void 0)U=j[T]=A,++w._eventsCount;else if(typeof U=="function"?U=j[T]=I?[A,U]:[U,A]:I?U.unshift(A):U.push(A),L=g(w),L>0&&U.length>L&&!U.warned){U.warned=!0;var $=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");$.name="MaxListenersExceededWarning",$.emitter=w,$.type=T,$.count=U.length,i($)}return w}m(b,"_addListener"),n.prototype.addListener=m(function(w,T){return b(this,w,T,!1)},"addListener"),n.prototype.on=n.prototype.addListener,n.prototype.prependListener=m(function(w,T){return b(this,w,T,!0)},"prependListener");function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}m(y,"onceWrapper");function x(w,T,A){var I={fired:!1,wrapFn:void 0,target:w,type:T,listener:A},L=y.bind(I);return L.listener=A,I.wrapFn=L,L}m(x,"_onceWrap"),n.prototype.once=m(function(w,T){return v(T),this.on(w,x(this,w,T)),this},"once"),n.prototype.prependOnceListener=m(function(w,T){return v(T),this.prependListener(w,x(this,w,T)),this},"prependOnceListener"),n.prototype.removeListener=m(function(w,T){var A,I,L,j,U;if(v(T),I=this._events,I===void 0)return this;if(A=I[w],A===void 0)return this;if(A===T||A.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete I[w],I.removeListener&&this.emit("removeListener",w,A.listener||T));else if(typeof A!="function"){for(L=-1,j=A.length-1;j>=0;j--)if(A[j]===T||A[j].listener===T){U=A[j].listener,L=j;break}if(L<0)return this;L===0?A.shift():_(A,L),A.length===1&&(I[w]=A[0]),I.removeListener!==void 0&&this.emit("removeListener",w,U||T)}return this},"removeListener"),n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=m(function(w){var T,A,I;if(A=this._events,A===void 0)return this;if(A.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):A[w]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete A[w]),this;if(arguments.length===0){var L=Object.keys(A),j;for(I=0;I<L.length;++I)j=L[I],j!=="removeListener"&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=A[w],typeof T=="function")this.removeListener(w,T);else if(T!==void 0)for(I=T.length-1;I>=0;I--)this.removeListener(w,T[I]);return this},"removeAllListeners");function c(w,T,A){var I=w._events;if(I===void 0)return[];var L=I[T];return L===void 0?[]:typeof L=="function"?A?[L.listener||L]:[L]:A?E(L):p(L,L.length)}m(c,"_listeners"),n.prototype.listeners=m(function(w){return c(this,w,!0)},"listeners"),n.prototype.rawListeners=m(function(w){return c(this,w,!1)},"rawListeners"),n.listenerCount=function(w,T){return typeof w.listenerCount=="function"?w.listenerCount(T):h.call(w,T)},n.prototype.listenerCount=h;function h(w){var T=this._events;if(T!==void 0){var A=T[w];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}m(h,"listenerCount"),n.prototype.eventNames=m(function(){return this._eventsCount>0?a(this._events):[]},"eventNames");function p(w,T){for(var A=new Array(T),I=0;I<T;++I)A[I]=w[I];return A}m(p,"arrayClone");function _(w,T){for(;T+1<w.length;T++)w[T]=w[T+1];w.pop()}m(_,"spliceOne");function E(w){for(var T=new Array(w.length),A=0;A<T.length;++A)T[A]=w[A].listener||w[A];return T}m(E,"unwrapListeners");function C(w,T){return new Promise(function(A,I){function L(U){w.removeListener(T,j),I(U)}m(L,"errorListener");function j(){typeof w.removeListener=="function"&&w.removeListener("error",L),A([].slice.call(arguments))}m(j,"resolver"),P(w,T,j,{once:!0}),T!=="error"&&N(w,L,{once:!0})})}m(C,"once");function N(w,T,A){typeof w.on=="function"&&P(w,"error",T,A)}m(N,"addErrorHandlerIfEventEmitter");function P(w,T,A,I){if(typeof w.on=="function")I.once?w.once(T,A):w.on(T,A);else if(typeof w.addEventListener=="function")w.addEventListener(T,m(function L(j){I.once&&w.removeEventListener(T,L),A(j)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}m(P,"eventTargetAgnosticAddListener")}),An={};je(An,{Socket:()=>Ut,isIP:()=>Rn});function Rn(s){return 0}var ns,Xt,mt,Ut,Qt=Ae(()=>{H(),ns=rt(st(),1),m(Rn,"isIP"),Xt=/^[^.]+\./,mt=class G extends ns.EventEmitter{constructor(){super(...arguments),K(this,"opts",{}),K(this,"connecting",!1),K(this,"pending",!0),K(this,"writable",!0),K(this,"encrypted",!1),K(this,"authorized",!1),K(this,"destroyed",!1),K(this,"ws",null),K(this,"writeBuffer"),K(this,"tlsState",0),K(this,"tlsRead"),K(this,"tlsWrite")}static get poolQueryViaFetch(){return G.opts.poolQueryViaFetch??G.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){G.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return G.opts.fetchEndpoint??G.defaults.fetchEndpoint}static set fetchEndpoint(e){G.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return G.opts.fetchFunction??G.defaults.fetchFunction}static set fetchFunction(e){G.opts.fetchFunction=e}static get webSocketConstructor(){return G.opts.webSocketConstructor??G.defaults.webSocketConstructor}static set webSocketConstructor(e){G.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??G.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return G.opts.wsProxy??G.defaults.wsProxy}static set wsProxy(e){G.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??G.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return G.opts.coalesceWrites??G.defaults.coalesceWrites}static set coalesceWrites(e){G.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??G.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return G.opts.useSecureWebSocket??G.defaults.useSecureWebSocket}static set useSecureWebSocket(e){G.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??G.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return G.opts.forceDisablePgSSL??G.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){G.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??G.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return G.opts.disableSNI??G.defaults.disableSNI}static set disableSNI(e){G.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??G.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get pipelineConnect(){return G.opts.pipelineConnect??G.defaults.pipelineConnect}static set pipelineConnect(e){G.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??G.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return G.opts.subtls??G.defaults.subtls}static set subtls(e){G.opts.subtls=e}get subtls(){return this.opts.subtls??G.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return G.opts.pipelineTLS??G.defaults.pipelineTLS}static set pipelineTLS(e){G.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??G.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return G.opts.rootCerts??G.defaults.rootCerts}static set rootCerts(e){G.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??G.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,t){let o=this.wsProxy;if(o===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof o=="function"?o(e,t):`${o}?address=${e}:${t}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,t,o){this.connecting=!0,o&&this.once("connect",o);let a=m(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),i=m((n,f=!1)=>{n.binaryType="arraybuffer",n.addEventListener("error",v=>{this.emit("error",v),this.emit("close")}),n.addEventListener("message",v=>{if(this.tlsState===0){let g=W.from(v.data);this.emit("data",g)}}),n.addEventListener("close",()=>{this.emit("close")}),f?a():n.addEventListener("open",a)},"configureWebSocket"),l;try{l=this.wsProxyAddrForHost(t,typeof e=="string"?parseInt(e,10):e)}catch(n){this.emit("error",n),this.emit("close");return}try{let n=(this.useSecureWebSocket?"wss:":"ws:")+"//"+l;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(n),i(this.ws);else try{this.ws=new WebSocket(n),i(this.ws)}catch{this.ws=new __unstable_WebSocket(n),i(this.ws)}}catch(n){let f=(this.useSecureWebSocket?"https:":"http:")+"//"+l;fetch(f,{headers:{Upgrade:"websocket"}}).then(v=>{if(this.ws=v.webSocket,this.ws==null)throw n;this.ws.accept(),i(this.ws,!0)}).catch(v=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${v}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let t=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),o=new this.subtls.WebSocketReadQueue(this.ws),a=o.read.bind(o),i=this.rawWrite.bind(this),{read:l,write:n}=await this.subtls.startTls(e,t,a,i,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=l,this.tlsWrite=n,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let t=W.from(e);this.emit("data",t)}}}rawWrite(e){if(!this.coalesceWrites){this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let t=new Uint8Array(this.writeBuffer.length+e.length);t.set(this.writeBuffer),t.set(e,this.writeBuffer.length),this.writeBuffer=t}}write(e,t="utf8",o=a=>{}){return e.length===0?(o(),!0):(typeof e=="string"&&(e=W.from(e,t)),this.tlsState===0?(this.rawWrite(e),o()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,t,o)}):(this.tlsWrite(e),o()),!0)}end(e=W.alloc(0),t="utf8",o=()=>{}){return this.write(e,t,()=>{this.ws.close(),o()}),this}destroy(){return this.destroyed=!0,this.end()}},m(mt,"Socket"),K(mt,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:m((s,e,t)=>{let o;return t!=null&&t.jwtAuth?o=s.replace(Xt,"apiauth."):o=s.replace(Xt,"api."),"https://"+o+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:m(s=>s+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),K(mt,"opts",{}),Ut=mt}),Nn={};je(Nn,{parse:()=>Tr});function Tr(s,e=!1){let{protocol:t}=new URL(s),o="http:"+s.substring(t.length),{username:a,password:i,host:l,hostname:n,port:f,pathname:v,search:g,searchParams:b,hash:y}=new URL(o);i=decodeURIComponent(i),a=decodeURIComponent(a),v=decodeURIComponent(v);let x=a+":"+i,c=e?Object.fromEntries(b.entries()):g;return{href:s,protocol:t,auth:x,username:a,password:i,host:l,hostname:n,port:f,pathname:v,search:g,query:c,hash:y}}var Pn=Ae(()=>{H(),m(Tr,"parse")}),Tn=X(s=>{H(),s.parse=function(a,i){return new t(a,i).parse()};var e=class Mn{constructor(i,l){this.source=i,this.transform=l||o,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var i=this.source[this.position++];return i==="\\"?{value:this.source[this.position++],escaped:!0}:{value:i,escaped:!1}}record(i){this.recorded.push(i)}newEntry(i){var l;(this.recorded.length>0||i)&&(l=this.recorded.join(""),l==="NULL"&&!i&&(l=null),l!==null&&(l=this.transform(l)),this.entries.push(l),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var i=this.nextCharacter();if(i.value==="=")break}}parse(i){var l,n,f;for(this.consumeDimensions();!this.isEof();)if(l=this.nextCharacter(),l.value==="{"&&!f)this.dimension++,this.dimension>1&&(n=new Mn(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(l.value==="}"&&!f){if(this.dimension--,!this.dimension&&(this.newEntry(),i))return this.entries}else l.value==='"'&&!l.escaped?(f&&this.newEntry(!0),f=!f):l.value===","&&!f?this.newEntry():this.record(l.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};m(e,"ArrayParser");var t=e;function o(a){return a}m(o,"identity")}),Ln=X((s,e)=>{H();var t=Tn();e.exports={create:m(function(o,a){return{parse:m(function(){return t.parse(o,a)},"parse")}},"create")}}),za=X((s,e)=>{H();var t=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,o=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,a=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,i=/^-?infinity$/;e.exports=m(function(g){if(i.test(g))return Number(g.replace("i","I"));var b=t.exec(g);if(!b)return l(g)||null;var y=!!b[8],x=parseInt(b[1],10);y&&(x=f(x));var c=parseInt(b[2],10)-1,h=b[3],p=parseInt(b[4],10),_=parseInt(b[5],10),E=parseInt(b[6],10),C=b[7];C=C?1e3*parseFloat(C):0;var N,P=n(g);return P!=null?(N=new Date(Date.UTC(x,c,h,p,_,E,C)),v(x)&&N.setUTCFullYear(x),P!==0&&N.setTime(N.getTime()-P)):(N=new Date(x,c,h,p,_,E,C),v(x)&&N.setFullYear(x)),N},"parseDate");function l(g){var b=o.exec(g);if(b){var y=parseInt(b[1],10),x=!!b[4];x&&(y=f(y));var c=parseInt(b[2],10)-1,h=b[3],p=new Date(y,c,h);return v(y)&&p.setFullYear(y),p}}m(l,"getDate");function n(g){if(g.endsWith("+00"))return 0;var b=a.exec(g.split(" ")[1]);if(b){var y=b[1];if(y==="Z")return 0;var x=y==="-"?-1:1,c=parseInt(b[2],10)*3600+parseInt(b[3]||0,10)*60+parseInt(b[4]||0,10);return c*x*1e3}}m(n,"timeZoneOffset");function f(g){return-(g-1)}m(f,"bcYearToNegativeYear");function v(g){return g>=0&&g<100}m(v,"is0To99")}),Ka=X((s,e)=>{H(),e.exports=o;var t=Object.prototype.hasOwnProperty;function o(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var n in l)t.call(l,n)&&(a[n]=l[n])}return a}m(o,"extend")}),Ya=X((s,e)=>{H();var t=Ka();e.exports=o;function o(E){if(!(this instanceof o))return new o(E);t(this,_(E))}m(o,"PostgresInterval");var a=["seconds","minutes","hours","days","months","years"];o.prototype.toPostgres=function(){var E=a.filter(this.hasOwnProperty,this);return this.milliseconds&&E.indexOf("seconds")<0&&E.push("seconds"),E.length===0?"0":E.map(function(C){var N=this[C]||0;return C==="seconds"&&this.milliseconds&&(N=(N+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),N+" "+C},this).join(" ")};var i={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},l=["years","months","days"],n=["hours","minutes","seconds"];o.prototype.toISOString=o.prototype.toISO=function(){var E=l.map(N,this).join(""),C=n.map(N,this).join("");return"P"+E+"T"+C;function N(P){var w=this[P]||0;return P==="seconds"&&this.milliseconds&&(w=(w+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),w+i[P]}};var f="([+-]?\\d+)",v=f+"\\s+years?",g=f+"\\s+mons?",b=f+"\\s+days?",y="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",x=new RegExp([v,g,b,y].map(function(E){return"("+E+")?"}).join("\\s*")),c={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},h=["hours","minutes","seconds","milliseconds"];function p(E){var C=E+"000000".slice(E.length);return parseInt(C,10)/1e3}m(p,"parseMilliseconds");function _(E){if(!E)return{};var C=x.exec(E),N=C[8]==="-";return Object.keys(c).reduce(function(P,w){var T=c[w],A=C[T];return!A||(A=w==="milliseconds"?p(A):parseInt(A,10),!A)||(N&&~h.indexOf(w)&&(A*=-1),P[w]=A),P},{})}m(_,"parse")}),Za=X((s,e)=>{H(),e.exports=m(function(t){if(/^\\x/.test(t))return new W(t.substr(2),"hex");for(var o="",a=0;a<t.length;)if(t[a]!=="\\")o+=t[a],++a;else if(/[0-7]{3}/.test(t.substr(a+1,3)))o+=String.fromCharCode(parseInt(t.substr(a+1,3),8)),a+=4;else{for(var i=1;a+i<t.length&&t[a+i]==="\\";)i++;for(var l=0;l<Math.floor(i/2);++l)o+="\\";a+=Math.floor(i/2)*2}return new W(o,"binary")},"parseBytea")}),Ja=X((s,e)=>{H();var t=Tn(),o=Ln(),a=za(),i=Ya(),l=Za();function n(I){return m(function(L){return L===null?L:I(L)},"nullAllowed")}m(n,"allowNull");function f(I){return I===null?I:I==="TRUE"||I==="t"||I==="true"||I==="y"||I==="yes"||I==="on"||I==="1"}m(f,"parseBool");function v(I){return I?t.parse(I,f):null}m(v,"parseBoolArray");function g(I){return parseInt(I,10)}m(g,"parseBaseTenInt");function b(I){return I?t.parse(I,n(g)):null}m(b,"parseIntegerArray");function y(I){return I?t.parse(I,n(function(L){return N(L).trim()})):null}m(y,"parseBigIntegerArray");var x=m(function(I){if(!I)return null;var L=o.create(I,function(j){return j!==null&&(j=w(j)),j});return L.parse()},"parsePointArray"),c=m(function(I){if(!I)return null;var L=o.create(I,function(j){return j!==null&&(j=parseFloat(j)),j});return L.parse()},"parseFloatArray"),h=m(function(I){if(!I)return null;var L=o.create(I);return L.parse()},"parseStringArray"),p=m(function(I){if(!I)return null;var L=o.create(I,function(j){return j!==null&&(j=a(j)),j});return L.parse()},"parseDateArray"),_=m(function(I){if(!I)return null;var L=o.create(I,function(j){return j!==null&&(j=i(j)),j});return L.parse()},"parseIntervalArray"),E=m(function(I){return I?t.parse(I,n(l)):null},"parseByteAArray"),C=m(function(I){return parseInt(I,10)},"parseInteger"),N=m(function(I){var L=String(I);return/^\d+$/.test(L)?L:I},"parseBigInteger"),P=m(function(I){return I?t.parse(I,n(JSON.parse)):null},"parseJsonArray"),w=m(function(I){return I[0]!=="("?null:(I=I.substring(1,I.length-1).split(","),{x:parseFloat(I[0]),y:parseFloat(I[1])})},"parsePoint"),T=m(function(I){if(I[0]!=="<"&&I[1]!=="(")return null;for(var L="(",j="",U=!1,$=2;$<I.length-1;$++){if(U||(L+=I[$]),I[$]===")"){U=!0;continue}else if(!U)continue;I[$]!==","&&(j+=I[$])}var B=w(L);return B.radius=parseFloat(j),B},"parseCircle"),A=m(function(I){I(20,N),I(21,C),I(23,C),I(26,C),I(700,parseFloat),I(701,parseFloat),I(16,f),I(1082,a),I(1114,a),I(1184,a),I(600,w),I(651,h),I(718,T),I(1e3,v),I(1001,E),I(1005,b),I(1007,b),I(1028,b),I(1016,y),I(1017,x),I(1021,c),I(1022,c),I(1231,c),I(1014,h),I(1015,h),I(1008,h),I(1009,h),I(1040,h),I(1041,h),I(1115,p),I(1182,p),I(1185,p),I(1186,i),I(1187,_),I(17,l),I(114,JSON.parse.bind(JSON)),I(3802,JSON.parse.bind(JSON)),I(199,P),I(3807,P),I(3907,h),I(2951,h),I(791,h),I(1183,h),I(1270,h)},"init");e.exports={init:A}}),Xa=X((s,e)=>{H();var t=1e6;function o(a){var i=a.readInt32BE(0),l=a.readUInt32BE(4),n="";i<0&&(i=~i+(l===0),l=~l+1>>>0,n="-");var f="",v,g,b,y,x,c;{if(v=i%t,i=i/t>>>0,g=4294967296*v+l,l=g/t>>>0,b=""+(g-t*l),l===0&&i===0)return n+b+f;for(y="",x=6-b.length,c=0;c<x;c++)y+="0";f=y+b+f}{if(v=i%t,i=i/t>>>0,g=4294967296*v+l,l=g/t>>>0,b=""+(g-t*l),l===0&&i===0)return n+b+f;for(y="",x=6-b.length,c=0;c<x;c++)y+="0";f=y+b+f}{if(v=i%t,i=i/t>>>0,g=4294967296*v+l,l=g/t>>>0,b=""+(g-t*l),l===0&&i===0)return n+b+f;for(y="",x=6-b.length,c=0;c<x;c++)y+="0";f=y+b+f}return v=i%t,g=4294967296*v+l,b=""+g%t,n+b+f}m(o,"readInt8"),e.exports=o}),el=X((s,e)=>{H();var t=Xa(),o=m(function(h,p,_,E,C){_=_||0,E=E||!1,C=C||function(U,$,B){return U*Math.pow(2,B)+$};var N=_>>3,P=m(function(U){return E?~U&255:U},"inv"),w=255,T=8-_%8;p<T&&(w=255<<8-p&255,T=p),_&&(w=w>>_%8);var A=0;_%8+p>=8&&(A=C(0,P(h[N])&w,T));for(var I=p+_>>3,L=N+1;L<I;L++)A=C(A,P(h[L]),8);var j=(p+_)%8;return j>0&&(A=C(A,P(h[I])>>8-j,j)),A},"parseBits"),a=m(function(h,p,_){var E=Math.pow(2,_-1)-1,C=o(h,1),N=o(h,_,1);if(N===0)return 0;var P=1,w=m(function(A,I,L){A===0&&(A=1);for(var j=1;j<=L;j++)P/=2,(I&1<<L-j)>0&&(A+=P);return A},"parsePrecisionBits"),T=o(h,p,_+1,!1,w);return N==Math.pow(2,_+1)-1?T===0?C===0?1/0:-1/0:NaN:(C===0?1:-1)*Math.pow(2,N-E)*T},"parseFloatFromBits"),i=m(function(h){return o(h,1)==1?-1*(o(h,15,1,!0)+1):o(h,15,1)},"parseInt16"),l=m(function(h){return o(h,1)==1?-1*(o(h,31,1,!0)+1):o(h,31,1)},"parseInt32"),n=m(function(h){return a(h,23,8)},"parseFloat32"),f=m(function(h){return a(h,52,11)},"parseFloat64"),v=m(function(h){var p=o(h,16,32);if(p==49152)return NaN;for(var _=Math.pow(1e4,o(h,16,16)),E=0,C=[],N=o(h,16),P=0;P<N;P++)E+=o(h,16,64+16*P)*_,_/=1e4;var w=Math.pow(10,o(h,16,48));return(p===0?1:-1)*Math.round(E*w)/w},"parseNumeric"),g=m(function(h,p){var _=o(p,1),E=o(p,63,1),C=new Date((_===0?1:-1)*E/1e3+9466848e5);return h||C.setTime(C.getTime()+C.getTimezoneOffset()*6e4),C.usec=E%1e3,C.getMicroSeconds=function(){return this.usec},C.setMicroSeconds=function(N){this.usec=N},C.getUTCMicroSeconds=function(){return this.usec},C},"parseDate"),b=m(function(h){for(var p=o(h,32),_=o(h,32,32),E=o(h,32,64),C=96,N=[],P=0;P<p;P++)N[P]=o(h,32,C),C+=32,C+=32;var w=m(function(A){var I=o(h,32,C);if(C+=32,I==4294967295)return null;var L;if(A==23||A==20)return L=o(h,I*8,C),C+=I*8,L;if(A==25)return L=h.toString(this.encoding,C>>3,(C+=I<<3)>>3),L;console.log("ERROR: ElementType not implemented: "+A)},"parseElement"),T=m(function(A,I){var L=[],j;if(A.length>1){var U=A.shift();for(j=0;j<U;j++)L[j]=T(A,I);A.unshift(U)}else for(j=0;j<A[0];j++)L[j]=w(I);return L},"parse");return T(N,E)},"parseArray"),y=m(function(h){return h.toString("utf8")},"parseText"),x=m(function(h){return h===null?null:o(h,8)>0},"parseBool"),c=m(function(h){h(20,t),h(21,i),h(23,l),h(26,l),h(1700,v),h(700,n),h(701,f),h(16,x),h(1114,g.bind(null,!1)),h(1184,g.bind(null,!0)),h(1e3,b),h(1007,b),h(1016,b),h(1008,b),h(1009,b),h(25,y)},"init");e.exports={init:c}}),tl=X((s,e)=>{H(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),qt=X(s=>{H();var e=Ja(),t=el(),o=Ln(),a=tl();s.getTypeParser=n,s.setTypeParser=f,s.arrayParser=o,s.builtins=a;var i={text:{},binary:{}};function l(v){return String(v)}m(l,"noParse");function n(v,g){return g=g||"text",i[g]&&i[g][v]||l}m(n,"getTypeParser");function f(v,g,b){typeof g=="function"&&(b=g,g="text"),i[g][v]=b}m(f,"setTypeParser"),e.init(function(v,g){i.text[v]=g}),t.init(function(v,g){i.binary[v]=g})}),Mr=X((s,e)=>{H();var t=qt();function o(a){this._types=a||t,this.text={},this.binary={}}m(o,"TypeOverrides"),o.prototype.getOverrides=function(a){switch(a){case"text":return this.text;case"binary":return this.binary;default:return{}}},o.prototype.setTypeParser=function(a,i,l){typeof i=="function"&&(l=i,i="text"),this.getOverrides(i)[a]=l},o.prototype.getTypeParser=function(a,i){return i=i||"text",this.getOverrides(i)[a]||this._types.getTypeParser(a,i)},e.exports=o});function bt(s){let e=1779033703,t=3144134277,o=1013904242,a=2773480762,i=1359893119,l=2600822924,n=528734635,f=1541459225,v=0,g=0,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],y=m((E,C)=>E>>>C|E<<32-C,"rrot"),x=new Uint32Array(64),c=new Uint8Array(64),h=m(()=>{for(let L=0,j=0;L<16;L++,j+=4)x[L]=c[j]<<24|c[j+1]<<16|c[j+2]<<8|c[j+3];for(let L=16;L<64;L++){let j=y(x[L-15],7)^y(x[L-15],18)^x[L-15]>>>3,U=y(x[L-2],17)^y(x[L-2],19)^x[L-2]>>>10;x[L]=x[L-16]+j+x[L-7]+U|0}let E=e,C=t,N=o,P=a,w=i,T=l,A=n,I=f;for(let L=0;L<64;L++){let j=y(w,6)^y(w,11)^y(w,25),U=w&T^~w&A,$=I+j+U+b[L]+x[L]|0,B=y(E,2)^y(E,13)^y(E,22),F=E&C^E&N^C&N,q=B+F|0;I=A,A=T,T=w,w=P+$|0,P=N,N=C,C=E,E=$+q|0}e=e+E|0,t=t+C|0,o=o+N|0,a=a+P|0,i=i+w|0,l=l+T|0,n=n+A|0,f=f+I|0,g=0},"process"),p=m(E=>{typeof E=="string"&&(E=new TextEncoder().encode(E));for(let C=0;C<E.length;C++)c[g++]=E[C],g===64&&h();v+=E.length},"add"),_=m(()=>{if(c[g++]=128,g==64&&h(),g+8>64){for(;g<64;)c[g++]=0;h()}for(;g<58;)c[g++]=0;let E=v*8;c[g++]=E/1099511627776&255,c[g++]=E/4294967296&255,c[g++]=E>>>24,c[g++]=E>>>16&255,c[g++]=E>>>8&255,c[g++]=E&255,h();let C=new Uint8Array(32);return C[0]=e>>>24,C[1]=e>>>16&255,C[2]=e>>>8&255,C[3]=e&255,C[4]=t>>>24,C[5]=t>>>16&255,C[6]=t>>>8&255,C[7]=t&255,C[8]=o>>>24,C[9]=o>>>16&255,C[10]=o>>>8&255,C[11]=o&255,C[12]=a>>>24,C[13]=a>>>16&255,C[14]=a>>>8&255,C[15]=a&255,C[16]=i>>>24,C[17]=i>>>16&255,C[18]=i>>>8&255,C[19]=i&255,C[20]=l>>>24,C[21]=l>>>16&255,C[22]=l>>>8&255,C[23]=l&255,C[24]=n>>>24,C[25]=n>>>16&255,C[26]=n>>>8&255,C[27]=n&255,C[28]=f>>>24,C[29]=f>>>16&255,C[30]=f>>>8&255,C[31]=f&255,C},"digest");return s===void 0?{add:p,digest:_}:(p(s),_())}var rl=Ae(()=>{H(),m(bt,"sha256")}),Ue,wr,sl=Ae(()=>{H(),Ue=class Ne{constructor(){K(this,"_dataLength",0),K(this,"_bufferLength",0),K(this,"_state",new Int32Array(4)),K(this,"_buffer",new ArrayBuffer(68)),K(this,"_buffer8"),K(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,t=!1){return this.onePassHasher.start().appendByteArray(e).end(t)}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){let t=Ne.hexChars,o=Ne.hexOut,a,i,l,n;for(n=0;n<4;n+=1)for(i=n*8,a=e[n],l=0;l<8;l+=2)o[i+1+l]=t.charAt(a&15),a>>>=4,o[i+0+l]=t.charAt(a&15),a>>>=4;return o.join("")}static _md5cycle(e,t){let o=e[0],a=e[1],i=e[2],l=e[3];o+=(a&i|~a&l)+t[0]-680876936|0,o=(o<<7|o>>>25)+a|0,l+=(o&a|~o&i)+t[1]-389564586|0,l=(l<<12|l>>>20)+o|0,i+=(l&o|~l&a)+t[2]+606105819|0,i=(i<<17|i>>>15)+l|0,a+=(i&l|~i&o)+t[3]-1044525330|0,a=(a<<22|a>>>10)+i|0,o+=(a&i|~a&l)+t[4]-176418897|0,o=(o<<7|o>>>25)+a|0,l+=(o&a|~o&i)+t[5]+1200080426|0,l=(l<<12|l>>>20)+o|0,i+=(l&o|~l&a)+t[6]-1473231341|0,i=(i<<17|i>>>15)+l|0,a+=(i&l|~i&o)+t[7]-45705983|0,a=(a<<22|a>>>10)+i|0,o+=(a&i|~a&l)+t[8]+1770035416|0,o=(o<<7|o>>>25)+a|0,l+=(o&a|~o&i)+t[9]-1958414417|0,l=(l<<12|l>>>20)+o|0,i+=(l&o|~l&a)+t[10]-42063|0,i=(i<<17|i>>>15)+l|0,a+=(i&l|~i&o)+t[11]-1990404162|0,a=(a<<22|a>>>10)+i|0,o+=(a&i|~a&l)+t[12]+1804603682|0,o=(o<<7|o>>>25)+a|0,l+=(o&a|~o&i)+t[13]-40341101|0,l=(l<<12|l>>>20)+o|0,i+=(l&o|~l&a)+t[14]-1502002290|0,i=(i<<17|i>>>15)+l|0,a+=(i&l|~i&o)+t[15]+1236535329|0,a=(a<<22|a>>>10)+i|0,o+=(a&l|i&~l)+t[1]-165796510|0,o=(o<<5|o>>>27)+a|0,l+=(o&i|a&~i)+t[6]-1069501632|0,l=(l<<9|l>>>23)+o|0,i+=(l&a|o&~a)+t[11]+643717713|0,i=(i<<14|i>>>18)+l|0,a+=(i&o|l&~o)+t[0]-373897302|0,a=(a<<20|a>>>12)+i|0,o+=(a&l|i&~l)+t[5]-701558691|0,o=(o<<5|o>>>27)+a|0,l+=(o&i|a&~i)+t[10]+38016083|0,l=(l<<9|l>>>23)+o|0,i+=(l&a|o&~a)+t[15]-660478335|0,i=(i<<14|i>>>18)+l|0,a+=(i&o|l&~o)+t[4]-405537848|0,a=(a<<20|a>>>12)+i|0,o+=(a&l|i&~l)+t[9]+568446438|0,o=(o<<5|o>>>27)+a|0,l+=(o&i|a&~i)+t[14]-1019803690|0,l=(l<<9|l>>>23)+o|0,i+=(l&a|o&~a)+t[3]-187363961|0,i=(i<<14|i>>>18)+l|0,a+=(i&o|l&~o)+t[8]+1163531501|0,a=(a<<20|a>>>12)+i|0,o+=(a&l|i&~l)+t[13]-1444681467|0,o=(o<<5|o>>>27)+a|0,l+=(o&i|a&~i)+t[2]-51403784|0,l=(l<<9|l>>>23)+o|0,i+=(l&a|o&~a)+t[7]+1735328473|0,i=(i<<14|i>>>18)+l|0,a+=(i&o|l&~o)+t[12]-1926607734|0,a=(a<<20|a>>>12)+i|0,o+=(a^i^l)+t[5]-378558|0,o=(o<<4|o>>>28)+a|0,l+=(o^a^i)+t[8]-2022574463|0,l=(l<<11|l>>>21)+o|0,i+=(l^o^a)+t[11]+1839030562|0,i=(i<<16|i>>>16)+l|0,a+=(i^l^o)+t[14]-35309556|0,a=(a<<23|a>>>9)+i|0,o+=(a^i^l)+t[1]-1530992060|0,o=(o<<4|o>>>28)+a|0,l+=(o^a^i)+t[4]+1272893353|0,l=(l<<11|l>>>21)+o|0,i+=(l^o^a)+t[7]-155497632|0,i=(i<<16|i>>>16)+l|0,a+=(i^l^o)+t[10]-1094730640|0,a=(a<<23|a>>>9)+i|0,o+=(a^i^l)+t[13]+681279174|0,o=(o<<4|o>>>28)+a|0,l+=(o^a^i)+t[0]-358537222|0,l=(l<<11|l>>>21)+o|0,i+=(l^o^a)+t[3]-722521979|0,i=(i<<16|i>>>16)+l|0,a+=(i^l^o)+t[6]+76029189|0,a=(a<<23|a>>>9)+i|0,o+=(a^i^l)+t[9]-640364487|0,o=(o<<4|o>>>28)+a|0,l+=(o^a^i)+t[12]-421815835|0,l=(l<<11|l>>>21)+o|0,i+=(l^o^a)+t[15]+530742520|0,i=(i<<16|i>>>16)+l|0,a+=(i^l^o)+t[2]-995338651|0,a=(a<<23|a>>>9)+i|0,o+=(i^(a|~l))+t[0]-198630844|0,o=(o<<6|o>>>26)+a|0,l+=(a^(o|~i))+t[7]+1126891415|0,l=(l<<10|l>>>22)+o|0,i+=(o^(l|~a))+t[14]-1416354905|0,i=(i<<15|i>>>17)+l|0,a+=(l^(i|~o))+t[5]-57434055|0,a=(a<<21|a>>>11)+i|0,o+=(i^(a|~l))+t[12]+1700485571|0,o=(o<<6|o>>>26)+a|0,l+=(a^(o|~i))+t[3]-1894986606|0,l=(l<<10|l>>>22)+o|0,i+=(o^(l|~a))+t[10]-1051523|0,i=(i<<15|i>>>17)+l|0,a+=(l^(i|~o))+t[1]-2054922799|0,a=(a<<21|a>>>11)+i|0,o+=(i^(a|~l))+t[8]+1873313359|0,o=(o<<6|o>>>26)+a|0,l+=(a^(o|~i))+t[15]-30611744|0,l=(l<<10|l>>>22)+o|0,i+=(o^(l|~a))+t[6]-1560198380|0,i=(i<<15|i>>>17)+l|0,a+=(l^(i|~o))+t[13]+1309151649|0,a=(a<<21|a>>>11)+i|0,o+=(i^(a|~l))+t[4]-145523070|0,o=(o<<6|o>>>26)+a|0,l+=(a^(o|~i))+t[11]-1120210379|0,l=(l<<10|l>>>22)+o|0,i+=(o^(l|~a))+t[2]+718787259|0,i=(i<<15|i>>>17)+l|0,a+=(l^(i|~o))+t[9]-343485551|0,a=(a<<21|a>>>11)+i|0,e[0]=o+e[0]|0,e[1]=a+e[1]|0,e[2]=i+e[2]|0,e[3]=l+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(Ne.stateIdentity),this}appendStr(e){let t=this._buffer8,o=this._buffer32,a=this._bufferLength,i,l;for(l=0;l<e.length;l+=1){if(i=e.charCodeAt(l),i<128)t[a++]=i;else if(i<2048)t[a++]=(i>>>6)+192,t[a++]=i&63|128;else if(i<55296||i>56319)t[a++]=(i>>>12)+224,t[a++]=i>>>6&63|128,t[a++]=i&63|128;else{if(i=(i-55296)*1024+(e.charCodeAt(++l)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[a++]=(i>>>18)+240,t[a++]=i>>>12&63|128,t[a++]=i>>>6&63|128,t[a++]=i&63|128}a>=64&&(this._dataLength+=64,Ne._md5cycle(this._state,o),a-=64,o[0]=o[16])}return this._bufferLength=a,this}appendAsciiStr(e){let t=this._buffer8,o=this._buffer32,a=this._bufferLength,i,l=0;for(;;){for(i=Math.min(e.length-l,64-a);i--;)t[a++]=e.charCodeAt(l++);if(a<64)break;this._dataLength+=64,Ne._md5cycle(this._state,o),a=0}return this._bufferLength=a,this}appendByteArray(e){let t=this._buffer8,o=this._buffer32,a=this._bufferLength,i,l=0;for(;;){for(i=Math.min(e.length-l,64-a);i--;)t[a++]=e[l++];if(a<64)break;this._dataLength+=64,Ne._md5cycle(this._state,o),a=0}return this._bufferLength=a,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t=e.buffer,o=e.state,a=this._state,i;for(this._dataLength=e.length,this._bufferLength=e.buflen,a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],i=0;i<t.length;i+=1)this._buffer8[i]=t.charCodeAt(i)}end(e=!1){let t=this._bufferLength,o=this._buffer8,a=this._buffer32,i=(t>>2)+1;this._dataLength+=t;let l=this._dataLength*8;if(o[t]=128,o[t+1]=o[t+2]=o[t+3]=0,a.set(Ne.buffer32Identity.subarray(i),i),t>55&&(Ne._md5cycle(this._state,a),a.set(Ne.buffer32Identity)),l<=4294967295)a[14]=l;else{let n=l.toString(16).match(/(.*?)(.{0,8})$/);if(n===null)return;let f=parseInt(n[2],16),v=parseInt(n[1],16)||0;a[14]=f,a[15]=v}return Ne._md5cycle(this._state,a),e?this._state:Ne._hex(this._state)}},m(Ue,"Md5"),K(Ue,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),K(Ue,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),K(Ue,"hexChars","0123456789abcdef"),K(Ue,"hexOut",[]),K(Ue,"onePassHasher",new Ue),wr=Ue}),Lr={};je(Lr,{createHash:()=>kn,createHmac:()=>Bn,randomBytes:()=>jn});function jn(s){return crypto.getRandomValues(W.alloc(s))}function kn(s){if(s==="sha256")return{update:m(function(e){return{digest:m(function(){return W.from(bt(e))},"digest")}},"update")};if(s==="md5")return{update:m(function(e){return{digest:m(function(){return typeof e=="string"?wr.hashStr(e):wr.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${s}' not supported`)}function Bn(s,e){if(s!=="sha256")throw new Error(`Only sha256 is supported (requested: '${s}')`);return{update:m(function(t){return{digest:m(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof t=="string"&&(t=new TextEncoder().encode(t));let o=e.length;if(o>64)e=bt(e);else if(o<64){let f=new Uint8Array(64);f.set(e),e=f}let a=new Uint8Array(64),i=new Uint8Array(64);for(let f=0;f<64;f++)a[f]=54^e[f],i[f]=92^e[f];let l=new Uint8Array(t.length+64);l.set(a,0),l.set(t,64);let n=new Uint8Array(96);return n.set(i,0),n.set(bt(l),64),W.from(bt(n))},"digest")}},"update")}}var Dn=Ae(()=>{H(),rl(),sl(),m(jn,"randomBytes"),m(kn,"createHash"),m(Bn,"createHmac")}),$t=X((s,e)=>{H(),e.exports={host:"localhost",user:J.platform==="win32"?J.env.USERNAME:J.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var t=qt(),o=t.getTypeParser(20,"text"),a=t.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(i){t.setTypeParser(20,"text",i?t.getTypeParser(23,"text"):o),t.setTypeParser(1016,"text",i?t.getTypeParser(1007,"text"):a)})}),Vt=X((s,e)=>{H();var t=(Dn(),ve(Lr)),o=$t();function a(c){var h=c.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+h+'"'}m(a,"escapeElement");function i(c){for(var h="{",p=0;p<c.length;p++)p>0&&(h=h+","),c[p]===null||typeof c[p]>"u"?h=h+"NULL":Array.isArray(c[p])?h=h+i(c[p]):c[p]instanceof W?h+="\\\\x"+c[p].toString("hex"):h+=a(l(c[p]));return h=h+"}",h}m(i,"arrayString");var l=m(function(c,h){if(c==null)return null;if(c instanceof W)return c;if(ArrayBuffer.isView(c)){var p=W.from(c.buffer,c.byteOffset,c.byteLength);return p.length===c.byteLength?p:p.slice(c.byteOffset,c.byteOffset+c.byteLength)}return c instanceof Date?o.parseInputDatesAsUTC?g(c):v(c):Array.isArray(c)?i(c):typeof c=="object"?n(c,h):c.toString()},"prepareValue");function n(c,h){if(c&&typeof c.toPostgres=="function"){if(h=h||[],h.indexOf(c)!==-1)throw new Error('circular reference detected while preparing "'+c+'" for query');return h.push(c),l(c.toPostgres(l),h)}return JSON.stringify(c)}m(n,"prepareObject");function f(c,h){for(c=""+c;c.length<h;)c="0"+c;return c}m(f,"pad");function v(c){var h=-c.getTimezoneOffset(),p=c.getFullYear(),_=p<1;_&&(p=Math.abs(p)+1);var E=f(p,4)+"-"+f(c.getMonth()+1,2)+"-"+f(c.getDate(),2)+"T"+f(c.getHours(),2)+":"+f(c.getMinutes(),2)+":"+f(c.getSeconds(),2)+"."+f(c.getMilliseconds(),3);return h<0?(E+="-",h*=-1):E+="+",E+=f(Math.floor(h/60),2)+":"+f(h%60,2),_&&(E+=" BC"),E}m(v,"dateToString");function g(c){var h=c.getUTCFullYear(),p=h<1;p&&(h=Math.abs(h)+1);var _=f(h,4)+"-"+f(c.getUTCMonth()+1,2)+"-"+f(c.getUTCDate(),2)+"T"+f(c.getUTCHours(),2)+":"+f(c.getUTCMinutes(),2)+":"+f(c.getUTCSeconds(),2)+"."+f(c.getUTCMilliseconds(),3);return _+="+00:00",p&&(_+=" BC"),_}m(g,"dateToStringUTC");function b(c,h,p){return c=typeof c=="string"?{text:c}:c,h&&(typeof h=="function"?c.callback=h:c.values=h),p&&(c.callback=p),c}m(b,"normalizeQueryConfig");var y=m(function(c){return t.createHash("md5").update(c,"utf-8").digest("hex")},"md5"),x=m(function(c,h,p){var _=y(h+c),E=y(W.concat([W.from(_),p]));return"md5"+E},"postgresMd5PasswordHash");e.exports={prepareValue:m(function(c){return l(c)},"prepareValueWrapper"),normalizeQueryConfig:b,postgresMd5PasswordHash:x,md5:y}}),Et={};je(Et,{default:()=>On});var On,Ht=Ae(()=>{H(),On={}}),nl=X((s,e)=>{H();var t=(Dn(),ve(Lr));function o(h){if(h.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let p=t.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:p,response:"n,,n=*,r="+p,message:"SASLInitialResponse"}}m(o,"startSession");function a(h,p,_){if(h.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof p!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof _!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let E=v(_);if(E.nonce.startsWith(h.clientNonce)){if(E.nonce.length===h.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var C=W.from(E.salt,"base64"),N=c(p,C,E.iteration),P=x(N,"Client Key"),w=y(P),T="n=*,r="+h.clientNonce,A="r="+E.nonce+",s="+E.salt+",i="+E.iteration,I="c=biws,r="+E.nonce,L=T+","+A+","+I,j=x(w,L),U=b(P,j),$=U.toString("base64"),B=x(N,"Server Key"),F=x(B,L);h.message="SASLResponse",h.serverSignature=F.toString("base64"),h.response=I+",p="+$}m(a,"continueSession");function i(h,p){if(h.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof p!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:_}=g(p);if(_!==h.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}m(i,"finalizeSession");function l(h){if(typeof h!="string")throw new TypeError("SASL: text must be a string");return h.split("").map((p,_)=>h.charCodeAt(_)).every(p=>p>=33&&p<=43||p>=45&&p<=126)}m(l,"isPrintableChars");function n(h){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(h)}m(n,"isBase64");function f(h){if(typeof h!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(h.split(",").map(p=>{if(!/^.=/.test(p))throw new Error("SASL: Invalid attribute pair entry");let _=p[0],E=p.substring(2);return[_,E]}))}m(f,"parseAttributePairs");function v(h){let p=f(h),_=p.get("r");if(_){if(!l(_))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let E=p.get("s");if(E){if(!n(E))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let C=p.get("i");if(C){if(!/^[1-9][0-9]*$/.test(C))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let N=parseInt(C,10);return{nonce:_,salt:E,iteration:N}}m(v,"parseServerFirstMessage");function g(h){let p=f(h).get("v");if(p){if(!n(p))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:p}}m(g,"parseServerFinalMessage");function b(h,p){if(!W.isBuffer(h))throw new TypeError("first argument must be a Buffer");if(!W.isBuffer(p))throw new TypeError("second argument must be a Buffer");if(h.length!==p.length)throw new Error("Buffer lengths must match");if(h.length===0)throw new Error("Buffers cannot be empty");return W.from(h.map((_,E)=>h[E]^p[E]))}m(b,"xorBuffers");function y(h){return t.createHash("sha256").update(h).digest()}m(y,"sha256");function x(h,p){return t.createHmac("sha256",h).update(p).digest()}m(x,"hmacSha256");function c(h,p,_){for(var E=x(h,W.concat([p,W.from([0,0,0,1])])),C=E,N=0;N<_-1;N++)E=x(h,E),C=b(C,E);return C}m(c,"Hi"),e.exports={startSession:o,continueSession:a,finalizeSession:i}}),jr={};je(jr,{join:()=>Fn});function Fn(...s){return s.join("/")}var Un=Ae(()=>{H(),m(Fn,"join")}),kr={};je(kr,{stat:()=>Qn});function Qn(s,e){e(new Error("No filesystem"))}var qn=Ae(()=>{H(),m(Qn,"stat")}),Br={};je(Br,{default:()=>$n});var $n,Vn=Ae(()=>{H(),$n={}}),Hn={};je(Hn,{StringDecoder:()=>Gn});var er,Gn,il=Ae(()=>{H(),er=class{constructor(e){K(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},m(er,"StringDecoder"),Gn=er}),ol=X((s,e)=>{H();var{Transform:t}=(Vn(),ve(Br)),{StringDecoder:o}=(il(),ve(Hn)),a=Symbol("last"),i=Symbol("decoder");function l(b,y,x){let c;if(this.overflow){if(c=this[i].write(b).split(this.matcher),c.length===1)return x();c.shift(),this.overflow=!1}else this[a]+=this[i].write(b),c=this[a].split(this.matcher);this[a]=c.pop();for(let h=0;h<c.length;h++)try{f(this,this.mapper(c[h]))}catch(p){return x(p)}if(this.overflow=this[a].length>this.maxLength,this.overflow&&!this.skipOverflow){x(new Error("maximum buffer reached"));return}x()}m(l,"transform");function n(b){if(this[a]+=this[i].end(),this[a])try{f(this,this.mapper(this[a]))}catch(y){return b(y)}b()}m(n,"flush");function f(b,y){y!==void 0&&b.push(y)}m(f,"push");function v(b){return b}m(v,"noop");function g(b,y,x){switch(b=b||/\r?\n/,y=y||v,x=x||{},arguments.length){case 1:typeof b=="function"?(y=b,b=/\r?\n/):typeof b=="object"&&!(b instanceof RegExp)&&!b[Symbol.split]&&(x=b,b=/\r?\n/);break;case 2:typeof b=="function"?(x=y,y=b,b=/\r?\n/):typeof y=="object"&&(x=y,y=v)}x=Object.assign({},x),x.autoDestroy=!0,x.transform=l,x.flush=n,x.readableObjectMode=!0;let c=new t(x);return c[a]="",c[i]=new o("utf8"),c.matcher=b,c.mapper=y,c.maxLength=x.maxLength,c.skipOverflow=x.skipOverflow||!1,c.overflow=!1,c._destroy=function(h,p){this._writableState.errorEmitted=!1,p(h)},c}m(g,"split"),e.exports=g}),al=X((s,e)=>{H();var t=(Un(),ve(jr)),o=(Vn(),ve(Br)).Stream,a=ol(),i=(Ht(),ve(Et)),l=5432,n=J.platform==="win32",f=J.stderr,v=56,g=7,b=61440,y=32768;function x(P){return(P&b)==y}m(x,"isRegFile");var c=["host","port","database","user","password"],h=c.length,p=c[h-1];function _(){var P=f instanceof o&&f.writable===!0;if(P){var w=Array.prototype.slice.call(arguments).concat(`
`);f.write(i.format.apply(i,w))}}m(_,"warn"),Object.defineProperty(e.exports,"isWin",{get:m(function(){return n},"get"),set:m(function(P){n=P},"set")}),e.exports.warnTo=function(P){var w=f;return f=P,w},e.exports.getFileName=function(P){var w=P||J.env,T=w.PGPASSFILE||(n?t.join(w.APPDATA||"./","postgresql","pgpass.conf"):t.join(w.HOME||"./",".pgpass"));return T},e.exports.usePgPass=function(P,w){return Object.prototype.hasOwnProperty.call(J.env,"PGPASSWORD")?!1:n?!0:(w=w||"<unkn>",x(P.mode)?P.mode&(v|g)?(_('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',w),!1):!0:(_('WARNING: password file "%s" is not a plain file',w),!1))};var E=e.exports.match=function(P,w){return c.slice(0,-1).reduce(function(T,A,I){return I==1&&Number(P[A]||l)===Number(w[A])?T&&!0:T&&(w[A]==="*"||w[A]===P[A])},!0)};e.exports.getPassword=function(P,w,T){var A,I=w.pipe(a());function L($){var B=C($);B&&N(B)&&E(P,B)&&(A=B[p],I.end())}m(L,"onLine");var j=m(function(){w.destroy(),T(A)},"onEnd"),U=m(function($){w.destroy(),_("WARNING: error on reading file: %s",$),T(void 0)},"onErr");w.on("error",U),I.on("data",L).on("end",j).on("error",U)};var C=e.exports.parseLine=function(P){if(P.length<11||P.match(/^\s+#/))return null;for(var w="",T="",A=0,I=0,L=0,j={},U=!1,$=m(function(F,q,V){var z=P.substring(q,V);Object.hasOwnProperty.call(J.env,"PGPASS_NO_DEESCAPE")||(z=z.replace(/\\([:\\])/g,"$1")),j[c[F]]=z},"addToObj"),B=0;B<P.length-1;B+=1){if(w=P.charAt(B+1),T=P.charAt(B),U=A==h-1,U){$(A,I);break}B>=0&&w==":"&&T!=="\\"&&($(A,I,B+1),I=B+2,A+=1)}return j=Object.keys(j).length===h?j:null,j},N=e.exports.isValidEntry=function(P){for(var w={0:function(j){return j.length>0},1:function(j){return j==="*"?!0:(j=Number(j),isFinite(j)&&j>0&&j<9007199254740992&&Math.floor(j)===j)},2:function(j){return j.length>0},3:function(j){return j.length>0},4:function(j){return j.length>0}},T=0;T<c.length;T+=1){var A=w[T],I=P[c[T]]||"",L=A(I);if(!L)return!1}return!0}}),ll=X((s,e)=>{H(),Un(),ve(jr);var t=(qn(),ve(kr)),o=al();e.exports=function(a,i){var l=o.getFileName();t.stat(l,function(n,f){if(n||!o.usePgPass(f,l))return i(void 0);var v=t.createReadStream(l);o.getPassword(a,v,i)})},e.exports.warnTo=o.warnTo}),Wn={};je(Wn,{default:()=>zn});var zn,cl=Ae(()=>{H(),zn={}}),ul=X((s,e)=>{H();var t=(Pn(),ve(Nn)),o=(qn(),ve(kr));function a(i){if(i.charAt(0)==="/"){var n=i.split(" ");return{host:n[0],database:n[1]}}var l=t.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(i)?encodeURI(i).replace(/\%25(\d\d)/g,"%$1"):i,!0),n=l.query;for(var f in n)Array.isArray(n[f])&&(n[f]=n[f][n[f].length-1]);var v=(l.auth||":").split(":");if(n.user=v[0],n.password=v.splice(1).join(":"),n.port=l.port,l.protocol=="socket:")return n.host=decodeURI(l.pathname),n.database=l.query.db,n.client_encoding=l.query.encoding,n;n.host||(n.host=l.hostname);var g=l.pathname;if(!n.host&&g&&/^%2f/i.test(g)){var b=g.split("/");n.host=decodeURIComponent(b[0]),g=b.splice(1).join("/")}switch(g&&g.charAt(0)==="/"&&(g=g.slice(1)||null),n.database=g&&decodeURI(g),(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={}),n.sslcert&&(n.ssl.cert=o.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=o.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=o.readFileSync(n.sslrootcert).toString()),n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}m(a,"parse"),e.exports=a,a.parse=a}),Dr=X((s,e)=>{H();var t=(cl(),ve(Wn)),o=$t(),a=ul().parse,i=m(function(b,y,x){return x===void 0?x=J.env["PG"+b.toUpperCase()]:x===!1||(x=J.env[x]),y[b]||x||o[b]},"val"),l=m(function(){switch(J.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return o.ssl},"readSSLConfigFromEnvironment"),n=m(function(b){return"'"+(""+b).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),f=m(function(b,y,x){var c=y[x];c!=null&&b.push(x+"="+n(c))},"add"),v=class{constructor(y){y=typeof y=="string"?a(y):y||{},y.connectionString&&(y=Object.assign({},y,a(y.connectionString))),this.user=i("user",y),this.database=i("database",y),this.database===void 0&&(this.database=this.user),this.port=parseInt(i("port",y),10),this.host=i("host",y),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:i("password",y)}),this.binary=i("binary",y),this.options=i("options",y),this.ssl=typeof y.ssl>"u"?l():y.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=i("client_encoding",y),this.replication=i("replication",y),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=i("application_name",y,"PGAPPNAME"),this.fallback_application_name=i("fallback_application_name",y,!1),this.statement_timeout=i("statement_timeout",y,!1),this.lock_timeout=i("lock_timeout",y,!1),this.idle_in_transaction_session_timeout=i("idle_in_transaction_session_timeout",y,!1),this.query_timeout=i("query_timeout",y,!1),y.connectionTimeoutMillis===void 0?this.connect_timeout=J.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(y.connectionTimeoutMillis/1e3),y.keepAlive===!1?this.keepalives=0:y.keepAlive===!0&&(this.keepalives=1),typeof y.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(y.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(y){var x=[];f(x,this,"user"),f(x,this,"password"),f(x,this,"port"),f(x,this,"application_name"),f(x,this,"fallback_application_name"),f(x,this,"connect_timeout"),f(x,this,"options");var c=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(f(x,c,"sslmode"),f(x,c,"sslca"),f(x,c,"sslkey"),f(x,c,"sslcert"),f(x,c,"sslrootcert"),this.database&&x.push("dbname="+n(this.database)),this.replication&&x.push("replication="+n(this.replication)),this.host&&x.push("host="+n(this.host)),this.isDomainSocket)return y(null,x.join(" "));this.client_encoding&&x.push("client_encoding="+n(this.client_encoding)),t.lookup(this.host,function(h,p){return h?y(h,null):(x.push("hostaddr="+n(p)),y(null,x.join(" ")))})}};m(v,"ConnectionParameters");var g=v;e.exports=g}),hl=X((s,e)=>{H();var t=qt(),o=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,a=class{constructor(n,f){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=f,this.RowCtor=null,this.rowAsArray=n==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(n){var f;n.text?f=o.exec(n.text):f=o.exec(n.command),f&&(this.command=f[1],f[3]?(this.oid=parseInt(f[2],10),this.rowCount=parseInt(f[3],10)):f[2]&&(this.rowCount=parseInt(f[2],10)))}_parseRowAsArray(n){for(var f=new Array(n.length),v=0,g=n.length;v<g;v++){var b=n[v];b!==null?f[v]=this._parsers[v](b):f[v]=null}return f}parseRow(n){for(var f={},v=0,g=n.length;v<g;v++){var b=n[v],y=this.fields[v].name;b!==null?f[y]=this._parsers[v](b):f[y]=null}return f}addRow(n){this.rows.push(n)}addFields(n){this.fields=n,this.fields.length&&(this._parsers=new Array(n.length));for(var f=0;f<n.length;f++){var v=n[f];this._types?this._parsers[f]=this._types.getTypeParser(v.dataTypeID,v.format||"text"):this._parsers[f]=t.getTypeParser(v.dataTypeID,v.format||"text")}}};m(a,"Result");var i=a;e.exports=i}),fl=X((s,e)=>{H();var{EventEmitter:t}=st(),o=hl(),a=Vt(),i=class extends t{constructor(f,v,g){super(),f=a.normalizeQueryConfig(f,v,g),this.text=f.text,this.values=f.values,this.rows=f.rows,this.types=f.types,this.name=f.name,this.binary=f.binary,this.portal=f.portal||"",this.callback=f.callback,this._rowMode=f.rowMode,J.domain&&f.callback&&(this.callback=J.domain.bind(f.callback)),this._result=new o(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new o(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(f){this._checkForMultirow(),this._result.addFields(f.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(f){let v;if(!this._canceledDueToError){try{v=this._result.parseRow(f.fields)}catch(g){this._canceledDueToError=g;return}this.emit("row",v,this._result),this._accumulateRows&&this._result.addRow(v)}}handleCommandComplete(f,v){this._checkForMultirow(),this._result.addCommandComplete(f),this.rows&&v.sync()}handleEmptyQuery(f){this.rows&&f.sync()}handleError(f,v){if(this._canceledDueToError&&(f=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(f);this.emit("error",f)}handleReadyForQuery(f){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,f);if(this.callback)try{this.callback(null,this._results)}catch(v){J.nextTick(()=>{throw v})}this.emit("end",this._results)}submit(f){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let v=f.parsedStatements[this.name];return this.text&&v&&this.text!==v?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(f):f.query(this.text),null)}hasBeenParsed(f){return this.name&&f.parsedStatements[this.name]}handlePortalSuspended(f){this._getRows(f,this.rows)}_getRows(f,v){f.execute({portal:this.portal,rows:v}),v?f.flush():f.sync()}prepare(f){this.isPreparedStatement=!0,this.hasBeenParsed(f)||f.parse({text:this.text,name:this.name,types:this.types});try{f.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:a.prepareValue})}catch(v){this.handleError(v,f);return}f.describe({type:"P",name:this.portal||""}),this._getRows(f,this.rows)}handleCopyInResponse(f){f.sendCopyFail("No source stream defined")}handleCopyData(f,v){}};m(i,"Query");var l=i;e.exports=l}),Kn=X(s=>{H(),Object.defineProperty(s,"__esModule",{value:!0}),s.NoticeMessage=s.DataRowMessage=s.CommandCompleteMessage=s.ReadyForQueryMessage=s.NotificationResponseMessage=s.BackendKeyDataMessage=s.AuthenticationMD5Password=s.ParameterStatusMessage=s.ParameterDescriptionMessage=s.RowDescriptionMessage=s.Field=s.CopyResponse=s.CopyDataMessage=s.DatabaseError=s.copyDone=s.emptyQuery=s.replicationStart=s.portalSuspended=s.noData=s.closeComplete=s.bindComplete=s.parseComplete=void 0,s.parseComplete={name:"parseComplete",length:5},s.bindComplete={name:"bindComplete",length:5},s.closeComplete={name:"closeComplete",length:5},s.noData={name:"noData",length:5},s.portalSuspended={name:"portalSuspended",length:5},s.replicationStart={name:"replicationStart",length:4},s.emptyQuery={name:"emptyQuery",length:4},s.copyDone={name:"copyDone",length:4};var e=class extends Error{constructor(B,F,q){super(B),this.length=F,this.name=q}};m(e,"DatabaseError");var t=e;s.DatabaseError=t;var o=class{constructor(B,F){this.length=B,this.chunk=F,this.name="copyData"}};m(o,"CopyDataMessage");var a=o;s.CopyDataMessage=a;var i=class{constructor(B,F,q,V){this.length=B,this.name=F,this.binary=q,this.columnTypes=new Array(V)}};m(i,"CopyResponse");var l=i;s.CopyResponse=l;var n=class{constructor(B,F,q,V,z,Z,we){this.name=B,this.tableID=F,this.columnID=q,this.dataTypeID=V,this.dataTypeSize=z,this.dataTypeModifier=Z,this.format=we}};m(n,"Field");var f=n;s.Field=f;var v=class{constructor(B,F){this.length=B,this.fieldCount=F,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};m(v,"RowDescriptionMessage");var g=v;s.RowDescriptionMessage=g;var b=class{constructor(B,F){this.length=B,this.parameterCount=F,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};m(b,"ParameterDescriptionMessage");var y=b;s.ParameterDescriptionMessage=y;var x=class{constructor(B,F,q){this.length=B,this.parameterName=F,this.parameterValue=q,this.name="parameterStatus"}};m(x,"ParameterStatusMessage");var c=x;s.ParameterStatusMessage=c;var h=class{constructor(B,F){this.length=B,this.salt=F,this.name="authenticationMD5Password"}};m(h,"AuthenticationMD5Password");var p=h;s.AuthenticationMD5Password=p;var _=class{constructor(B,F,q){this.length=B,this.processID=F,this.secretKey=q,this.name="backendKeyData"}};m(_,"BackendKeyDataMessage");var E=_;s.BackendKeyDataMessage=E;var C=class{constructor(B,F,q,V){this.length=B,this.processId=F,this.channel=q,this.payload=V,this.name="notification"}};m(C,"NotificationResponseMessage");var N=C;s.NotificationResponseMessage=N;var P=class{constructor(B,F){this.length=B,this.status=F,this.name="readyForQuery"}};m(P,"ReadyForQueryMessage");var w=P;s.ReadyForQueryMessage=w;var T=class{constructor(B,F){this.length=B,this.text=F,this.name="commandComplete"}};m(T,"CommandCompleteMessage");var A=T;s.CommandCompleteMessage=A;var I=class{constructor(B,F){this.length=B,this.fields=F,this.name="dataRow",this.fieldCount=F.length}};m(I,"DataRowMessage");var L=I;s.DataRowMessage=L;var j=class{constructor(B,F){this.length=B,this.message=F,this.name="notice"}};m(j,"NoticeMessage");var U=j;s.NoticeMessage=U}),dl=X(s=>{H(),Object.defineProperty(s,"__esModule",{value:!0}),s.Writer=void 0;var e=class{constructor(a=256){this.size=a,this.offset=5,this.headerPosition=0,this.buffer=W.allocUnsafe(a)}ensure(a){var i=this.buffer.length-this.offset;if(i<a){var l=this.buffer,n=l.length+(l.length>>1)+a;this.buffer=W.allocUnsafe(n),l.copy(this.buffer)}}addInt32(a){return this.ensure(4),this.buffer[this.offset++]=a>>>24&255,this.buffer[this.offset++]=a>>>16&255,this.buffer[this.offset++]=a>>>8&255,this.buffer[this.offset++]=a>>>0&255,this}addInt16(a){return this.ensure(2),this.buffer[this.offset++]=a>>>8&255,this.buffer[this.offset++]=a>>>0&255,this}addCString(a){if(!a)this.ensure(1);else{var i=W.byteLength(a);this.ensure(i+1),this.buffer.write(a,this.offset,"utf-8"),this.offset+=i}return this.buffer[this.offset++]=0,this}addString(a=""){var i=W.byteLength(a);return this.ensure(i),this.buffer.write(a,this.offset),this.offset+=i,this}add(a){return this.ensure(a.length),a.copy(this.buffer,this.offset),this.offset+=a.length,this}join(a){if(a){this.buffer[this.headerPosition]=a;let i=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(i,this.headerPosition+1)}return this.buffer.slice(a?0:5,this.offset)}flush(a){var i=this.join(a);return this.offset=5,this.headerPosition=0,this.buffer=W.allocUnsafe(this.size),i}};m(e,"Writer");var t=e;s.Writer=t}),pl=X(s=>{H(),Object.defineProperty(s,"__esModule",{value:!0}),s.serialize=void 0;var e=dl(),t=new e.Writer,o=m(B=>{t.addInt16(3).addInt16(0);for(let V of Object.keys(B))t.addCString(V).addCString(B[V]);t.addCString("client_encoding").addCString("UTF8");var F=t.addCString("").flush(),q=F.length+4;return new e.Writer().addInt32(q).add(F).flush()},"startup"),a=m(()=>{let B=W.allocUnsafe(8);return B.writeInt32BE(8,0),B.writeInt32BE(80877103,4),B},"requestSsl"),i=m(B=>t.addCString(B).flush(112),"password"),l=m(function(B,F){return t.addCString(B).addInt32(W.byteLength(F)).addString(F),t.flush(112)},"sendSASLInitialResponseMessage"),n=m(function(B){return t.addString(B).flush(112)},"sendSCRAMClientFinalMessage"),f=m(B=>t.addCString(B).flush(81),"query"),v=[],g=m(B=>{let F=B.name||"";F.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",F,F.length),console.error("This can cause conflicts and silent errors executing queries"));let q=B.types||v;for(var V=q.length,z=t.addCString(F).addCString(B.text).addInt16(V),Z=0;Z<V;Z++)z.addInt32(q[Z]);return t.flush(80)},"parse"),b=new e.Writer,y=m(function(B,F){for(let q=0;q<B.length;q++){let V=F?F(B[q],q):B[q];V==null?(t.addInt16(0),b.addInt32(-1)):V instanceof W?(t.addInt16(1),b.addInt32(V.length),b.add(V)):(t.addInt16(0),b.addInt32(W.byteLength(V)),b.addString(V))}},"writeValues"),x=m((B={})=>{let F=B.portal||"",q=B.statement||"",V=B.binary||!1,z=B.values||v,Z=z.length;return t.addCString(F).addCString(q),t.addInt16(Z),y(z,B.valueMapper),t.addInt16(Z),t.add(b.flush()),t.addInt16(V?1:0),t.flush(66)},"bind"),c=W.from([69,0,0,0,9,0,0,0,0,0]),h=m(B=>{if(!B||!B.portal&&!B.rows)return c;let F=B.portal||"",q=B.rows||0,V=W.byteLength(F),z=4+V+1+4,Z=W.allocUnsafe(1+z);return Z[0]=69,Z.writeInt32BE(z,1),Z.write(F,5,"utf-8"),Z[V+5]=0,Z.writeUInt32BE(q,Z.length-4),Z},"execute"),p=m((B,F)=>{let q=W.allocUnsafe(16);return q.writeInt32BE(16,0),q.writeInt16BE(1234,4),q.writeInt16BE(5678,6),q.writeInt32BE(B,8),q.writeInt32BE(F,12),q},"cancel"),_=m((B,F)=>{let q=4+W.byteLength(F)+1,V=W.allocUnsafe(1+q);return V[0]=B,V.writeInt32BE(q,1),V.write(F,5,"utf-8"),V[q]=0,V},"cstringMessage"),E=t.addCString("P").flush(68),C=t.addCString("S").flush(68),N=m(B=>B.name?_(68,`${B.type}${B.name||""}`):B.type==="P"?E:C,"describe"),P=m(B=>{let F=`${B.type}${B.name||""}`;return _(67,F)},"close"),w=m(B=>t.add(B).flush(100),"copyData"),T=m(B=>_(102,B),"copyFail"),A=m(B=>W.from([B,0,0,0,4]),"codeOnlyBuffer"),I=A(72),L=A(83),j=A(88),U=A(99),$={startup:o,password:i,requestSsl:a,sendSASLInitialResponseMessage:l,sendSCRAMClientFinalMessage:n,query:f,parse:g,bind:x,execute:h,describe:N,close:P,flush:m(()=>I,"flush"),sync:m(()=>L,"sync"),end:m(()=>j,"end"),copyData:w,copyDone:m(()=>U,"copyDone"),copyFail:T,cancel:p};s.serialize=$}),ml=X(s=>{H(),Object.defineProperty(s,"__esModule",{value:!0}),s.BufferReader=void 0;var e=W.allocUnsafe(0),t=class{constructor(i=0){this.offset=i,this.buffer=e,this.encoding="utf-8"}setBuffer(i,l){this.offset=i,this.buffer=l}int16(){let i=this.buffer.readInt16BE(this.offset);return this.offset+=2,i}byte(){let i=this.buffer[this.offset];return this.offset++,i}int32(){let i=this.buffer.readInt32BE(this.offset);return this.offset+=4,i}uint32(){let i=this.buffer.readUInt32BE(this.offset);return this.offset+=4,i}string(i){let l=this.buffer.toString(this.encoding,this.offset,this.offset+i);return this.offset+=i,l}cstring(){let i=this.offset,l=i;for(;this.buffer[l++]!==0;);return this.offset=l,this.buffer.toString(this.encoding,i,l-1)}bytes(i){let l=this.buffer.slice(this.offset,this.offset+i);return this.offset+=i,l}};m(t,"BufferReader");var o=t;s.BufferReader=o}),gl=X(s=>{H(),Object.defineProperty(s,"__esModule",{value:!0}),s.Parser=void 0;var e=Kn(),t=ml(),o=1,a=4,i=o+a,l=W.allocUnsafe(0),n=class{constructor(g){if(this.buffer=l,this.bufferLength=0,this.bufferOffset=0,this.reader=new t.BufferReader,(g==null?void 0:g.mode)==="binary")throw new Error("Binary mode not supported yet");this.mode=(g==null?void 0:g.mode)||"text"}parse(g,b){this.mergeBuffer(g);let y=this.bufferOffset+this.bufferLength,x=this.bufferOffset;for(;x+i<=y;){let c=this.buffer[x],h=this.buffer.readUInt32BE(x+o),p=o+h;if(p+x<=y){let _=this.handlePacket(x+i,c,h,this.buffer);b(_),x+=p}else break}x===y?(this.buffer=l,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=y-x,this.bufferOffset=x)}mergeBuffer(g){if(this.bufferLength>0){let b=this.bufferLength+g.byteLength;if(b+this.bufferOffset>this.buffer.byteLength){let y;if(b<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)y=this.buffer;else{let x=this.buffer.byteLength*2;for(;b>=x;)x*=2;y=W.allocUnsafe(x)}this.buffer.copy(y,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=y,this.bufferOffset=0}g.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=b}else this.buffer=g,this.bufferOffset=0,this.bufferLength=g.byteLength}handlePacket(g,b,y,x){switch(b){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(g,y,x);case 67:return this.parseCommandCompleteMessage(g,y,x);case 90:return this.parseReadyForQueryMessage(g,y,x);case 65:return this.parseNotificationMessage(g,y,x);case 82:return this.parseAuthenticationResponse(g,y,x);case 83:return this.parseParameterStatusMessage(g,y,x);case 75:return this.parseBackendKeyData(g,y,x);case 69:return this.parseErrorMessage(g,y,x,"error");case 78:return this.parseErrorMessage(g,y,x,"notice");case 84:return this.parseRowDescriptionMessage(g,y,x);case 116:return this.parseParameterDescriptionMessage(g,y,x);case 71:return this.parseCopyInMessage(g,y,x);case 72:return this.parseCopyOutMessage(g,y,x);case 100:return this.parseCopyData(g,y,x);default:return new e.DatabaseError("received invalid response: "+b.toString(16),y,"error")}}parseReadyForQueryMessage(g,b,y){this.reader.setBuffer(g,y);let x=this.reader.string(1);return new e.ReadyForQueryMessage(b,x)}parseCommandCompleteMessage(g,b,y){this.reader.setBuffer(g,y);let x=this.reader.cstring();return new e.CommandCompleteMessage(b,x)}parseCopyData(g,b,y){let x=y.slice(g,g+(b-4));return new e.CopyDataMessage(b,x)}parseCopyInMessage(g,b,y){return this.parseCopyMessage(g,b,y,"copyInResponse")}parseCopyOutMessage(g,b,y){return this.parseCopyMessage(g,b,y,"copyOutResponse")}parseCopyMessage(g,b,y,x){this.reader.setBuffer(g,y);let c=this.reader.byte()!==0,h=this.reader.int16(),p=new e.CopyResponse(b,x,c,h);for(let _=0;_<h;_++)p.columnTypes[_]=this.reader.int16();return p}parseNotificationMessage(g,b,y){this.reader.setBuffer(g,y);let x=this.reader.int32(),c=this.reader.cstring(),h=this.reader.cstring();return new e.NotificationResponseMessage(b,x,c,h)}parseRowDescriptionMessage(g,b,y){this.reader.setBuffer(g,y);let x=this.reader.int16(),c=new e.RowDescriptionMessage(b,x);for(let h=0;h<x;h++)c.fields[h]=this.parseField();return c}parseField(){let g=this.reader.cstring(),b=this.reader.uint32(),y=this.reader.int16(),x=this.reader.uint32(),c=this.reader.int16(),h=this.reader.int32(),p=this.reader.int16()===0?"text":"binary";return new e.Field(g,b,y,x,c,h,p)}parseParameterDescriptionMessage(g,b,y){this.reader.setBuffer(g,y);let x=this.reader.int16(),c=new e.ParameterDescriptionMessage(b,x);for(let h=0;h<x;h++)c.dataTypeIDs[h]=this.reader.int32();return c}parseDataRowMessage(g,b,y){this.reader.setBuffer(g,y);let x=this.reader.int16(),c=new Array(x);for(let h=0;h<x;h++){let p=this.reader.int32();c[h]=p===-1?null:this.reader.string(p)}return new e.DataRowMessage(b,c)}parseParameterStatusMessage(g,b,y){this.reader.setBuffer(g,y);let x=this.reader.cstring(),c=this.reader.cstring();return new e.ParameterStatusMessage(b,x,c)}parseBackendKeyData(g,b,y){this.reader.setBuffer(g,y);let x=this.reader.int32(),c=this.reader.int32();return new e.BackendKeyDataMessage(b,x,c)}parseAuthenticationResponse(g,b,y){this.reader.setBuffer(g,y);let x=this.reader.int32(),c={name:"authenticationOk",length:b};switch(x){case 0:break;case 3:c.length===8&&(c.name="authenticationCleartextPassword");break;case 5:if(c.length===12){c.name="authenticationMD5Password";let p=this.reader.bytes(4);return new e.AuthenticationMD5Password(b,p)}break;case 10:c.name="authenticationSASL",c.mechanisms=[];let h;do h=this.reader.cstring(),h&&c.mechanisms.push(h);while(h);break;case 11:c.name="authenticationSASLContinue",c.data=this.reader.string(b-8);break;case 12:c.name="authenticationSASLFinal",c.data=this.reader.string(b-8);break;default:throw new Error("Unknown authenticationOk message type "+x)}return c}parseErrorMessage(g,b,y,x){this.reader.setBuffer(g,y);let c={},h=this.reader.string(1);for(;h!=="\0";)c[h]=this.reader.cstring(),h=this.reader.string(1);let p=c.M,_=x==="notice"?new e.NoticeMessage(b,p):new e.DatabaseError(p,b,x);return _.severity=c.S,_.code=c.C,_.detail=c.D,_.hint=c.H,_.position=c.P,_.internalPosition=c.p,_.internalQuery=c.q,_.where=c.W,_.schema=c.s,_.table=c.t,_.column=c.c,_.dataType=c.d,_.constraint=c.n,_.file=c.F,_.line=c.L,_.routine=c.R,_}};m(n,"Parser");var f=n;s.Parser=f}),Yn=X(s=>{H(),Object.defineProperty(s,"__esModule",{value:!0}),s.DatabaseError=s.serialize=s.parse=void 0;var e=Kn();Object.defineProperty(s,"DatabaseError",{enumerable:!0,get:m(function(){return e.DatabaseError},"get")});var t=pl();Object.defineProperty(s,"serialize",{enumerable:!0,get:m(function(){return t.serialize},"get")});var o=gl();function a(i,l){let n=new o.Parser;return i.on("data",f=>n.parse(f,l)),new Promise(f=>i.on("end",()=>f()))}m(a,"parse"),s.parse=a}),Zn={};je(Zn,{connect:()=>Jn});function Jn({socket:s,servername:e}){return s.startTls(e),s}var yl=Ae(()=>{H(),m(Jn,"connect")}),Xn=X((s,e)=>{H();var t=(Qt(),ve(An)),o=st().EventEmitter,{parse:a,serialize:i}=Yn(),l=i.flush(),n=i.sync(),f=i.end(),v=class extends o{constructor(y){super(),y=y||{},this.stream=y.stream||new t.Socket,this._keepAlive=y.keepAlive,this._keepAliveInitialDelayMillis=y.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=y.ssl||!1,this._ending=!1,this._emitMessage=!1;var x=this;this.on("newListener",function(c){c==="message"&&(x._emitMessage=!0)})}connect(y,x){var c=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(y,x),this.stream.once("connect",function(){c._keepAlive&&c.stream.setKeepAlive(!0,c._keepAliveInitialDelayMillis),c.emit("connect")});let h=m(function(p){c._ending&&(p.code==="ECONNRESET"||p.code==="EPIPE")||c.emit("error",p)},"reportStreamError");if(this.stream.on("error",h),this.stream.on("close",function(){c.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(p){var _=p.toString("utf8");switch(_){case"S":break;case"N":return c.stream.end(),c.emit("error",new Error("The server does not support SSL connections"));default:return c.stream.end(),c.emit("error",new Error("There was an error establishing an SSL connection"))}var E=(yl(),ve(Zn));let C={socket:c.stream};c.ssl!==!0&&(Object.assign(C,c.ssl),"key"in c.ssl&&(C.key=c.ssl.key)),t.isIP(x)===0&&(C.servername=x);try{c.stream=E.connect(C)}catch(N){return c.emit("error",N)}c.attachListeners(c.stream),c.stream.on("error",h),c.emit("sslconnect")})}attachListeners(y){y.on("end",()=>{this.emit("end")}),a(y,x=>{var c=x.name==="error"?"errorMessage":x.name;this._emitMessage&&this.emit("message",x),this.emit(c,x)})}requestSsl(){this.stream.write(i.requestSsl())}startup(y){this.stream.write(i.startup(y))}cancel(y,x){this._send(i.cancel(y,x))}password(y){this._send(i.password(y))}sendSASLInitialResponseMessage(y,x){this._send(i.sendSASLInitialResponseMessage(y,x))}sendSCRAMClientFinalMessage(y){this._send(i.sendSCRAMClientFinalMessage(y))}_send(y){return this.stream.writable?this.stream.write(y):!1}query(y){this._send(i.query(y))}parse(y){this._send(i.parse(y))}bind(y){this._send(i.bind(y))}execute(y){this._send(i.execute(y))}flush(){this.stream.writable&&this.stream.write(l)}sync(){this._ending=!0,this._send(l),this._send(n)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(f,()=>{this.stream.end()})}close(y){this._send(i.close(y))}describe(y){this._send(i.describe(y))}sendCopyFromChunk(y){this._send(i.copyData(y))}endCopyFrom(){this._send(i.copyDone())}sendCopyFail(y){this._send(i.copyFail(y))}};m(v,"Connection");var g=v;e.exports=g}),vl=X((s,e)=>{H();var t=st().EventEmitter;Ht(),ve(Et);var o=Vt(),a=nl(),i=ll(),l=Mr(),n=Dr(),f=fl(),v=$t(),g=Xn(),b=class extends t{constructor(c){super(),this.connectionParameters=new n(c),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var h=c||{};this._Promise=h.Promise||Ft.Promise,this._types=new l(h.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=h.connection||new g({stream:h.stream,ssl:this.connectionParameters.ssl,keepAlive:h.keepAlive||!1,keepAliveInitialDelayMillis:h.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=h.binary||v.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=h.connectionTimeoutMillis||0}_errorAllQueries(c){let h=m(p=>{J.nextTick(()=>{p.handleError(c,this.connection)})},"enqueueError");this.activeQuery&&(h(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(h),this.queryQueue.length=0}_connect(c){var h=this,p=this.connection;if(this._connectionCallback=c,this._connecting||this._connected){let _=new Error("Client has already been connected. You cannot reuse a client.");J.nextTick(()=>{c(_)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{p._ending=!0,p.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?p.connect(this.host+"/.s.PGSQL."+this.port):p.connect(this.port,this.host),p.on("connect",function(){h.ssl?p.requestSsl():p.startup(h.getStartupConf())}),p.on("sslconnect",function(){p.startup(h.getStartupConf())}),this._attachListeners(p),p.once("end",()=>{let _=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(_),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(_):this._handleErrorEvent(_):this._connectionError||this._handleErrorEvent(_)),J.nextTick(()=>{this.emit("end")})})}connect(c){if(c){this._connect(c);return}return new this._Promise((h,p)=>{this._connect(_=>{_?p(_):h()})})}_attachListeners(c){c.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),c.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),c.on("authenticationSASL",this._handleAuthSASL.bind(this)),c.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),c.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),c.on("backendKeyData",this._handleBackendKeyData.bind(this)),c.on("error",this._handleErrorEvent.bind(this)),c.on("errorMessage",this._handleErrorMessage.bind(this)),c.on("readyForQuery",this._handleReadyForQuery.bind(this)),c.on("notice",this._handleNotice.bind(this)),c.on("rowDescription",this._handleRowDescription.bind(this)),c.on("dataRow",this._handleDataRow.bind(this)),c.on("portalSuspended",this._handlePortalSuspended.bind(this)),c.on("emptyQuery",this._handleEmptyQuery.bind(this)),c.on("commandComplete",this._handleCommandComplete.bind(this)),c.on("parseComplete",this._handleParseComplete.bind(this)),c.on("copyInResponse",this._handleCopyInResponse.bind(this)),c.on("copyData",this._handleCopyData.bind(this)),c.on("notification",this._handleNotification.bind(this))}_checkPgPass(c){let h=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(p=>{if(p!==void 0){if(typeof p!="string"){h.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=p}else this.connectionParameters.password=this.password=null;c()}).catch(p=>{h.emit("error",p)}):this.password!==null?c():i(this.connectionParameters,p=>{p!==void 0&&(this.connectionParameters.password=this.password=p),c()})}_handleAuthCleartextPassword(c){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(c){this._checkPgPass(()=>{let h=o.postgresMd5PasswordHash(this.user,this.password,c.salt);this.connection.password(h)})}_handleAuthSASL(c){this._checkPgPass(()=>{this.saslSession=a.startSession(c.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(c){a.continueSession(this.saslSession,this.password,c.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(c){a.finalizeSession(this.saslSession,c.data),this.saslSession=null}_handleBackendKeyData(c){this.processID=c.processID,this.secretKey=c.secretKey}_handleReadyForQuery(c){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:h}=this;this.activeQuery=null,this.readyForQuery=!0,h&&h.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(c){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(c);this.emit("error",c)}}_handleErrorEvent(c){if(this._connecting)return this._handleErrorWhileConnecting(c);this._queryable=!1,this._errorAllQueries(c),this.emit("error",c)}_handleErrorMessage(c){if(this._connecting)return this._handleErrorWhileConnecting(c);let h=this.activeQuery;if(!h){this._handleErrorEvent(c);return}this.activeQuery=null,h.handleError(c,this.connection)}_handleRowDescription(c){this.activeQuery.handleRowDescription(c)}_handleDataRow(c){this.activeQuery.handleDataRow(c)}_handlePortalSuspended(c){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(c){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(c){this.activeQuery.handleCommandComplete(c,this.connection)}_handleParseComplete(c){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(c){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(c){this.activeQuery.handleCopyData(c,this.connection)}_handleNotification(c){this.emit("notification",c)}_handleNotice(c){this.emit("notice",c)}getStartupConf(){var c=this.connectionParameters,h={user:c.user,database:c.database},p=c.application_name||c.fallback_application_name;return p&&(h.application_name=p),c.replication&&(h.replication=""+c.replication),c.statement_timeout&&(h.statement_timeout=String(parseInt(c.statement_timeout,10))),c.lock_timeout&&(h.lock_timeout=String(parseInt(c.lock_timeout,10))),c.idle_in_transaction_session_timeout&&(h.idle_in_transaction_session_timeout=String(parseInt(c.idle_in_transaction_session_timeout,10))),c.options&&(h.options=c.options),h}cancel(c,h){if(c.activeQuery===h){var p=this.connection;this.host&&this.host.indexOf("/")===0?p.connect(this.host+"/.s.PGSQL."+this.port):p.connect(this.port,this.host),p.on("connect",function(){p.cancel(c.processID,c.secretKey)})}else c.queryQueue.indexOf(h)!==-1&&c.queryQueue.splice(c.queryQueue.indexOf(h),1)}setTypeParser(c,h,p){return this._types.setTypeParser(c,h,p)}getTypeParser(c,h){return this._types.getTypeParser(c,h)}escapeIdentifier(c){return'"'+c.replace(/"/g,'""')+'"'}escapeLiteral(c){for(var h=!1,p="'",_=0;_<c.length;_++){var E=c[_];E==="'"?p+=E+E:E==="\\"?(p+=E+E,h=!0):p+=E}return p+="'",h===!0&&(p=" E"+p),p}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let c=this.activeQuery.submit(this.connection);c&&J.nextTick(()=>{this.activeQuery.handleError(c,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(c,h,p){var _,E,C,N,P;if(c==null)throw new TypeError("Client was passed a null or undefined query");return typeof c.submit=="function"?(C=c.query_timeout||this.connectionParameters.query_timeout,E=_=c,typeof h=="function"&&(_.callback=_.callback||h)):(C=this.connectionParameters.query_timeout,_=new f(c,h,p),_.callback||(E=new this._Promise((w,T)=>{_.callback=(A,I)=>A?T(A):w(I)}))),C&&(P=_.callback,N=setTimeout(()=>{var w=new Error("Query read timeout");J.nextTick(()=>{_.handleError(w,this.connection)}),P(w),_.callback=()=>{};var T=this.queryQueue.indexOf(_);T>-1&&this.queryQueue.splice(T,1),this._pulseQueryQueue()},C),_.callback=(w,T)=>{clearTimeout(N),P(w,T)}),this.binary&&!_.binary&&(_.binary=!0),_._result&&!_._result._types&&(_._result._types=this._types),this._queryable?this._ending?(J.nextTick(()=>{_.handleError(new Error("Client was closed and is not queryable"),this.connection)}),E):(this.queryQueue.push(_),this._pulseQueryQueue(),E):(J.nextTick(()=>{_.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),E)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(c){if(this._ending=!0,!this.connection._connecting)if(c)c();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),c)this.connection.once("end",c);else return new this._Promise(h=>{this.connection.once("end",h)})}};m(b,"Client");var y=b;y.Query=f,e.exports=y}),bl=X((s,e)=>{H();var t=st().EventEmitter,o=m(function(){},"NOOP"),a=m((c,h)=>{let p=c.findIndex(h);return p===-1?void 0:c.splice(p,1)[0]},"removeWhere"),i=class{constructor(h,p,_){this.client=h,this.idleListener=p,this.timeoutId=_}};m(i,"IdleItem");var l=i,n=class{constructor(h){this.callback=h}};m(n,"PendingItem");var f=n;function v(){throw new Error("Release called on client which has already been released to the pool.")}m(v,"throwOnDoubleRelease");function g(c,h){if(h)return{callback:h,result:void 0};let p,_,E=m(function(N,P){N?p(N):_(P)},"cb"),C=new c(function(N,P){_=N,p=P}).catch(N=>{throw Error.captureStackTrace(N),N});return{callback:E,result:C}}m(g,"promisify");function b(c,h){return m(function p(_){_.client=h,h.removeListener("error",p),h.on("error",()=>{c.log("additional client error after disconnection due to error",_)}),c._remove(h),c.emit("error",_,h)},"idleListener")}m(b,"makeIdleListener");var y=class extends t{constructor(h,p){super(),this.options=Object.assign({},h),h!=null&&"password"in h&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:h.password}),h!=null&&h.ssl&&h.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||p||Gt().Client,this.Promise=this.options.Promise||Ft.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(p=>{this._remove(p.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let h=this._pendingQueue.shift();if(this._idle.length){let p=this._idle.pop();clearTimeout(p.timeoutId);let _=p.client;_.ref&&_.ref();let E=p.idleListener;return this._acquireClient(_,h,E,!1)}if(!this._isFull())return this.newClient(h);throw new Error("unexpected condition")}_remove(h){let p=a(this._idle,_=>_.client===h);p!==void 0&&clearTimeout(p.timeoutId),this._clients=this._clients.filter(_=>_!==h),h.end(),this.emit("remove",h)}connect(h){if(this.ending){let E=new Error("Cannot use a pool after calling end on the pool");return h?h(E):this.Promise.reject(E)}let p=g(this.Promise,h),_=p.result;if(this._isFull()||this._idle.length){if(this._idle.length&&J.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new f(p.callback)),_;let E=m((P,w,T)=>{clearTimeout(N),p.callback(P,w,T)},"queueCallback"),C=new f(E),N=setTimeout(()=>{a(this._pendingQueue,P=>P.callback===E),C.timedOut=!0,p.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return N.unref&&N.unref(),this._pendingQueue.push(C),_}return this.newClient(new f(p.callback)),_}newClient(h){let p=new this.Client(this.options);this._clients.push(p);let _=b(this,p);this.log("checking client timeout");let E,C=!1;this.options.connectionTimeoutMillis&&(E=setTimeout(()=>{this.log("ending client due to timeout"),C=!0,p.connection?p.connection.stream.destroy():p.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),p.connect(N=>{if(E&&clearTimeout(E),p.on("error",_),N)this.log("client failed to connect",N),this._clients=this._clients.filter(P=>P!==p),C&&(N=new Error("Connection terminated due to connection timeout",{cause:N})),this._pulseQueue(),h.timedOut||h.callback(N,void 0,o);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let P=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(p),this._idle.findIndex(w=>w.client===p)!==-1&&this._acquireClient(p,new f((w,T,A)=>A()),_,!1)},this.options.maxLifetimeSeconds*1e3);P.unref(),p.once("end",()=>clearTimeout(P))}return this._acquireClient(p,h,_,!0)}})}_acquireClient(h,p,_,E){E&&this.emit("connect",h),this.emit("acquire",h),h.release=this._releaseOnce(h,_),h.removeListener("error",_),p.timedOut?E&&this.options.verify?this.options.verify(h,h.release):h.release():E&&this.options.verify?this.options.verify(h,C=>{if(C)return h.release(C),p.callback(C,void 0,o);p.callback(void 0,h,h.release)}):p.callback(void 0,h,h.release)}_releaseOnce(h,p){let _=!1;return E=>{_&&v(),_=!0,this._release(h,p,E)}}_release(h,p,_){if(h.on("error",p),h._poolUseCount=(h._poolUseCount||0)+1,this.emit("release",_,h),_||this.ending||!h._queryable||h._ending||h._poolUseCount>=this.options.maxUses){h._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(h),this._pulseQueue();return}if(this._expired.has(h)){this.log("remove expired client"),this._expired.delete(h),this._remove(h),this._pulseQueue();return}let E;this.options.idleTimeoutMillis&&(E=setTimeout(()=>{this.log("remove idle client"),this._remove(h)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&E.unref()),this.options.allowExitOnIdle&&h.unref(),this._idle.push(new l(h,p,E)),this._pulseQueue()}query(h,p,_){if(typeof h=="function"){let C=g(this.Promise,h);return Pr(function(){return C.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),C.result}typeof p=="function"&&(_=p,p=void 0);let E=g(this.Promise,_);return _=E.callback,this.connect((C,N)=>{if(C)return _(C);let P=!1,w=m(T=>{P||(P=!0,N.release(T),_(T))},"onError");N.once("error",w),this.log("dispatching query");try{N.query(h,p,(T,A)=>{if(this.log("query dispatched"),N.removeListener("error",w),!P)return P=!0,N.release(T),T?_(T):_(void 0,A)})}catch(T){return N.release(T),_(T)}}),E.result}end(h){if(this.log("ending"),this.ending){let _=new Error("Called end on pool more than once");return h?h(_):this.Promise.reject(_)}this.ending=!0;let p=g(this.Promise,h);return this._endCallback=p.callback,this._pulseQueue(),p.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((h,p)=>h+(this._expired.has(p)?1:0),0)}get totalCount(){return this._clients.length}};m(y,"Pool");var x=y;e.exports=x}),ei={};je(ei,{default:()=>ti});var ti,wl=Ae(()=>{H(),ti={}}),xl=X((s,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),Sl=X((s,e)=>{H();var t=st().EventEmitter,o=(Ht(),ve(Et)),a=Vt(),i=e.exports=function(n,f,v){t.call(this),n=a.normalizeQueryConfig(n,f,v),this.text=n.text,this.values=n.values,this.name=n.name,this.callback=n.callback,this.state="new",this._arrayMode=n.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",(function(g){g==="row"&&(this._emitRowEvents=!0)}).bind(this))};o.inherits(i,t);var l={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};i.prototype.handleError=function(n){var f=this.native.pq.resultErrorFields();if(f)for(var v in f){var g=l[v]||v;n[g]=f[v]}this.callback?this.callback(n):this.emit("error",n),this.state="error"},i.prototype.then=function(n,f){return this._getPromise().then(n,f)},i.prototype.catch=function(n){return this._getPromise().catch(n)},i.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise((function(n,f){this._once("end",n),this._once("error",f)}).bind(this)),this._promise)},i.prototype.submit=function(n){this.state="running";var f=this;this.native=n.native,n.native.arrayMode=this._arrayMode;var v=m(function(y,x,c){if(n.native.arrayMode=!1,Pr(function(){f.emit("_done")}),y)return f.handleError(y);f._emitRowEvents&&(c.length>1?x.forEach((h,p)=>{h.forEach(_=>{f.emit("row",_,c[p])})}):x.forEach(function(h){f.emit("row",h,c)})),f.state="end",f.emit("end",c),f.callback&&f.callback(null,c)},"after");if(J.domain&&(v=J.domain.bind(v)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var g=(this.values||[]).map(a.prepareValue);if(n.namedQueries[this.name]){if(this.text&&n.namedQueries[this.name]!==this.text){let y=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return v(y)}return n.native.execute(this.name,g,v)}return n.native.prepare(this.name,this.text,g.length,function(y){return y?v(y):(n.namedQueries[f.name]=f.text,f.native.execute(f.name,g,v))})}else if(this.values){if(!Array.isArray(this.values)){let y=new Error("Query values must be an array");return v(y)}var b=this.values.map(a.prepareValue);n.native.query(this.text,b,v)}else n.native.query(this.text,v)}}),_l=X((s,e)=>{H();var t=(wl(),ve(ei)),o=Mr();xl();var a=st().EventEmitter,i=(Ht(),ve(Et)),l=Dr(),n=Sl(),f=e.exports=function(v){a.call(this),v=v||{},this._Promise=v.Promise||Ft.Promise,this._types=new o(v.types),this.native=new t({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var g=this.connectionParameters=new l(v);this.user=g.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:g.password}),this.database=g.database,this.host=g.host,this.port=g.port,this.namedQueries={}};f.Query=n,i.inherits(f,a),f.prototype._errorAllQueries=function(v){let g=m(b=>{J.nextTick(()=>{b.native=this.native,b.handleError(v)})},"enqueueError");this._hasActiveQuery()&&(g(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(g),this._queryQueue.length=0},f.prototype._connect=function(v){var g=this;if(this._connecting){J.nextTick(()=>v(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(b,y){if(b)return v(b);g.native.connect(y,function(x){if(x)return g.native.end(),v(x);g._connected=!0,g.native.on("error",function(c){g._queryable=!1,g._errorAllQueries(c),g.emit("error",c)}),g.native.on("notification",function(c){g.emit("notification",{channel:c.relname,payload:c.extra})}),g.emit("connect"),g._pulseQueryQueue(!0),v()})})},f.prototype.connect=function(v){if(v){this._connect(v);return}return new this._Promise((g,b)=>{this._connect(y=>{y?b(y):g()})})},f.prototype.query=function(v,g,b){var y,x,c,h,p;if(v==null)throw new TypeError("Client was passed a null or undefined query");if(typeof v.submit=="function")c=v.query_timeout||this.connectionParameters.query_timeout,x=y=v,typeof g=="function"&&(v.callback=g);else if(c=this.connectionParameters.query_timeout,y=new n(v,g,b),!y.callback){let _,E;x=new this._Promise((C,N)=>{_=C,E=N}),y.callback=(C,N)=>C?E(C):_(N)}return c&&(p=y.callback,h=setTimeout(()=>{var _=new Error("Query read timeout");J.nextTick(()=>{y.handleError(_,this.connection)}),p(_),y.callback=()=>{};var E=this._queryQueue.indexOf(y);E>-1&&this._queryQueue.splice(E,1),this._pulseQueryQueue()},c),y.callback=(_,E)=>{clearTimeout(h),p(_,E)}),this._queryable?this._ending?(y.native=this.native,J.nextTick(()=>{y.handleError(new Error("Client was closed and is not queryable"))}),x):(this._queryQueue.push(y),this._pulseQueryQueue(),x):(y.native=this.native,J.nextTick(()=>{y.handleError(new Error("Client has encountered a connection error and is not queryable"))}),x)},f.prototype.end=function(v){var g=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,v));var b;return v||(b=new this._Promise(function(y,x){v=m(c=>c?x(c):y(),"cb")})),this.native.end(function(){g._errorAllQueries(new Error("Connection terminated")),J.nextTick(()=>{g.emit("end"),v&&v()})}),b},f.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},f.prototype._pulseQueryQueue=function(v){if(this._connected&&!this._hasActiveQuery()){var g=this._queryQueue.shift();if(!g){v||this.emit("drain");return}this._activeQuery=g,g.submit(this);var b=this;g.once("_done",function(){b._pulseQueryQueue()})}},f.prototype.cancel=function(v){this._activeQuery===v?this.native.cancel(function(){}):this._queryQueue.indexOf(v)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(v),1)},f.prototype.ref=function(){},f.prototype.unref=function(){},f.prototype.setTypeParser=function(v,g,b){return this._types.setTypeParser(v,g,b)},f.prototype.getTypeParser=function(v,g){return this._types.getTypeParser(v,g)}}),is=X((s,e)=>{H(),e.exports=_l()}),Gt=X((s,e)=>{H();var t=vl(),o=$t(),a=Xn(),i=bl(),{DatabaseError:l}=Yn(),n=m(v=>{var g;return g=class extends i{constructor(b){super(b,v)}},m(g,"BoundPool"),g},"poolFactory"),f=m(function(v){this.defaults=o,this.Client=v,this.Query=this.Client.Query,this.Pool=n(this.Client),this._pools=[],this.Connection=a,this.types=qt(),this.DatabaseError=l},"PG");typeof J.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new f(is()):(e.exports=new f(t),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var v=null;try{v=new f(is())}catch(g){if(g.code!=="MODULE_NOT_FOUND")throw g}return Object.defineProperty(e.exports,"native",{value:v}),v}}))});H();H();Qt();Pn();H();var El=Object.defineProperty,Cl=Object.defineProperties,Il=Object.getOwnPropertyDescriptors,os=Object.getOwnPropertySymbols,Al=Object.prototype.hasOwnProperty,Rl=Object.prototype.propertyIsEnumerable,as=m((s,e,t)=>e in s?El(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,"__defNormalProp"),Nl=m((s,e)=>{for(var t in e||(e={}))Al.call(e,t)&&as(s,t,e[t]);if(os)for(var t of os(e))Rl.call(e,t)&&as(s,t,e[t]);return s},"__spreadValues"),Pl=m((s,e)=>Cl(s,Il(e)),"__spreadProps"),Tl=1008e3,ls=new Uint8Array(new Uint16Array([258]).buffer)[0]===2,Ml=new TextDecoder,Or=new TextEncoder,It=Or.encode("0123456789abcdef"),At=Or.encode("0123456789ABCDEF"),Ll=Or.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ri=Ll.slice();ri[62]=45;ri[63]=95;var gt,Rt;function si(s,{alphabet:e,scratchArr:t}={}){if(!gt)if(gt=new Uint16Array(256),Rt=new Uint16Array(256),ls)for(let x=0;x<256;x++)gt[x]=It[x&15]<<8|It[x>>>4],Rt[x]=At[x&15]<<8|At[x>>>4];else for(let x=0;x<256;x++)gt[x]=It[x&15]|It[x>>>4]<<8,Rt[x]=At[x&15]|At[x>>>4]<<8;s.byteOffset%4!==0&&(s=new Uint8Array(s));let o=s.length,a=o>>>1,i=o>>>2,l=t||new Uint16Array(o),n=new Uint32Array(s.buffer,s.byteOffset,i),f=new Uint32Array(l.buffer,l.byteOffset,a),v=e==="upper"?Rt:gt,g=0,b=0,y;if(ls)for(;g<i;)y=n[g++],f[b++]=v[y>>>8&255]<<16|v[y&255],f[b++]=v[y>>>24]<<16|v[y>>>16&255];else for(;g<i;)y=n[g++],f[b++]=v[y>>>24]<<16|v[y>>>16&255],f[b++]=v[y>>>8&255]<<16|v[y&255];for(g<<=2;g<o;)l[g]=v[s[g++]];return Ml.decode(l.subarray(0,o))}m(si,"_toHex");function ni(s,e={}){let t="",o=s.length,a=Tl>>>1,i=Math.ceil(o/a),l=new Uint16Array(i>1?a:o);for(let n=0;n<i;n++){let f=n*a,v=f+a;t+=si(s.subarray(f,v),Pl(Nl({},e),{scratchArr:l}))}return t}m(ni,"_toHexChunked");function ii(s,e={}){return e.alphabet!=="upper"&&typeof s.toHex=="function"?s.toHex():ni(s,e)}m(ii,"toHex");H();var oi=class ai{constructor(e,t){this.strings=e,this.values=t}toParameterizedQuery(e={query:"",params:[]}){var a;let{strings:t,values:o}=this;for(let i=0,l=t.length;i<l;i++)if(e.query+=t[i],i<o.length){let n=o[i];if(n instanceof ui)e.query+=n.sql;else if(n instanceof Mt)if(n.queryData instanceof ai)n.queryData.toParameterizedQuery(e);else{if((a=n.queryData.params)!=null&&a.length)throw new Error("This query is not composable");e.query+=n.queryData.query}else{let{params:f}=e;f.push(n),e.query+="$"+f.length,(n instanceof W||ArrayBuffer.isView(n))&&(e.query+="::bytea")}}return e}};m(oi,"SqlTemplate");var li=oi,ci=class{constructor(e){this.sql=e}};m(ci,"UnsafeRawSql");var ui=ci,jl=rt(Mr()),kl=rt(Vt()),hi=class fi extends Error{constructor(e){super(e),K(this,"name","NeonDbError"),K(this,"severity"),K(this,"code"),K(this,"detail"),K(this,"hint"),K(this,"position"),K(this,"internalPosition"),K(this,"internalQuery"),K(this,"where"),K(this,"schema"),K(this,"table"),K(this,"column"),K(this,"dataType"),K(this,"constraint"),K(this,"file"),K(this,"line"),K(this,"routine"),K(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,fi)}};m(hi,"NeonDbError");var it=hi,cs="transaction() expects an array of queries, or a function returning an array of queries",Bl=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function di(s){return s instanceof W?"\\x"+ii(s):s}m(di,"encodeBuffersAsBytea");function xr(s){let{query:e,params:t}=s instanceof li?s.toParameterizedQuery():s;return{query:e,params:t.map(o=>di((0,kl.prepareValue)(o)))}}m(xr,"prepareQuery");function Fr(s,{arrayMode:e,fullResults:t,fetchOptions:o,isolationLevel:a,readOnly:i,deferrable:l,authToken:n}={}){if(!s)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let f;try{f=Tr(s)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(s))}let{protocol:v,username:g,hostname:b,port:y,pathname:x}=f;if(v!=="postgres:"&&v!=="postgresql:"||!g||!b||!x)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function c(p,..._){if(!(Array.isArray(p)&&Array.isArray(p.raw)&&Array.isArray(_)))throw new Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new Mt(h,new li(p,_))}m(c,"templateFn"),c.query=(p,_,E)=>new Mt(h,{query:p,params:_??[]},E),c.unsafe=p=>new ui(p),c.transaction=async(p,_)=>{if(typeof p=="function"&&(p=p(c)),!Array.isArray(p))throw new Error(cs);p.forEach(N=>{if(!(N instanceof Mt))throw new Error(cs)});let E=p.map(N=>N.queryData),C=p.map(N=>N.opts??{});return h(E,C,_)};async function h(p,_,E){let{fetchEndpoint:C,fetchFunction:N}=Ut,P=Array.isArray(p)?{queries:p.map(V=>xr(V))}:xr(p),w=o??{},T=e??!1,A=t??!1,I=a,L=i,j=l;E!==void 0&&(E.fetchOptions!==void 0&&(w={...w,...E.fetchOptions}),E.arrayMode!==void 0&&(T=E.arrayMode),E.fullResults!==void 0&&(A=E.fullResults),E.isolationLevel!==void 0&&(I=E.isolationLevel),E.readOnly!==void 0&&(L=E.readOnly),E.deferrable!==void 0&&(j=E.deferrable)),_!==void 0&&!Array.isArray(_)&&_.fetchOptions!==void 0&&(w={...w,..._.fetchOptions});let U=n;!Array.isArray(_)&&(_==null?void 0:_.authToken)!==void 0&&(U=_.authToken);let $=typeof C=="function"?C(b,y,{jwtAuth:U!==void 0}):C,B={"Neon-Connection-String":s,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},F=await mi(U);F&&(B.Authorization=`Bearer ${F}`),Array.isArray(p)&&(I!==void 0&&(B["Neon-Batch-Isolation-Level"]=I),L!==void 0&&(B["Neon-Batch-Read-Only"]=String(L)),j!==void 0&&(B["Neon-Batch-Deferrable"]=String(j)));let q;try{q=await(N??fetch)($,{method:"POST",body:JSON.stringify(P),headers:B,...w})}catch(V){let z=new it(`Error connecting to database: ${V}`);throw z.sourceError=V,z}if(q.ok){let V=await q.json();if(Array.isArray(p)){let z=V.results;if(!Array.isArray(z))throw new it("Neon internal error: unexpected result format");return z.map((Z,we)=>{let ne=_[we]??{},fe=ne.arrayMode??T,De=ne.fullResults??A;return Sr(Z,{arrayMode:fe,fullResults:De,types:ne.types})})}else{let z=_??{},Z=z.arrayMode??T,we=z.fullResults??A;return Sr(V,{arrayMode:Z,fullResults:we,types:z.types})}}else{let{status:V}=q;if(V===400){let z=await q.json(),Z=new it(z.message);for(let we of Bl)Z[we]=z[we]??void 0;throw Z}else{let z=await q.text();throw new it(`Server error (HTTP status ${V}): ${z}`)}}}return m(h,"execute"),c}m(Fr,"neon");var pi=class{constructor(e,t,o){this.execute=e,this.queryData=t,this.opts=o}then(e,t){return this.execute(this.queryData,this.opts).then(e,t)}catch(e){return this.execute(this.queryData,this.opts).catch(e)}finally(e){return this.execute(this.queryData,this.opts).finally(e)}};m(pi,"NeonQueryPromise");var Mt=pi;function Sr(s,{arrayMode:e,fullResults:t,types:o}){let a=new jl.default(o),i=s.fields.map(f=>f.name),l=s.fields.map(f=>a.getTypeParser(f.dataTypeID)),n=e===!0?s.rows.map(f=>f.map((v,g)=>v===null?null:l[g](v))):s.rows.map(f=>Object.fromEntries(f.map((v,g)=>[i[g],v===null?null:l[g](v)])));return t?(s.viaNeonFetch=!0,s.rowAsArray=e,s.rows=n,s._parsers=l,s._types=a,s):n}m(Sr,"processQueryResult");async function mi(s){if(typeof s=="string")return s;if(typeof s=="function")try{return await Promise.resolve(s())}catch(e){let t=new it("Error getting auth token.");throw e instanceof Error&&(t=new it(`Error getting auth token: ${e.message}`)),t}}m(mi,"getAuthToken");H();var Dl=rt(Gt());H();var Ol=rt(Gt()),gi=class extends Ol.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){var v,g;let{neonConfig:t}=this;t.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&t.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let o=typeof this.config!="string"&&((v=this.config)==null?void 0:v.host)!==void 0||typeof this.config!="string"&&((g=this.config)==null?void 0:g.connectionString)!==void 0||J.env.PGHOST!==void 0,a=J.env.USER??J.env.USERNAME;if(!o&&this.host==="localhost"&&this.user===a&&this.database===a&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${a}, db: ${a}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let i=super.connect(e),l=t.pipelineTLS&&this.ssl,n=t.pipelineConnect==="password";if(!l&&!t.pipelineConnect)return i;let f=this.connection;if(l&&f.on("connect",()=>f.stream.emit("data","S")),n){f.removeAllListeners("authenticationCleartextPassword"),f.removeAllListeners("readyForQuery"),f.once("readyForQuery",()=>f.on("readyForQuery",this._handleReadyForQuery.bind(this)));let b=this.ssl?"sslconnect":"connect";f.on(b,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return i}async _handleAuthSASLContinue(e){if(typeof crypto>"u"||crypto.subtle===void 0||crypto.subtle.importKey===void 0)throw new Error("Cannot use SASL auth when `crypto.subtle` is not defined");let t=crypto.subtle,o=this.saslSession,a=this.password,i=e.data;if(o.message!=="SASLInitialResponse"||typeof a!="string"||typeof i!="string")throw new Error("SASL: protocol error");let l=Object.fromEntries(i.split(",").map(z=>{if(!/^.=/.test(z))throw new Error("SASL: Invalid attribute pair entry");let Z=z[0],we=z.substring(2);return[Z,we]})),n=l.r,f=l.s,v=l.i;if(!n||!/^[!-+--~]+$/.test(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!f||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(f))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!v||!/^[1-9][0-9]*$/.test(v))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!n.startsWith(o.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(n.length===o.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let g=parseInt(v,10),b=W.from(f,"base64"),y=new TextEncoder,x=y.encode(a),c=await t.importKey("raw",x,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),h=new Uint8Array(await t.sign("HMAC",c,W.concat([b,W.from([0,0,0,1])]))),p=h;for(var _=0;_<g-1;_++)h=new Uint8Array(await t.sign("HMAC",c,h)),p=W.from(p.map((z,Z)=>p[Z]^h[Z]));let E=p,C=await t.importKey("raw",E,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),N=new Uint8Array(await t.sign("HMAC",C,y.encode("Client Key"))),P=await t.digest("SHA-256",N),w="n=*,r="+o.clientNonce,T="r="+n+",s="+f+",i="+g,A="c=biws,r="+n,I=w+","+T+","+A,L=await t.importKey("raw",P,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var j=new Uint8Array(await t.sign("HMAC",L,y.encode(I))),U=W.from(N.map((z,Z)=>N[Z]^j[Z])),$=U.toString("base64");let B=await t.importKey("raw",E,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),F=await t.sign("HMAC",B,y.encode("Server Key")),q=await t.importKey("raw",F,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var V=W.from(await t.sign("HMAC",q,y.encode(I)));o.message="SASLResponse",o.serverSignature=V.toString("base64"),o.response=A+",p="+$,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};m(gi,"NeonClient");var Fl=gi;Qt();var Ul=rt(Dr());function yi(s,e){if(e)return{callback:e,result:void 0};let t,o,a=m(function(l,n){l?t(l):o(n)},"cb"),i=new s(function(l,n){o=l,t=n});return{callback:a,result:i}}m(yi,"promisify");var Ql=class extends Dl.Pool{constructor(){super(...arguments),K(this,"Client",Fl),K(this,"hasFetchUnsupportedListeners",!1),K(this,"addListener",this.on)}on(e,t){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,t)}query(e,t,o){var i;if(!Ut.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,t,o);typeof t=="function"&&(o=t,t=void 0);let a=yi(this.Promise,o);o=a.callback;try{let l=new Ul.default(this.options),n=encodeURIComponent,f=encodeURI,v=`postgresql://${n(l.user)}:${n(l.password)}@${n(l.host)}/${f(l.database)}`,g=typeof e=="string"?e:e.text,b=t??e.values??[];Fr(v,{fullResults:!0,arrayMode:e.rowMode==="array"}).query(g,b,{types:e.types??((i=this.options)==null?void 0:i.types)}).then(y=>o(void 0,y)).catch(y=>o(y))}catch(l){o(l)}return a.result}};m(Ql,"NeonPool");Qt();var Ur=rt(Gt());Ur.DatabaseError;Ur.defaults;Ur.types;/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/const ql=Fr("postgresql://neondb_owner:npg_trG0JRad6sxP@ep-flat-smoke-a5gx7mdm-pooler.us-east-2.aws.neon.tech/neondb?sslmode=require");async function $l(){try{return await ql`SELECT * FROM dogs ORDER BY intake_date DESC`}catch(s){throw console.error("Error fetching dogs from Neon:",s),s}}const Ic=()=>{const[s,e]=k.useState(""),[t,o]=k.useState("all"),[a,i]=k.useState("all"),[l,n]=k.useState("name"),[f,v]=k.useState("cards"),[g,b]=k.useState(new Set),y=N=>{b(P=>{const w=new Set(P);return w.has(N)?w.delete(N):w.add(N),w})},{data:x=[],isLoading:c,error:h}=Xi({queryKey:["dogs"],queryFn:async()=>{try{return(await $l()).map(w=>{var T,A,I,L;return{"Dog ID":w.dog_id,Name:w.name,"Breed AI":w.breed_ai,Photo_1:((T=w.photo_1)==null?void 0:T.replace(/\n/g,"").trim())||"",Photo_2:((A=w.photo_2)==null?void 0:A.replace(/\n/g,"").trim())||"",Photo_3:((I=w.photo_3)==null?void 0:I.replace(/\n/g,"").trim())||"",Gender:w.gender,Approx_Age:w.approx_age,Weight:w.weight,Level:w.level,Location_kennel:w.location_kennel,Location_room:w.location_room,Spay_Neuter_status:w.spay_neuter_status,Sociability_status:w.sociability_status,Sociablity_playstyle:w.sociablity_playstyle,Petpoint_url:w.petpoint_url,Breed_AI_1:w.breed_ai_1,Breed_AI_2:w.breed_ai_2,Breed_AI_3:w.breed_ai_3,DOB:w.dob,Intake_Date:w.intake_date,Days_in_DCAS:w.days_in_dcas,Color_pimary:w.color_pimary,Color_seconday:w.color_seconday,Adoption_restriction:w.adoption_restriction,DA2PPV_vax_date:w.da2ppv_vax_date,Rabies_vax_date:w.rabies_vax_date,HW_test_date:w.hw_test_date,Heartworm_Status:w.heartworm_status,Foster_status:w.foster_status,L2_reason:w.l2_reason,Play_group_initial:w.play_group_initial,Play_group_recent:w.play_group_recent,Sociability_notes:((L=w.sociability_notes)==null?void 0:L.replace(/\n/g,"").trim())||"",Adopets_url:w.adopets_url,DFTD_eligibility:w.dftd_eligibility,Mini_pic_1:w.mini_pic_1,Mini_pic_2:w.mini_pic_2,Mini_pic_3:w.mini_pic_3,Adopets_status:w.adopets_status}}).filter(w=>w.Name&&!w.Name.startsWith("http"))}catch(N){throw console.error("Fetch error:",N),N}},staleTime:1e3*60*60*12,gcTime:1e3*60*60*24,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,retry:3,retryDelay:N=>Math.min(1e3*2**N,3e4)}),p=N=>{if(!N||N.trim()==="")return"Mixed Breed";const P=N.toLowerCase();return P.includes("pit bull")||P.includes("pitbull")||P.includes("american pit bull")||P.includes("staffordshire")?"Pit Bull / Staffordshire":P.includes("boxer")?"Boxer":P.includes("labrador")||P.includes("lab mix")?"Labrador Retriever":P.includes("german shepherd")?"German Shepherd":P.includes("husky")||P.includes("alaskan malamute")?"Husky / Northern Breed":P.includes("bulldog")||P.includes("american bulldog")||P.includes("french bulldog")||P.includes("english bulldog")?"Bulldog":P.includes("belgian malinois")||P.includes("belgian shepherd")?"Belgian Malinois":P.includes("rottweiler")?"Rottweiler":P.includes("cane corso")?"Cane Corso":P.includes("border collie")?"Border Collie":P.includes("chihuahua")?"Chihuahua":P.includes("great dane")?"Great Dane":P.includes("terrier")&&!P.includes("pit bull")&&!P.includes("staffordshire")?"Terrier":P.includes("retriever")&&!P.includes("labrador")?"Retriever":P.includes("shepherd")&&!P.includes("german")?"Shepherd":P.includes("mixed breed")||P.includes("mix")?"Mixed Breed":N.split(",")[0].trim()||"Mixed Breed"},_=k.useMemo(()=>{const N=x.map(P=>p(P["Breed AI"]));return[...new Set(N)].sort()},[x]),E=k.useMemo(()=>x.filter(N=>{const P=s===""||N.Name.toLowerCase().includes(s.toLowerCase())||p(N["Breed AI"]).toLowerCase().includes(s.toLowerCase()),w=t==="all"||p(N["Breed AI"])===t,T=a==="all"||a==="yes"&&N.Location_kennel==="Foster Care"||a==="no"&&N.Location_kennel!=="Foster Care";return P&&w&&T}),[x,s,t,a]),C=k.useMemo(()=>{const N=[...E];switch(l){case"name":N.sort((P,w)=>P.Name.localeCompare(w.Name));break;case"age":N.sort((P,w)=>{const T=ss(P.Approx_Age),A=ss(w.Approx_Age);return T-A});break;case"size":N.sort((P,w)=>parseFloat(P.Weight||"0")-parseFloat(w.Weight||"0"));break;case"level":N.sort((P,w)=>parseInt(P.Level||"0")-parseInt(w.Level||"0"));break;case"weight":N.sort((P,w)=>parseFloat(P.Weight||"0")-parseFloat(w.Weight||"0"));break;case"dftdEligible":N.sort((P,w)=>{const T=P.DFTD_eligibility==="Yes"?1:0;return(w.DFTD_eligibility==="Yes"?1:0)-T});break}return N},[E,l]);return c?S.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50",children:[S.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[S.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-4",children:"Find Your Perfect Companion"}),S.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto mb-8",children:"Every dog deserves a loving home. Browse our adorable rescue dogs and find your new best friend today! ðŸ¾"}),S.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-orange-100 max-w-5xl mx-auto opacity-50",children:S.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:S.jsxs("div",{className:"relative flex-1 min-w-0",children:[S.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),S.jsx(fr,{placeholder:"Loading dogs...",disabled:!0,className:"pl-10 h-12 border-orange-200 rounded-xl text-base"})]})})})]})}),S.jsx("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:S.jsx("div",{className:"max-w-7xl mx-auto text-center",children:S.jsx("div",{className:"text-lg text-gray-600",children:"Loading amazing dogs..."})})})]}):h?S.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-8xl mb-6",children:"ðŸ˜¢"}),S.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Oops! Something went wrong"}),S.jsx("p",{className:"text-gray-500 mb-4",children:"We couldn't fetch the dogs right now"}),S.jsx(wt,{onClick:()=>window.location.reload(),className:"bg-orange-500 hover:bg-orange-600",children:"Try Again"})]})}):S.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50",children:[S.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[S.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-4",children:"Find Your Perfect Companion"}),S.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto mb-8",children:"Every dog deserves a loving home. Browse our adorable rescue dogs and find your new best friend today! ðŸ¾"}),S.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-orange-100 max-w-5xl mx-auto",children:[S.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[S.jsxs("div",{className:"relative flex-1 min-w-0",children:[S.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),S.jsx(fr,{placeholder:"Search by name or breed...",value:s,onChange:N=>e(N.target.value),className:"pl-10 h-12 border-orange-200 focus:border-orange-400 focus:ring-orange-400 rounded-xl text-base"})]}),S.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[S.jsxs(Yt,{value:t,onValueChange:o,children:[S.jsx(Pt,{className:"h-12 w-48 border-orange-200 focus:border-orange-400 focus:ring-orange-400 rounded-xl",children:S.jsx(Zt,{placeholder:"All Breeds"})}),S.jsxs(Tt,{children:[S.jsx(Re,{value:"all",children:"All Breeds"}),_.map(N=>S.jsx(Re,{value:N,children:N},N))]})]}),S.jsxs(Yt,{value:a,onValueChange:i,children:[S.jsx(Pt,{className:"h-12 w-40 border-orange-200 focus:border-orange-400 focus:ring-orange-400 rounded-xl",children:S.jsx(Zt,{placeholder:"Location"})}),S.jsxs(Tt,{children:[S.jsx(Re,{value:"all",children:"All Dogs"}),S.jsx(Re,{value:"yes",children:"Foster Care"}),S.jsx(Re,{value:"no",children:"At Shelter"})]})]}),S.jsxs(Yt,{value:l,onValueChange:N=>n(N),children:[S.jsxs(Pt,{className:"h-12 w-40 border-orange-200 focus:border-orange-400 focus:ring-orange-400 rounded-xl",children:[S.jsx(oo,{className:"h-4 w-4 mr-2"}),S.jsx(Zt,{placeholder:"Sort by"})]}),S.jsxs(Tt,{children:[S.jsx(Re,{value:"name",children:"Name"}),S.jsx(Re,{value:"age",children:"Age"}),S.jsx(Re,{value:"size",children:"Size"}),S.jsx(Re,{value:"level",children:"Level"}),S.jsx(Re,{value:"weight",children:"Weight"}),S.jsx(Re,{value:"dftdEligible",children:"DFTD Eligible"})]})]}),S.jsxs(Sn,{type:"single",value:f,onValueChange:v,className:"bg-gray-100 rounded-xl p-1 h-12",children:[S.jsx(br,{value:"cards",className:"data-[state=on]:bg-white data-[state=on]:shadow-sm h-10 px-3",children:S.jsx(Co,{className:"h-4 w-4"})}),S.jsx(br,{value:"table",className:"data-[state=on]:bg-white data-[state=on]:shadow-sm h-10 px-3",children:S.jsx(Ao,{className:"h-4 w-4"})})]})]})]}),S.jsx("div",{className:"flex items-center justify-center mt-4",children:S.jsxs("span",{className:"text-gray-600 font-medium",children:[E.length," of ",x.length," dogs"]})})]})]})}),S.jsx("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"max-w-7xl mx-auto",children:[S.jsx(Oa,{dogs:C,favorites:g,onToggleFavorite:y,viewMode:f}),E.length===0&&S.jsxs("div",{className:"text-center py-16",children:[S.jsx("div",{className:"text-8xl mb-6",children:"ðŸ•â€ðŸ¦º"}),S.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"No dogs found"}),S.jsx("p",{className:"text-gray-500 mb-6",children:"Try adjusting your search criteria to find more furry friends!"}),S.jsx(wt,{onClick:()=>{e(""),o("all"),i("all")},className:"bg-orange-500 hover:bg-orange-600",children:"Clear Filters"})]})]})})]})};export{Ic as default};
