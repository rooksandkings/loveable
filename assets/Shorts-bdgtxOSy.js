import{j as e}from"./ui-vendor-CVcv4Zzz.js";import{r as n}from"./react-vendor-tkGVC3Du.js";import{u as t}from"./query-vendor-B8TzFr-Q.js";import{B as r,C as s,h as a,i as l,a as o,I as i,S as c,b as d,d as h,e as m,f as x,j as u}from"./neon-api-6cBKWKuS.js";import{C as p,a as b,D as g}from"./icons-CwoiqeW0.js";import"./index-K1ovg1IY.js";const f=()=>{const[f,y]=n.useState(""),[j,w]=n.useState("all"),[C,_]=n.useState("all"),[v,N]=n.useState({}),[k,A]=n.useState(new Set),S=e=>{if(!e)return[];const n=e.split(",").map(e=>e.trim()).filter(e=>e.length>0).map(e=>e.replace(/\s+/g," ").trim()).map(e=>{const n=e.toLowerCase();return n.includes("pit bull")||n.includes("pitbull")||n.includes("american pit bull")||n.includes("staffordshire")?"Pit Bull / Staffordshire":n.includes("boxer")?"Boxer":n.includes("labrador")||n.includes("lab mix")?"Labrador Retriever":n.includes("german shepherd")?"German Shepherd":n.includes("husky")||n.includes("alaskan malamute")?"Husky / Northern Breed":n.includes("bulldog")||n.includes("american bulldog")||n.includes("french bulldog")||n.includes("english bulldog")?"Bulldog":n.includes("belgian malinois")||n.includes("belgian shepherd")?"Belgian Malinois":n.includes("rottweiler")?"Rottweiler":n.includes("cane corso")?"Cane Corso":n.includes("border collie")?"Border Collie":n.includes("chihuahua")?"Chihuahua":n.includes("great dane")?"Great Dane":!n.includes("terrier")||n.includes("pit bull")||n.includes("staffordshire")?n.includes("retriever")&&!n.includes("labrador")?"Retriever":n.includes("shepherd")&&!n.includes("german")?"Shepherd":n.includes("mixed breed")||n.includes("mix")?"Mixed Breed":n.includes("akita")?"Akita":e:"Terrier"});return[...new Set(n)]},F=e=>{if(!e)return"";const n=e.indexOf("https://adopt.adopets.com/");return-1!==n?e.substring(0,n).trim():e.trim()},D=e=>e?e.replace(/\s*-\s*in\s+foster\s*$/i,"").replace(/\s*-\s*foster\s*$/i,"").replace(/\s*\(foster\)\s*$/i,"").replace(/\s*\[foster\]\s*$/i,"").trim():"",{data:I=[],isLoading:L,error:B}=t({queryKey:["shortDescriptions"],queryFn:u,staleTime:432e5,gcTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),P=n.useMemo(()=>{const e=[];I.forEach(n=>{if(n.breed_ai){const t=S(n.breed_ai);e.push(...t)}});return[...new Set(e)].sort()},[I]),T=n.useMemo(()=>I.filter(e=>{const n=""===f||e.name?.toLowerCase().includes(f.toLowerCase())||e.animal_id?.toLowerCase().includes(f.toLowerCase())||e.breed_ai?.toLowerCase().includes(f.toLowerCase())||e.chuya_breed_ai?.toLowerCase().includes(f.toLowerCase()),t="all"===j||S(e.breed_ai).includes(j),r=e.location_kennel&&e.location_kennel.toLowerCase().includes("foster")||e.location_room&&e.location_room.toLowerCase().includes("foster");let s=!0;switch(C){case"all":default:s=!0;break;case"all_in_foster":s=r;break;case"all_in_shelter":s=!r;break;case"DCAS_in_shelter":s="DCAS"===e.shelter_location&&!r;break;case"DCAS_in_foster":s=r&&"DCAS"===e.shelter_location;break;case"FCAS_in_shelter":s="FCAS"===e.shelter_location&&!r;break;case"FCAS_in_foster":s=r&&"FCAS"===e.shelter_location;break;case"CAC_in_shelter":s="CAC"===e.shelter_location&&!r;break;case"CAC_in_foster":s=r&&"CAC"===e.shelter_location}return n&&t&&s}),[I,f,j,C]);return L?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-lg text-gray-600",children:"Loading short descriptions..."})})})}):B?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-8xl mb-6",children:"😢"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"We couldn't fetch the short descriptions right now"}),e.jsx(r,{onClick:()=>window.location.reload(),className:"bg-orange-500 hover:bg-orange-600",children:"Try Again"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Breed Resemblance Post Generator"}),e.jsx("p",{className:"text-gray-600",children:"Generate social media posts highlighting AI-identified breed resemblances for rescue dogs"})]}),e.jsxs(s,{className:"mb-6",children:[e.jsx(a,{children:e.jsx(l,{children:"Filters"})}),e.jsx(o,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(i,{placeholder:"Search by name, ID, or resemblance...",value:f,onChange:e=>y(e.target.value),className:"w-full"})}),e.jsxs(c,{value:j,onValueChange:w,children:[e.jsx(d,{className:"w-48",children:e.jsx(h,{placeholder:"Resembles All"})}),e.jsxs(m,{children:[e.jsx(x,{value:"all",children:"Resembles All"}),P.map(n=>e.jsx(x,{value:n,children:n},n))]})]}),e.jsxs(c,{value:C,onValueChange:_,children:[e.jsx(d,{className:"w-64",children:e.jsx(h,{placeholder:"Location"})}),e.jsxs(m,{children:[e.jsx(x,{value:"all",children:"All Dogs"}),e.jsx(x,{value:"all_in_shelter",children:"All In Shelter"}),e.jsx(x,{value:"all_in_foster",children:"All In Foster"}),e.jsx(x,{value:"DCAS_in_shelter",children:"DCAS In Shelter"}),e.jsx(x,{value:"DCAS_in_foster",children:"DCAS In Foster"}),e.jsx(x,{value:"FCAS_in_shelter",children:"FCAS In Shelter"}),e.jsx(x,{value:"FCAS_in_foster",children:"FCAS In Foster"}),e.jsx(x,{value:"CAC_in_shelter",children:"CAC In Shelter"}),e.jsx(x,{value:"CAC_in_foster",children:"CAC In Foster"})]})]})]})})]}),e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("span",{className:"text-gray-600 font-medium",children:[T.length," of ",I.length," descriptions"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>{const e=T.map(e=>e.animal_id);A(new Set(e))},className:"text-xs",children:"Select All"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>{A(new Set)},className:"text-xs",children:"Clear All"})]})]}),e.jsx(s,{children:e.jsx(o,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Pictures"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider border-l-2 border-gray-300",children:"Short Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32 border-l border-gray-200",children:"Links"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-24 border-l border-gray-200",children:"Add to Post"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map((n,t)=>e.jsxs("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 text-sm font-medium text-gray-900 truncate bg-gray-50 text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:D(n.name||"")}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"DCAS"===n.shelter_location?"Dekalb":"FCAS"===n.shelter_location?"Fulton":"CAC"===n.shelter_location?"CAC":n.shelter_location||"Unknown"}),n.location_kennel&&n.location_kennel.toLowerCase().includes("foster")||n.location_room&&n.location_room.toLowerCase().includes("foster")?e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"In Foster"}):null]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900",children:e.jsx("div",{className:"relative h-16 w-20",children:(()=>{const t=(e=>{const n=[];return e.mini_pic_1&&n.push(e.mini_pic_1),e.mini_pic_2&&n.push(e.mini_pic_2),e.mini_pic_3&&n.push(e.mini_pic_3),n})(n),r=v[n.animal_id]||0,s=t[r],a=s?(e=>{if(!e||""===e.trim()||"N/A"===e)return null;const n=e.trim();if(n.includes("petango.com"))return n;if(n.includes("drive.google.com")){const e=n.match(/\/d\/([a-zA-Z0-9-_]+)/)?.[1];return e?`https://drive.google.com/uc?id=${e}`:null}return n})(s):null,l=t.length>1;return a?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:a,alt:`${D(n.name||"")} - Photo ${r+1}`,className:"h-16 w-16 object-cover rounded border border-gray-200 mx-auto",loading:"lazy",onError:e=>{e.currentTarget.style.display="none"}}),l&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{return e=n.animal_id,r=t.length,void N(n=>({...n,[e]:(n[e]||-1+r)%r}));var e,r},className:"absolute -left-6 top-1/2 transform -translate-y-1/2 bg-gray-800/90 backdrop-blur-sm p-1 rounded-full hover:bg-gray-700 transition-colors duration-200 shadow-sm",children:e.jsx(p,{className:"h-3 w-3 text-white"})}),e.jsx("button",{onClick:()=>{return e=n.animal_id,r=t.length,void N(n=>({...n,[e]:(n[e]||1)%r}));var e,r},className:"absolute -right-6 top-1/2 transform -translate-y-1/2 bg-gray-800/90 backdrop-blur-sm p-1 rounded-full hover:bg-gray-700 transition-colors duration-200 shadow-sm",children:e.jsx(b,{className:"h-3 w-3 text-white"})}),e.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-1",children:t.map((t,s)=>e.jsx("button",{onClick:()=>((e,n)=>{N(t=>({...t,[e]:n}))})(n.animal_id,s),className:"w-1.5 h-1.5 rounded-full transition-colors duration-200 "+(s===r?"bg-white shadow-sm":"bg-white/60")},s))})]})]}):e.jsx("div",{className:"h-16 w-16 bg-gray-100 rounded border border-gray-200 flex items-center justify-center mx-auto",children:e.jsx(g,{className:"h-6 w-6 text-gray-400"})})})()})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 border-l-2 border-gray-300",children:e.jsx("div",{className:"whitespace-pre-wrap break-words leading-relaxed",children:F(n.chuya_breed_ai||"")})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 border-l border-gray-200",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[n.adopets_url&&e.jsx("a",{href:n.adopets_url,target:"_blank",rel:"noopener noreferrer",className:"border border-purple-200 text-purple-700 hover:bg-purple-50 px-2 py-1 rounded text-xs text-center transition-colors",children:"Adopets"}),n.asana_permalink_url&&e.jsx("a",{href:n.asana_permalink_url,target:"_blank",rel:"noopener noreferrer",className:"border border-teal-300 text-teal-600 hover:bg-teal-50 px-2 py-1 rounded text-xs text-center transition-colors",children:"Asana"})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 border-l border-gray-200",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("input",{type:"checkbox",checked:k.has(n.animal_id),onChange:()=>{return e=n.animal_id,void A(n=>{const t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t});var e},className:"h-4 w-4 text-orange-500 border-gray-300 rounded focus:ring-orange-500 focus:ring-2"})})})]},n.animal_id))})]})})})}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(r,{size:"lg",className:"bg-orange-500 hover:bg-orange-600 text-white px-8 py-4 text-lg font-semibold",onClick:()=>{const e=T.filter(e=>k.has(e.animal_id));if(0===e.length)return void alert("Please select at least one dog to generate posts.");const n=e.reduce((e,n)=>{let t="Other";return n.location_kennel&&n.location_kennel.toLowerCase().includes("foster")||n.location_room&&n.location_room.toLowerCase().includes("foster")?t="In Foster":"DCAS"===n.shelter_location?t="Dekalb - In Shelter":"FCAS"===n.shelter_location?t="Fulton - In Shelter":"CAC"===n.shelter_location&&(t="Community Animal Center"),e[t]||(e[t]=[]),e[t].push(n),e},{});let t="";"all"!==j&&(t+="<b>Resembles "+j+"</b>\n\n");["Fulton - In Shelter","Dekalb - In Shelter","Community Animal Center","In Foster","Other"].forEach(e=>{n[e]&&n[e].length>0&&("Dekalb - In Shelter"===e?t+="<b>🌾 Dekalb - In Shelter: <i>3280 Chamblee Dunwoody Rd, Chamblee, GA 30341</i></b>\n\n":"Community Animal Center"===e?t+="<b>🐶 Community Animal Center: <i>3180 Presidential Dr, Atlanta, GA 30340</i></b>\n\n":"Fulton - In Shelter"===e?t+="<b>🏛️ Fulton - In Shelter: <i>1251 Fulton Industrial Blvd NW, Atlanta, GA 30336</i></b>\n\n":"In Foster"===e&&(t+="🏡 Available now in foster. Apply at the link — if you don't hear back within a day, follow up here: facebook.com/groups/adoptablepetsoflifeline 🐾\n\n"),n[e].forEach(e=>{const n=F(e.chuya_breed_ai||""),r=D(e.name||"");let s=n;n.includes(r+" -")?s=n.replace(r+" -","<b>"+r+"</b> -"):n.startsWith(r)&&(s="<b>"+r+"</b>"+n.substring(r.length)),t+=s+"\n\n",e.adopets_url&&(t+=e.adopets_url+"\n\n")}))}),t+='🎭 Resemblance ≠ reality. We don\'t DNA test — so your "Husky mix" might just be a dramatic mutt with eyeliner. 🧬';const r=`\n                <!DOCTYPE html>\n                <html lang="en">\n                <head>\n                    <meta charset="UTF-8">\n                    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n                    <title>Breed Resemblance Posts - ${e.length} Dogs</title>\n                    <style>\n                        body {\n                            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n                            line-height: 1.6;\n                            margin: 0;\n                            padding: 20px;\n                            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);\n                            min-height: 100vh;\n                        }\n                        .container {\n                            max-width: 600px;\n                            margin: 0 auto;\n                            background: white;\n                            border-radius: 12px;\n                            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n                            overflow: hidden;\n                        }\n                        .header {\n                            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);\n                            color: white;\n                            padding: 20px;\n                            text-align: center;\n                        }\n                        .header h1 {\n                            margin: 0;\n                            font-size: 24px;\n                            font-weight: bold;\n                        }\n                        .header p {\n                            margin: 10px 0 0 0;\n                            opacity: 0.9;\n                        }\n                        .content {\n                            padding: 20px;\n                        }\n                        .text-box {\n                            background: #f9fafb;\n                            border: 2px solid #e5e7eb;\n                            border-radius: 8px;\n                            padding: 20px;\n                            font-family: 'Courier New', monospace;\n                            font-size: 14px;\n                            line-height: 1.6;\n                            white-space: pre-wrap;\n                            color: #374151;\n                            min-height: 400px;\n                            overflow-y: auto;\n                        }\n                        .copy-button {\n                            background: #f97316;\n                            color: white;\n                            border: none;\n                            padding: 12px 24px;\n                            border-radius: 6px;\n                            cursor: pointer;\n                            font-weight: 500;\n                            margin-top: 15px;\n                            width: 100%;\n                        }\n                        .copy-button:hover {\n                            background: #ea580c;\n                        }\n                        .footer {\n                            text-align: center;\n                            padding: 20px;\n                            color: #6b7280;\n                            font-size: 14px;\n                            border-top: 1px solid #e5e7eb;\n                        }\n                        .print-button {\n                            position: fixed;\n                            top: 20px;\n                            right: 20px;\n                            background: #f97316;\n                            color: white;\n                            border: none;\n                            padding: 10px 16px;\n                            border-radius: 6px;\n                            cursor: pointer;\n                            font-weight: 500;\n                        }\n                        .print-button:hover {\n                            background: #ea580c;\n                        }\n                        @media print {\n                            .print-button, .copy-button {\n                                display: none;\n                            }\n                            body {\n                                background: white;\n                            }\n                            .container {\n                                box-shadow: none;\n                            }\n                        }\n                    </style>\n                </head>\n                <body>\n                    <button class="print-button" onclick="window.print()">🖨️ Print</button>\n                    <div class="container">\n                        <div class="header">\n                            <h1>Breed Resemblance Posts</h1>\n                            <p>${e.length} selected dog${1!==e.length?"s":""} ready for social media</p>\n                        </div>\n                        <div class="content">\n                            <div class="text-box" id="copyText">${t}</div>\n                            <button class="copy-button" onclick="copyToClipboard()">📋 Copy to Clipboard</button>\n                        </div>\n                        <div class="footer">\n                            <p>Generated by Paw Poster • To be seen is to be saved</p>\n                        </div>\n                    </div>\n                    \n                    <script>\n                        function copyToClipboard() {\n                            const textBox = document.getElementById('copyText');\n                            const text = textBox.textContent || textBox.innerText;\n                            \n                            navigator.clipboard.writeText(text).then(function() {\n                                const button = document.querySelector('.copy-button');\n                                button.textContent = '✅ Copied!';\n                                button.style.background = '#10b981';\n                                \n                                setTimeout(function() {\n                                    button.textContent = '📋 Copy to Clipboard';\n                                    button.style.background = '#f97316';\n                                }, 2000);\n                            }).catch(function(err) {\n                                console.error('Could not copy text: ', err);\n                                alert('Copy failed. Please manually select and copy the text.');\n                            });\n                        }\n                    <\/script>\n                </body>\n                </html>\n              `,s=window.open("","_blank","width=700,height=800,scrollbars=yes,resizable=yes");s?(s.document.write(r),s.document.close()):alert("Please allow pop-ups to view the breed resemblance posts.")},children:"Generate Breed Resemblance Posts"})}),0===T.length&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-8xl mb-6",children:"📝"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"No descriptions found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Try adjusting your search criteria to find more descriptions!"}),e.jsx(r,{onClick:()=>{y(""),w("all"),_("all")},className:"bg-orange-500 hover:bg-orange-600",children:"Clear Filters"})]})]})})};export{f as default};
