import{j as e}from"./ui-vendor-CVcv4Zzz.js";import{r as s}from"./react-vendor-tkGVC3Du.js";import{u as a}from"./query-vendor-B8TzFr-Q.js";import{B as r,C as l,h as t,i,a as n,I as c,S as d,b as o,d as x,e as m,f as h,j as u}from"./neon-api-xUKyYXJg.js";import{A as g,E as p}from"./icons-Y8uGFleL.js";import"./index-BaER_2oD.js";const b=()=>{const[b,j]=s.useState(""),[f,_]=s.useState("all"),[N,y]=s.useState("all"),[C,w]=s.useState("name"),[v,A]=s.useState("asc"),k=e=>{if(!e)return[];const s=e.split(",").map(e=>e.trim()).filter(e=>e.length>0).map(e=>e.replace(/\s+/g," ").trim()).map(e=>{const s=e.toLowerCase();return s.includes("pit bull")||s.includes("pitbull")||s.includes("american pit bull")||s.includes("staffordshire")?"Pit Bull / Staffordshire":s.includes("boxer")?"Boxer":s.includes("labrador")||s.includes("lab mix")?"Labrador Retriever":s.includes("german shepherd")?"German Shepherd":s.includes("husky")||s.includes("alaskan malamute")?"Husky / Northern Breed":s.includes("bulldog")||s.includes("american bulldog")||s.includes("french bulldog")||s.includes("english bulldog")?"Bulldog":s.includes("belgian malinois")||s.includes("belgian shepherd")?"Belgian Malinois":s.includes("rottweiler")?"Rottweiler":s.includes("cane corso")?"Cane Corso":s.includes("border collie")?"Border Collie":s.includes("chihuahua")?"Chihuahua":s.includes("great dane")?"Great Dane":!s.includes("terrier")||s.includes("pit bull")||s.includes("staffordshire")?s.includes("retriever")&&!s.includes("labrador")?"Retriever":s.includes("shepherd")&&!s.includes("german")?"Shepherd":s.includes("mixed breed")||s.includes("mix")?"Mixed Breed":s.includes("akita")?"Akita":e:"Terrier"});return[...new Set(s)]},{data:S=[],isLoading:D,error:F}=a({queryKey:["shortDescriptions"],queryFn:u,staleTime:432e5,gcTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),L=s.useMemo(()=>{const e=[];S.forEach(s=>{if(s.breed_ai){const a=k(s.breed_ai);e.push(...a)}});return[...new Set(e)].sort()},[S]),I=s.useMemo(()=>{let e=S.filter(e=>{const s=""===b||e.name?.toLowerCase().includes(b.toLowerCase())||e.animal_id?.toLowerCase().includes(b.toLowerCase())||e.breed_ai?.toLowerCase().includes(b.toLowerCase())||e.chuya_breed_ai?.toLowerCase().includes(b.toLowerCase()),a="all"===f||k(e.breed_ai).includes(f),r=e.location_kennel&&e.location_kennel.toLowerCase().includes("foster")||e.location_room&&e.location_room.toLowerCase().includes("foster");let l=!0;switch(N){case"all":default:l=!0;break;case"all_in_foster":l=r;break;case"all_in_shelter":l=!r;break;case"DCAS_in_shelter":l="DCAS"===e.shelter_location&&!r;break;case"DCAS_in_foster":l=r&&"DCAS"===e.shelter_location;break;case"FCAS_in_shelter":l="FCAS"===e.shelter_location&&!r;break;case"FCAS_in_foster":l=r&&"FCAS"===e.shelter_location;break;case"CAC_in_shelter":l="CAC"===e.shelter_location&&!r;break;case"CAC_in_foster":l=r&&"CAC"===e.shelter_location}return s&&a&&l});return e.sort((e,s)=>{let a="",r="";switch(C){case"name":default:a=e.name||"",r=s.name||"";break;case"animal_id":a=e.animal_id||"",r=s.animal_id||"";break;case"breed_ai":a=e.breed_ai||"",r=s.breed_ai||""}const l=a.localeCompare(r);return"asc"===v?l:-l}),e},[S,b,f,C,v,N]),B=e=>{C===e?A("asc"===v?"desc":"asc"):(w(e),A("asc"))};return D?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-lg text-gray-600",children:"Loading short descriptions..."})})})}):F?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-8xl mb-6",children:"😢"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Oops! Something went wrong"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"We couldn't fetch the short descriptions right now"}),e.jsx(r,{onClick:()=>window.location.reload(),className:"bg-orange-500 hover:bg-orange-600",children:"Try Again"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Short Descriptions"}),e.jsx("p",{className:"text-gray-600",children:"AI-generated short descriptions for rescue dogs"})]}),e.jsxs(l,{className:"mb-6",children:[e.jsx(t,{children:e.jsx(i,{children:"Filters"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(c,{placeholder:"Search by name, ID, or resemblance...",value:b,onChange:e=>j(e.target.value),className:"w-full"})}),e.jsxs(d,{value:f,onValueChange:_,children:[e.jsx(o,{className:"w-48",children:e.jsx(x,{placeholder:"Resembles All"})}),e.jsxs(m,{children:[e.jsx(h,{value:"all",children:"Resembles All"}),L.map(s=>e.jsx(h,{value:s,children:s},s))]})]}),e.jsxs(d,{value:N,onValueChange:y,children:[e.jsx(o,{className:"w-64",children:e.jsx(x,{placeholder:"Location"})}),e.jsxs(m,{children:[e.jsx(h,{value:"all",children:"All Dogs"}),e.jsx(h,{value:"all_in_shelter",children:"All In Shelter"}),e.jsx(h,{value:"all_in_foster",children:"All In Foster"}),e.jsx(h,{value:"DCAS_in_shelter",children:"DCAS In Shelter"}),e.jsx(h,{value:"DCAS_in_foster",children:"DCAS In Foster"}),e.jsx(h,{value:"FCAS_in_shelter",children:"FCAS In Shelter"}),e.jsx(h,{value:"FCAS_in_foster",children:"FCAS In Foster"}),e.jsx(h,{value:"CAC_in_shelter",children:"CAC In Shelter"}),e.jsx(h,{value:"CAC_in_foster",children:"CAC In Foster"})]})]})]})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"text-gray-600 font-medium",children:[I.length," of ",S.length," descriptions"]})}),e.jsx(l,{children:e.jsx(n,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:e.jsxs("button",{onClick:()=>B("name"),className:"flex items-center gap-1 hover:text-gray-700",children:["Name",e.jsx(g,{className:"h-4 w-4"})]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:e.jsxs("button",{onClick:()=>B("animal_id"),className:"flex items-center gap-1 hover:text-gray-700",children:["Animal ID",e.jsx(g,{className:"h-4 w-4"})]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:e.jsxs("button",{onClick:()=>B("breed_ai"),className:"flex items-center gap-1 hover:text-gray-700",children:["Breed AI",e.jsx(g,{className:"h-4 w-4"})]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-l-2 border-gray-300",children:"Short Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24 border-l border-gray-200",children:"Links"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.map((s,a)=>e.jsxs("tr",{className:a%2==0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 text-sm font-medium text-gray-900 truncate bg-gray-50",children:s.name||"N/A"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 truncate bg-gray-50",children:s.animal_id}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 truncate bg-gray-50",children:s.breed_ai||"N/A"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 border-l-2 border-gray-300",children:e.jsx("div",{className:"whitespace-pre-wrap break-words leading-relaxed",children:s.chuya_breed_ai||"No description available"})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 border-l border-gray-200",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[s.adopets_url&&e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>window.open(s.adopets_url,"_blank"),className:"flex items-center gap-1 text-xs",children:[e.jsx(p,{className:"h-3 w-3"}),"Adopets"]}),s.asana_permalink_url&&e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>window.open(s.asana_permalink_url,"_blank"),className:"flex items-center gap-1 text-xs",children:[e.jsx(p,{className:"h-3 w-3"}),"Asana"]})]})})]},s.animal_id))})]})})})}),0===I.length&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-8xl mb-6",children:"📝"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"No descriptions found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Try adjusting your search criteria to find more descriptions!"}),e.jsx(r,{onClick:()=>{j(""),_("all"),y("all")},className:"bg-orange-500 hover:bg-orange-600",children:"Clear Filters"})]})]})})};export{b as default};
