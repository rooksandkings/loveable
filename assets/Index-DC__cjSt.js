var Hr=s=>{throw TypeError(s)};var zt=(s,t,e)=>t.has(s)||Hr("Cannot "+e);var Q=(s,t,e)=>(zt(s,t,"read from private field"),e?e.call(s):t.get(s)),Se=(s,t,e)=>t.has(s)?Hr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),he=(s,t,e,o)=>(zt(s,t,"write to private field"),o?o.call(s,e):t.set(s,e),e),pe=(s,t,e)=>(zt(s,t,"access private method"),e);import{r as k,j as x,S as wi,i as _r,k as ut,c as Er,l as kt,m as fs,d as Le,u as We,P as be,h as ue,n as xi,b as ds,e as ps,o as Si,p as _i,q as Ei,s as Ci,F as Ai,D as Ii,R as Pe}from"./ui-B0V4iUj-.js";import{S as Ri,p as Vr,r as Be,s as tr,a as Nt,n as rr,i as sr,b as Wr,t as Ni,f as Pi,c as Ti,d as Gr,e as ms,g as Mi,u as Li,h as me,j as ji,k as gs,R as ki,V as Bi,A as Oi,C as Di,l as Fi}from"./index-CwBcXvBY.js";import"./vendor-DJG_os-6.js";var Ae,ee,xt,Ee,Ze,ot,$e,He,St,at,lt,Je,Xe,Ve,ct,te,yt,nr,ir,or,ar,lr,cr,ur,ys,hs,Ui=(hs=class extends Ri{constructor(t,e){super();Se(this,te);Se(this,Ae);Se(this,ee);Se(this,xt);Se(this,Ee);Se(this,Ze);Se(this,ot);Se(this,$e);Se(this,He);Se(this,St);Se(this,at);Se(this,lt);Se(this,Je);Se(this,Xe);Se(this,Ve);Se(this,ct,new Set);this.options=e,he(this,Ae,t),he(this,He,null),he(this,$e,Vr()),this.options.experimental_prefetchInRender||Q(this,$e).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Q(this,ee).addObserver(this),zr(Q(this,ee),this.options)?pe(this,te,yt).call(this):this.updateResult(),pe(this,te,ar).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return hr(Q(this,ee),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return hr(Q(this,ee),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,pe(this,te,lr).call(this),pe(this,te,cr).call(this),Q(this,ee).removeObserver(this)}setOptions(t){const e=this.options,o=Q(this,ee);if(this.options=Q(this,Ae).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Be(this.options.enabled,Q(this,ee))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");pe(this,te,ur).call(this),Q(this,ee).setOptions(this.options),e._defaulted&&!tr(this.options,e)&&Q(this,Ae).getQueryCache().notify({type:"observerOptionsUpdated",query:Q(this,ee),observer:this});const a=this.hasListeners();a&&Kr(Q(this,ee),o,this.options,e)&&pe(this,te,yt).call(this),this.updateResult(),a&&(Q(this,ee)!==o||Be(this.options.enabled,Q(this,ee))!==Be(e.enabled,Q(this,ee))||Nt(this.options.staleTime,Q(this,ee))!==Nt(e.staleTime,Q(this,ee)))&&pe(this,te,nr).call(this);const i=pe(this,te,ir).call(this);a&&(Q(this,ee)!==o||Be(this.options.enabled,Q(this,ee))!==Be(e.enabled,Q(this,ee))||i!==Q(this,Ve))&&pe(this,te,or).call(this,i)}getOptimisticResult(t){const e=Q(this,Ae).getQueryCache().build(Q(this,Ae),t),o=this.createResult(e,t);return qi(this,o)&&(he(this,Ee,o),he(this,ot,this.options),he(this,Ze,Q(this,ee).state)),o}getCurrentResult(){return Q(this,Ee)}trackResult(t,e){return new Proxy(t,{get:(o,a)=>(this.trackProp(a),e==null||e(a),Reflect.get(o,a))})}trackProp(t){Q(this,ct).add(t)}getCurrentQuery(){return Q(this,ee)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=Q(this,Ae).defaultQueryOptions(t),o=Q(this,Ae).getQueryCache().build(Q(this,Ae),e);return o.fetch().then(()=>this.createResult(o,e))}fetch(t){return pe(this,te,yt).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Q(this,Ee)))}createResult(t,e){var A;const o=Q(this,ee),a=this.options,i=Q(this,Ee),l=Q(this,Ze),n=Q(this,ot),v=t!==o?t.state:Q(this,xt),{state:g}=t;let b={...g},y=!1,w;if(e._optimisticResults){const j=this.hasListeners(),L=!j&&zr(t,e),U=j&&Kr(t,o,e,a);(L||U)&&(b={...b,...Ti(g.data,t.options)}),e._optimisticResults==="isRestoring"&&(b.fetchStatus="idle")}let{error:c,errorUpdatedAt:h,status:p}=b;w=b.data;let S=!1;if(e.placeholderData!==void 0&&w===void 0&&p==="pending"){let j;i!=null&&i.isPlaceholderData&&e.placeholderData===(n==null?void 0:n.placeholderData)?(j=i.data,S=!0):j=typeof e.placeholderData=="function"?e.placeholderData((A=Q(this,lt))==null?void 0:A.state.data,Q(this,lt)):e.placeholderData,j!==void 0&&(p="success",w=Gr(i==null?void 0:i.data,j,e),y=!0)}if(e.select&&w!==void 0&&!S)if(i&&w===(l==null?void 0:l.data)&&e.select===Q(this,St))w=Q(this,at);else try{he(this,St,e.select),w=e.select(w),w=Gr(i==null?void 0:i.data,w,e),he(this,at,w),he(this,He,null)}catch(j){he(this,He,j)}Q(this,He)&&(c=Q(this,He),w=Q(this,at),h=Date.now(),p="error");const _=b.fetchStatus==="fetching",C=p==="pending",P=p==="error",T=C&&_,E=w!==void 0,I={status:p,fetchStatus:b.fetchStatus,isPending:C,isSuccess:p==="success",isError:P,isInitialLoading:T,isLoading:T,data:w,dataUpdatedAt:b.dataUpdatedAt,error:c,errorUpdatedAt:h,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>v.dataUpdateCount||b.errorUpdateCount>v.errorUpdateCount,isFetching:_,isRefetching:_&&!C,isLoadingError:P&&!E,isPaused:b.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:P&&E,isStale:Cr(t,e),refetch:this.refetch,promise:Q(this,$e)};if(this.options.experimental_prefetchInRender){const j=$=>{I.status==="error"?$.reject(I.error):I.data!==void 0&&$.resolve(I.data)},L=()=>{const $=he(this,$e,I.promise=Vr());j($)},U=Q(this,$e);switch(U.status){case"pending":t.queryHash===o.queryHash&&j(U);break;case"fulfilled":(I.status==="error"||I.data!==U.value)&&L();break;case"rejected":(I.status!=="error"||I.error!==U.reason)&&L();break}}return I}updateResult(){const t=Q(this,Ee),e=this.createResult(Q(this,ee),this.options);if(he(this,Ze,Q(this,ee).state),he(this,ot,this.options),Q(this,Ze).data!==void 0&&he(this,lt,Q(this,ee)),tr(e,t))return;he(this,Ee,e);const o=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!Q(this,ct).size)return!0;const l=new Set(i??Q(this,ct));return this.options.throwOnError&&l.add("error"),Object.keys(Q(this,Ee)).some(n=>{const f=n;return Q(this,Ee)[f]!==t[f]&&l.has(f)})};pe(this,te,ys).call(this,{listeners:o()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&pe(this,te,ar).call(this)}},Ae=new WeakMap,ee=new WeakMap,xt=new WeakMap,Ee=new WeakMap,Ze=new WeakMap,ot=new WeakMap,$e=new WeakMap,He=new WeakMap,St=new WeakMap,at=new WeakMap,lt=new WeakMap,Je=new WeakMap,Xe=new WeakMap,Ve=new WeakMap,ct=new WeakMap,te=new WeakSet,yt=function(t){pe(this,te,ur).call(this);let e=Q(this,ee).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(rr)),e},nr=function(){pe(this,te,lr).call(this);const t=Nt(this.options.staleTime,Q(this,ee));if(sr||Q(this,Ee).isStale||!Wr(t))return;const o=Ni(Q(this,Ee).dataUpdatedAt,t)+1;he(this,Je,setTimeout(()=>{Q(this,Ee).isStale||this.updateResult()},o))},ir=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Q(this,ee)):this.options.refetchInterval)??!1},or=function(t){pe(this,te,cr).call(this),he(this,Ve,t),!(sr||Be(this.options.enabled,Q(this,ee))===!1||!Wr(Q(this,Ve))||Q(this,Ve)===0)&&he(this,Xe,setInterval(()=>{(this.options.refetchIntervalInBackground||Pi.isFocused())&&pe(this,te,yt).call(this)},Q(this,Ve)))},ar=function(){pe(this,te,nr).call(this),pe(this,te,or).call(this,pe(this,te,ir).call(this))},lr=function(){Q(this,Je)&&(clearTimeout(Q(this,Je)),he(this,Je,void 0))},cr=function(){Q(this,Xe)&&(clearInterval(Q(this,Xe)),he(this,Xe,void 0))},ur=function(){const t=Q(this,Ae).getQueryCache().build(Q(this,Ae),this.options);if(t===Q(this,ee))return;const e=Q(this,ee);he(this,ee,t),he(this,xt,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},ys=function(t){ms.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(Q(this,Ee))}),Q(this,Ae).getQueryCache().notify({query:Q(this,ee),type:"observerResultsUpdated"})})},hs);function Qi(s,t){return Be(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function zr(s,t){return Qi(s,t)||s.state.data!==void 0&&hr(s,t,t.refetchOnMount)}function hr(s,t,e){if(Be(t.enabled,s)!==!1){const o=typeof e=="function"?e(s):e;return o==="always"||o!==!1&&Cr(s,t)}return!1}function Kr(s,t,e,o){return(s!==t||Be(o.enabled,s)===!1)&&(!e.suspense||s.state.status!=="error")&&Cr(s,e)}function Cr(s,t){return Be(t.enabled,s)!==!1&&s.isStaleByTime(Nt(t.staleTime,s))}function qi(s,t){return!tr(s.getCurrentResult(),t)}var vs=k.createContext(!1),$i=()=>k.useContext(vs);vs.Provider;function Hi(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Vi=k.createContext(Hi()),Wi=()=>k.useContext(Vi),Gi=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},zi=s=>{k.useEffect(()=>{s.clearReset()},[s])},Ki=({result:s,errorResetBoundary:t,throwOnError:e,query:o,suspense:a})=>s.isError&&!t.isReset()&&!s.isFetching&&o&&(a&&s.data===void 0||Mi(e,[s.error,o])),Yi=s=>{const t=s.staleTime;s.suspense&&(s.staleTime=typeof t=="function"?(...e)=>Math.max(t(...e),1e3):Math.max(t??1e3,1e3),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3)))},Zi=(s,t)=>s.isLoading&&s.isFetching&&!t,Ji=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,Yr=(s,t,e)=>t.fetchOptimistic(s).catch(()=>{e.clearReset()});function Xi(s,t,e){var b,y,w,c,h;const o=Li(),a=$i(),i=Wi(),l=o.defaultQueryOptions(s);(y=(b=o.getDefaultOptions().queries)==null?void 0:b._experimental_beforeQuery)==null||y.call(b,l),l._optimisticResults=a?"isRestoring":"optimistic",Yi(l),Gi(l,i),zi(i);const n=!o.getQueryCache().get(l.queryHash),[f]=k.useState(()=>new t(o,l)),v=f.getOptimisticResult(l),g=!a&&s.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(p=>{const S=g?f.subscribe(ms.batchCalls(p)):rr;return f.updateResult(),S},[f,g]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),k.useEffect(()=>{f.setOptions(l)},[l,f]),Ji(l,v))throw Yr(l,f,i);if(Ki({result:v,errorResetBoundary:i,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw v.error;if((c=(w=o.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||c.call(w,l,v),l.experimental_prefetchInRender&&!sr&&Zi(v,a)){const p=n?Yr(l,f,i):(h=o.getQueryCache().get(l.queryHash))==null?void 0:h.promise;p==null||p.catch(rr).finally(()=>{f.updateResult()})}return l.notifyOnChangeProps?v:f.trackResult(v)}function eo(s,t){return Xi(s,Ui)}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ro=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,o)=>o?o.toUpperCase():e.toLowerCase()),Zr=s=>{const t=ro(s);return t.charAt(0).toUpperCase()+t.slice(1)},bs=(...s)=>s.filter((t,e,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===e).join(" ").trim(),so=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var no={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=k.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:o,className:a="",children:i,iconNode:l,...n},f)=>k.createElement("svg",{ref:f,...no,width:t,height:t,stroke:s,strokeWidth:o?Number(e)*24/Number(t):e,className:bs("lucide",a),...!i&&!so(n)&&{"aria-hidden":"true"},...n},[...l.map(([v,g])=>k.createElement(v,g)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(s,t)=>{const e=k.forwardRef(({className:o,...a},i)=>k.createElement(io,{ref:i,iconNode:t,className:bs(`lucide-${to(Zr(s))}`,`lucide-${s}`,o),...a}));return e.displayName=Zr(s),e};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],ao=we("arrow-up-down",oo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],co=we("calendar",lo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ho=we("check",uo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ws=we("chevron-down",fo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],mo=we("chevron-left",po);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yo=we("chevron-right",go);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],bo=we("chevron-up",vo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],xo=we("clock",wo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]],Kt=we("dog",So);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Eo=we("external-link",_o);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ao=we("grid-3x3",Co);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Ro=we("heart",Io);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Po=we("list",No);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Mo=we("map-pin",To);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],jo=we("ruler",Lo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Jr=we("search",ko);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Oo=we("star",Bo);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]],Fo=we("weight",Do),fr=k.forwardRef(({className:s,type:t,...e},o)=>x.jsx("input",{type:t,className:me("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:o,value:e.value||"",...e}));fr.displayName="Input";const Xr=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,es=ji,Ar=(s,t)=>e=>{var o;if((t==null?void 0:t.variants)==null)return es(s,e==null?void 0:e.class,e==null?void 0:e.className);const{variants:a,defaultVariants:i}=t,l=Object.keys(a).map(v=>{const g=e==null?void 0:e[v],b=i==null?void 0:i[v];if(g===null)return null;const y=Xr(g)||Xr(b);return a[v][y]}),n=e&&Object.entries(e).reduce((v,g)=>{let[b,y]=g;return y===void 0||(v[b]=y),v},{}),f=t==null||(o=t.compoundVariants)===null||o===void 0?void 0:o.reduce((v,g)=>{let{class:b,className:y,...w}=g;return Object.entries(w).every(c=>{let[h,p]=c;return Array.isArray(p)?p.includes({...i,...n}[h]):{...i,...n}[h]===p})?[...v,b,y]:v},[]);return es(s,l,f,e==null?void 0:e.class,e==null?void 0:e.className)},Uo=Ar("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),wt=k.forwardRef(({className:s,variant:t,size:e,asChild:o=!1,...a},i)=>{const l=o?wi:"button";return x.jsx(l,{className:me(Uo({variant:t,size:e,className:s})),ref:i,...a})});wt.displayName="Button";function ts(s,[t,e]){return Math.min(e,Math.max(t,s))}function Qo(s){const t=k.useRef({value:s,previous:s});return k.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var qo=[" ","Enter","ArrowUp","ArrowDown"],$o=[" ","Enter"],et="Select",[Bt,Ot,Ho]=fs(et),[ht,Yl]=Er(et,[Ho,gs]),Dt=gs(),[Vo,Ge]=ht(et),[Wo,Go]=ht(et),xs=s=>{const{__scopeSelect:t,children:e,open:o,defaultOpen:a,onOpenChange:i,value:l,defaultValue:n,onValueChange:f,dir:v,name:g,autoComplete:b,disabled:y,required:w,form:c}=s,h=Dt(t),[p,S]=k.useState(null),[_,C]=k.useState(null),[P,T]=k.useState(!1),E=_r(v),[R,I]=ut({prop:o,defaultProp:a??!1,onChange:i,caller:et}),[A,j]=ut({prop:l,defaultProp:n,onChange:f,caller:et}),L=k.useRef(null),U=p?c||!!p.closest("form"):!0,[$,B]=k.useState(new Set),F=Array.from($).map(q=>q.props.value).join(";");return x.jsx(ki,{...h,children:x.jsxs(Vo,{required:w,scope:t,trigger:p,onTriggerChange:S,valueNode:_,onValueNodeChange:C,valueNodeHasChildren:P,onValueNodeHasChildrenChange:T,contentId:kt(),value:A,onValueChange:j,open:R,onOpenChange:I,dir:E,triggerPointerDownPosRef:L,disabled:y,children:[x.jsx(Bt.Provider,{scope:t,children:x.jsx(Wo,{scope:s.__scopeSelect,onNativeOptionAdd:k.useCallback(q=>{B(H=>new Set(H).add(q))},[]),onNativeOptionRemove:k.useCallback(q=>{B(H=>{const z=new Set(H);return z.delete(q),z})},[]),children:e})}),U?x.jsxs(Vs,{"aria-hidden":!0,required:w,tabIndex:-1,name:g,autoComplete:b,value:A,onChange:q=>j(q.target.value),disabled:y,form:c,children:[A===void 0?x.jsx("option",{value:""}):null,Array.from($)]},F):null]})})};xs.displayName=et;var Ss="SelectTrigger",_s=k.forwardRef((s,t)=>{const{__scopeSelect:e,disabled:o=!1,...a}=s,i=Dt(e),l=Ge(Ss,e),n=l.disabled||o,f=Le(t,l.onTriggerChange),v=Ot(e),g=k.useRef("touch"),[b,y,w]=Gs(h=>{const p=v().filter(C=>!C.disabled),S=p.find(C=>C.value===l.value),_=zs(p,h,S);_!==void 0&&l.onValueChange(_.value)}),c=h=>{n||(l.onOpenChange(!0),w()),h&&(l.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return x.jsx(Oi,{asChild:!0,...i,children:x.jsx(be.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:n,"data-disabled":n?"":void 0,"data-placeholder":Ws(l.value)?"":void 0,...a,ref:f,onClick:ue(a.onClick,h=>{h.currentTarget.focus(),g.current!=="mouse"&&c(h)}),onPointerDown:ue(a.onPointerDown,h=>{g.current=h.pointerType;const p=h.target;p.hasPointerCapture(h.pointerId)&&p.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(c(h),h.preventDefault())}),onKeyDown:ue(a.onKeyDown,h=>{const p=b.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&y(h.key),!(p&&h.key===" ")&&qo.includes(h.key)&&(c(),h.preventDefault())})})})});_s.displayName=Ss;var Es="SelectValue",Cs=k.forwardRef((s,t)=>{const{__scopeSelect:e,className:o,style:a,children:i,placeholder:l="",...n}=s,f=Ge(Es,e),{onValueNodeHasChildrenChange:v}=f,g=i!==void 0,b=Le(t,f.onValueNodeChange);return We(()=>{v(g)},[v,g]),x.jsx(be.span,{...n,ref:b,style:{pointerEvents:"none"},children:Ws(f.value)?x.jsx(x.Fragment,{children:l}):i})});Cs.displayName=Es;var zo="SelectIcon",As=k.forwardRef((s,t)=>{const{__scopeSelect:e,children:o,...a}=s;return x.jsx(be.span,{"aria-hidden":!0,...a,ref:t,children:o||"â–¼"})});As.displayName=zo;var Ko="SelectPortal",Is=s=>x.jsx(xi,{asChild:!0,...s});Is.displayName=Ko;var tt="SelectContent",Rs=k.forwardRef((s,t)=>{const e=Ge(tt,s.__scopeSelect),[o,a]=k.useState();if(We(()=>{a(new DocumentFragment)},[]),!e.open){const i=o;return i?ds.createPortal(x.jsx(Ns,{scope:s.__scopeSelect,children:x.jsx(Bt.Slot,{scope:s.__scopeSelect,children:x.jsx("div",{children:s.children})})}),i):null}return x.jsx(Ps,{...s,ref:t})});Rs.displayName=tt;var Me=10,[Ns,ze]=ht(tt),Yo="SelectContentImpl",Zo=Ci("SelectContent.RemoveScroll"),Ps=k.forwardRef((s,t)=>{const{__scopeSelect:e,position:o="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:n,sideOffset:f,align:v,alignOffset:g,arrowPadding:b,collisionBoundary:y,collisionPadding:w,sticky:c,hideWhenDetached:h,avoidCollisions:p,...S}=s,_=Ge(tt,e),[C,P]=k.useState(null),[T,E]=k.useState(null),R=Le(t,Y=>P(Y)),[I,A]=k.useState(null),[j,L]=k.useState(null),U=Ot(e),[$,B]=k.useState(!1),F=k.useRef(!1);k.useEffect(()=>{if(C)return Si(C)},[C]),_i();const q=k.useCallback(Y=>{const[re,...ge]=U().map(se=>se.ref.current),[oe]=ge.slice(-1),ie=document.activeElement;for(const se of Y)if(se===ie||(se==null||se.scrollIntoView({block:"nearest"}),se===re&&T&&(T.scrollTop=0),se===oe&&T&&(T.scrollTop=T.scrollHeight),se==null||se.focus(),document.activeElement!==ie))return},[U,T]),H=k.useCallback(()=>q([I,C]),[q,I,C]);k.useEffect(()=>{$&&H()},[$,H]);const{onOpenChange:z,triggerPointerDownPosRef:Z}=_;k.useEffect(()=>{if(C){let Y={x:0,y:0};const re=oe=>{var ie,se;Y={x:Math.abs(Math.round(oe.pageX)-(((ie=Z.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(oe.pageY)-(((se=Z.current)==null?void 0:se.y)??0))}},ge=oe=>{Y.x<=10&&Y.y<=10?oe.preventDefault():C.contains(oe.target)||z(!1),document.removeEventListener("pointermove",re),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",ge,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",ge,{capture:!0})}}},[C,z,Z]),k.useEffect(()=>{const Y=()=>z(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[z]);const[xe,ne]=Gs(Y=>{const re=U().filter(ie=>!ie.disabled),ge=re.find(ie=>ie.ref.current===document.activeElement),oe=zs(re,Y,ge);oe&&setTimeout(()=>oe.ref.current.focus())}),fe=k.useCallback((Y,re,ge)=>{const oe=!F.current&&!ge;(_.value!==void 0&&_.value===re||oe)&&(A(Y),oe&&(F.current=!0))},[_.value]),Oe=k.useCallback(()=>C==null?void 0:C.focus(),[C]),ke=k.useCallback((Y,re,ge)=>{const oe=!F.current&&!ge;(_.value!==void 0&&_.value===re||oe)&&L(Y)},[_.value]),Qe=o==="popper"?dr:Ts,De=Qe===dr?{side:n,sideOffset:f,align:v,alignOffset:g,arrowPadding:b,collisionBoundary:y,collisionPadding:w,sticky:c,hideWhenDetached:h,avoidCollisions:p}:{};return x.jsx(Ns,{scope:e,content:C,viewport:T,onViewportChange:E,itemRefCallback:fe,selectedItem:I,onItemLeave:Oe,itemTextRefCallback:ke,focusSelectedItem:H,selectedItemText:j,position:o,isPositioned:$,searchRef:xe,children:x.jsx(Ei,{as:Zo,allowPinchZoom:!0,children:x.jsx(Ai,{asChild:!0,trapped:_.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:ue(a,Y=>{var re;(re=_.trigger)==null||re.focus({preventScroll:!0}),Y.preventDefault()}),children:x.jsx(Ii,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:x.jsx(Qe,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:Y=>Y.preventDefault(),...S,...De,onPlaced:()=>B(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:ue(S.onKeyDown,Y=>{const re=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!re&&Y.key.length===1&&ne(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let oe=U().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const ie=Y.target,se=oe.indexOf(ie);oe=oe.slice(se+1)}setTimeout(()=>q(oe)),Y.preventDefault()}})})})})})})});Ps.displayName=Yo;var Jo="SelectItemAlignedPosition",Ts=k.forwardRef((s,t)=>{const{__scopeSelect:e,onPlaced:o,...a}=s,i=Ge(tt,e),l=ze(tt,e),[n,f]=k.useState(null),[v,g]=k.useState(null),b=Le(t,R=>g(R)),y=Ot(e),w=k.useRef(!1),c=k.useRef(!0),{viewport:h,selectedItem:p,selectedItemText:S,focusSelectedItem:_}=l,C=k.useCallback(()=>{if(i.trigger&&i.valueNode&&n&&v&&h&&p&&S){const R=i.trigger.getBoundingClientRect(),I=v.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),j=S.getBoundingClientRect();if(i.dir!=="rtl"){const ie=j.left-I.left,se=A.left-ie,_e=R.left-se,Ce=R.width+_e,dt=Math.max(Ce,I.width),nt=window.innerWidth-Me,qe=ts(se,[Me,Math.max(Me,nt-dt)]);n.style.minWidth=Ce+"px",n.style.left=qe+"px"}else{const ie=I.right-j.right,se=window.innerWidth-A.right-ie,_e=window.innerWidth-R.right-se,Ce=R.width+_e,dt=Math.max(Ce,I.width),nt=window.innerWidth-Me,qe=ts(se,[Me,Math.max(Me,nt-dt)]);n.style.minWidth=Ce+"px",n.style.right=qe+"px"}const L=y(),U=window.innerHeight-Me*2,$=h.scrollHeight,B=window.getComputedStyle(v),F=parseInt(B.borderTopWidth,10),q=parseInt(B.paddingTop,10),H=parseInt(B.borderBottomWidth,10),z=parseInt(B.paddingBottom,10),Z=F+q+$+z+H,xe=Math.min(p.offsetHeight*5,Z),ne=window.getComputedStyle(h),fe=parseInt(ne.paddingTop,10),Oe=parseInt(ne.paddingBottom,10),ke=R.top+R.height/2-Me,Qe=U-ke,De=p.offsetHeight/2,Y=p.offsetTop+De,re=F+q+Y,ge=Z-re;if(re<=ke){const ie=L.length>0&&p===L[L.length-1].ref.current;n.style.bottom="0px";const se=v.clientHeight-h.offsetTop-h.offsetHeight,_e=Math.max(Qe,De+(ie?Oe:0)+se+H),Ce=re+_e;n.style.height=Ce+"px"}else{const ie=L.length>0&&p===L[0].ref.current;n.style.top="0px";const _e=Math.max(ke,F+h.offsetTop+(ie?fe:0)+De)+ge;n.style.height=_e+"px",h.scrollTop=re-ke+h.offsetTop}n.style.margin=`${Me}px 0`,n.style.minHeight=xe+"px",n.style.maxHeight=U+"px",o==null||o(),requestAnimationFrame(()=>w.current=!0)}},[y,i.trigger,i.valueNode,n,v,h,p,S,i.dir,o]);We(()=>C(),[C]);const[P,T]=k.useState();We(()=>{v&&T(window.getComputedStyle(v).zIndex)},[v]);const E=k.useCallback(R=>{R&&c.current===!0&&(C(),_==null||_(),c.current=!1)},[C,_]);return x.jsx(ea,{scope:e,contentWrapper:n,shouldExpandOnScrollRef:w,onScrollButtonChange:E,children:x.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:x.jsx(be.div,{...a,ref:b,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Ts.displayName=Jo;var Xo="SelectPopperPosition",dr=k.forwardRef((s,t)=>{const{__scopeSelect:e,align:o="start",collisionPadding:a=Me,...i}=s,l=Dt(e);return x.jsx(Di,{...l,...i,ref:t,align:o,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dr.displayName=Xo;var[ea,Ir]=ht(tt,{}),pr="SelectViewport",Ms=k.forwardRef((s,t)=>{const{__scopeSelect:e,nonce:o,...a}=s,i=ze(pr,e),l=Ir(pr,e),n=Le(t,i.onViewportChange),f=k.useRef(0);return x.jsxs(x.Fragment,{children:[x.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),x.jsx(Bt.Slot,{scope:e,children:x.jsx(be.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:n,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ue(a.onScroll,v=>{const g=v.currentTarget,{contentWrapper:b,shouldExpandOnScrollRef:y}=l;if(y!=null&&y.current&&b){const w=Math.abs(f.current-g.scrollTop);if(w>0){const c=window.innerHeight-Me*2,h=parseFloat(b.style.minHeight),p=parseFloat(b.style.height),S=Math.max(h,p);if(S<c){const _=S+w,C=Math.min(c,_),P=_-C;b.style.height=C+"px",b.style.bottom==="0px"&&(g.scrollTop=P>0?P:0,b.style.justifyContent="flex-end")}}}f.current=g.scrollTop})})})]})});Ms.displayName=pr;var Ls="SelectGroup",[ta,ra]=ht(Ls),sa=k.forwardRef((s,t)=>{const{__scopeSelect:e,...o}=s,a=kt();return x.jsx(ta,{scope:e,id:a,children:x.jsx(be.div,{role:"group","aria-labelledby":a,...o,ref:t})})});sa.displayName=Ls;var js="SelectLabel",ks=k.forwardRef((s,t)=>{const{__scopeSelect:e,...o}=s,a=ra(js,e);return x.jsx(be.div,{id:a.id,...o,ref:t})});ks.displayName=js;var Lt="SelectItem",[na,Bs]=ht(Lt),Os=k.forwardRef((s,t)=>{const{__scopeSelect:e,value:o,disabled:a=!1,textValue:i,...l}=s,n=Ge(Lt,e),f=ze(Lt,e),v=n.value===o,[g,b]=k.useState(i??""),[y,w]=k.useState(!1),c=Le(t,_=>{var C;return(C=f.itemRefCallback)==null?void 0:C.call(f,_,o,a)}),h=kt(),p=k.useRef("touch"),S=()=>{a||(n.onValueChange(o),n.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return x.jsx(na,{scope:e,value:o,disabled:a,textId:h,isSelected:v,onItemTextChange:k.useCallback(_=>{b(C=>C||((_==null?void 0:_.textContent)??"").trim())},[]),children:x.jsx(Bt.ItemSlot,{scope:e,value:o,disabled:a,textValue:g,children:x.jsx(be.div,{role:"option","aria-labelledby":h,"data-highlighted":y?"":void 0,"aria-selected":v&&y,"data-state":v?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:c,onFocus:ue(l.onFocus,()=>w(!0)),onBlur:ue(l.onBlur,()=>w(!1)),onClick:ue(l.onClick,()=>{p.current!=="mouse"&&S()}),onPointerUp:ue(l.onPointerUp,()=>{p.current==="mouse"&&S()}),onPointerDown:ue(l.onPointerDown,_=>{p.current=_.pointerType}),onPointerMove:ue(l.onPointerMove,_=>{var C;p.current=_.pointerType,a?(C=f.onItemLeave)==null||C.call(f):p.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(l.onPointerLeave,_=>{var C;_.currentTarget===document.activeElement&&((C=f.onItemLeave)==null||C.call(f))}),onKeyDown:ue(l.onKeyDown,_=>{var P;((P=f.searchRef)==null?void 0:P.current)!==""&&_.key===" "||($o.includes(_.key)&&S(),_.key===" "&&_.preventDefault())})})})})});Os.displayName=Lt;var vt="SelectItemText",Ds=k.forwardRef((s,t)=>{const{__scopeSelect:e,className:o,style:a,...i}=s,l=Ge(vt,e),n=ze(vt,e),f=Bs(vt,e),v=Go(vt,e),[g,b]=k.useState(null),y=Le(t,S=>b(S),f.onItemTextChange,S=>{var _;return(_=n.itemTextRefCallback)==null?void 0:_.call(n,S,f.value,f.disabled)}),w=g==null?void 0:g.textContent,c=k.useMemo(()=>x.jsx("option",{value:f.value,disabled:f.disabled,children:w},f.value),[f.disabled,f.value,w]),{onNativeOptionAdd:h,onNativeOptionRemove:p}=v;return We(()=>(h(c),()=>p(c)),[h,p,c]),x.jsxs(x.Fragment,{children:[x.jsx(be.span,{id:f.textId,...i,ref:y}),f.isSelected&&l.valueNode&&!l.valueNodeHasChildren?ds.createPortal(i.children,l.valueNode):null]})});Ds.displayName=vt;var Fs="SelectItemIndicator",Us=k.forwardRef((s,t)=>{const{__scopeSelect:e,...o}=s;return Bs(Fs,e).isSelected?x.jsx(be.span,{"aria-hidden":!0,...o,ref:t}):null});Us.displayName=Fs;var mr="SelectScrollUpButton",Qs=k.forwardRef((s,t)=>{const e=ze(mr,s.__scopeSelect),o=Ir(mr,s.__scopeSelect),[a,i]=k.useState(!1),l=Le(t,o.onScrollButtonChange);return We(()=>{if(e.viewport&&e.isPositioned){let n=function(){const v=f.scrollTop>0;i(v)};const f=e.viewport;return n(),f.addEventListener("scroll",n),()=>f.removeEventListener("scroll",n)}},[e.viewport,e.isPositioned]),a?x.jsx($s,{...s,ref:l,onAutoScroll:()=>{const{viewport:n,selectedItem:f}=e;n&&f&&(n.scrollTop=n.scrollTop-f.offsetHeight)}}):null});Qs.displayName=mr;var gr="SelectScrollDownButton",qs=k.forwardRef((s,t)=>{const e=ze(gr,s.__scopeSelect),o=Ir(gr,s.__scopeSelect),[a,i]=k.useState(!1),l=Le(t,o.onScrollButtonChange);return We(()=>{if(e.viewport&&e.isPositioned){let n=function(){const v=f.scrollHeight-f.clientHeight,g=Math.ceil(f.scrollTop)<v;i(g)};const f=e.viewport;return n(),f.addEventListener("scroll",n),()=>f.removeEventListener("scroll",n)}},[e.viewport,e.isPositioned]),a?x.jsx($s,{...s,ref:l,onAutoScroll:()=>{const{viewport:n,selectedItem:f}=e;n&&f&&(n.scrollTop=n.scrollTop+f.offsetHeight)}}):null});qs.displayName=gr;var $s=k.forwardRef((s,t)=>{const{__scopeSelect:e,onAutoScroll:o,...a}=s,i=ze("SelectScrollButton",e),l=k.useRef(null),n=Ot(e),f=k.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return k.useEffect(()=>()=>f(),[f]),We(()=>{var g;const v=n().find(b=>b.ref.current===document.activeElement);(g=v==null?void 0:v.ref.current)==null||g.scrollIntoView({block:"nearest"})},[n]),x.jsx(be.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ue(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(o,50))}),onPointerMove:ue(a.onPointerMove,()=>{var v;(v=i.onItemLeave)==null||v.call(i),l.current===null&&(l.current=window.setInterval(o,50))}),onPointerLeave:ue(a.onPointerLeave,()=>{f()})})}),ia="SelectSeparator",Hs=k.forwardRef((s,t)=>{const{__scopeSelect:e,...o}=s;return x.jsx(be.div,{"aria-hidden":!0,...o,ref:t})});Hs.displayName=ia;var yr="SelectArrow",oa=k.forwardRef((s,t)=>{const{__scopeSelect:e,...o}=s,a=Dt(e),i=Ge(yr,e),l=ze(yr,e);return i.open&&l.position==="popper"?x.jsx(Fi,{...a,...o,ref:t}):null});oa.displayName=yr;var aa="SelectBubbleInput",Vs=k.forwardRef(({__scopeSelect:s,value:t,...e},o)=>{const a=k.useRef(null),i=Le(o,a),l=Qo(t);return k.useEffect(()=>{const n=a.current;if(!n)return;const f=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(f,"value").set;if(l!==t&&g){const b=new Event("change",{bubbles:!0});g.call(n,t),n.dispatchEvent(b)}},[l,t]),x.jsx(be.select,{...e,style:{...Bi,...e.style},ref:i,defaultValue:t})});Vs.displayName=aa;function Ws(s){return s===""||s===void 0}function Gs(s){const t=ps(s),e=k.useRef(""),o=k.useRef(0),a=k.useCallback(l=>{const n=e.current+l;t(n),function f(v){e.current=v,window.clearTimeout(o.current),v!==""&&(o.current=window.setTimeout(()=>f(""),1e3))}(n)},[t]),i=k.useCallback(()=>{e.current="",window.clearTimeout(o.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(o.current),[]),[e,a,i]}function zs(s,t,e){const a=t.length>1&&Array.from(t).every(v=>v===t[0])?t[0]:t,i=e?s.indexOf(e):-1;let l=la(s,Math.max(i,0));a.length===1&&(l=l.filter(v=>v!==e));const f=l.find(v=>v.textValue.toLowerCase().startsWith(a.toLowerCase()));return f!==e?f:void 0}function la(s,t){return s.map((e,o)=>s[(t+o)%s.length])}var ca=xs,Ks=_s,ua=Cs,ha=As,fa=Is,Ys=Rs,da=Ms,Zs=ks,Js=Os,pa=Ds,ma=Us,Xs=Qs,en=qs,tn=Hs;const Yt=ca,Zt=ua,Pt=k.forwardRef(({className:s,children:t,...e},o)=>x.jsxs(Ks,{ref:o,className:me("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...e,children:[t,x.jsx(ha,{asChild:!0,children:x.jsx(ws,{className:"h-4 w-4 opacity-50"})})]}));Pt.displayName=Ks.displayName;const rn=k.forwardRef(({className:s,...t},e)=>x.jsx(Xs,{ref:e,className:me("flex cursor-default items-center justify-center py-1",s),...t,children:x.jsx(bo,{className:"h-4 w-4"})}));rn.displayName=Xs.displayName;const sn=k.forwardRef(({className:s,...t},e)=>x.jsx(en,{ref:e,className:me("flex cursor-default items-center justify-center py-1",s),...t,children:x.jsx(ws,{className:"h-4 w-4"})}));sn.displayName=en.displayName;const Tt=k.forwardRef(({className:s,children:t,position:e="popper",...o},a)=>x.jsx(fa,{children:x.jsxs(Ys,{ref:a,className:me("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:e,...o,children:[x.jsx(rn,{}),x.jsx(da,{className:me("p-1",e==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),x.jsx(sn,{})]})}));Tt.displayName=Ys.displayName;const ga=k.forwardRef(({className:s,...t},e)=>x.jsx(Zs,{ref:e,className:me("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));ga.displayName=Zs.displayName;const Re=k.forwardRef(({className:s,children:t,...e},o)=>x.jsxs(Js,{ref:o,className:me("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...e,children:[x.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:x.jsx(ma,{children:x.jsx(ho,{className:"h-4 w-4"})})}),x.jsx(pa,{children:t})]}));Re.displayName=Js.displayName;const ya=k.forwardRef(({className:s,...t},e)=>x.jsx(tn,{ref:e,className:me("-mx-1 my-1 h-px bg-muted",s),...t}));ya.displayName=tn.displayName;var Jt="rovingFocusGroup.onEntryFocus",va={bubbles:!1,cancelable:!0},_t="RovingFocusGroup",[vr,nn,ba]=fs(_t),[wa,on]=Er(_t,[ba]),[xa,Sa]=wa(_t),an=k.forwardRef((s,t)=>x.jsx(vr.Provider,{scope:s.__scopeRovingFocusGroup,children:x.jsx(vr.Slot,{scope:s.__scopeRovingFocusGroup,children:x.jsx(_a,{...s,ref:t})})}));an.displayName=_t;var _a=k.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:e,orientation:o,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:n,onCurrentTabStopIdChange:f,onEntryFocus:v,preventScrollOnEntryFocus:g=!1,...b}=s,y=k.useRef(null),w=Le(t,y),c=_r(i),[h,p]=ut({prop:l,defaultProp:n??null,onChange:f,caller:_t}),[S,_]=k.useState(!1),C=ps(v),P=nn(e),T=k.useRef(!1),[E,R]=k.useState(0);return k.useEffect(()=>{const I=y.current;if(I)return I.addEventListener(Jt,C),()=>I.removeEventListener(Jt,C)},[C]),x.jsx(xa,{scope:e,orientation:o,dir:c,loop:a,currentTabStopId:h,onItemFocus:k.useCallback(I=>p(I),[p]),onItemShiftTab:k.useCallback(()=>_(!0),[]),onFocusableItemAdd:k.useCallback(()=>R(I=>I+1),[]),onFocusableItemRemove:k.useCallback(()=>R(I=>I-1),[]),children:x.jsx(be.div,{tabIndex:S||E===0?-1:0,"data-orientation":o,...b,ref:w,style:{outline:"none",...s.style},onMouseDown:ue(s.onMouseDown,()=>{T.current=!0}),onFocus:ue(s.onFocus,I=>{const A=!T.current;if(I.target===I.currentTarget&&A&&!S){const j=new CustomEvent(Jt,va);if(I.currentTarget.dispatchEvent(j),!j.defaultPrevented){const L=P().filter(q=>q.focusable),U=L.find(q=>q.active),$=L.find(q=>q.id===h),F=[U,$,...L].filter(Boolean).map(q=>q.ref.current);un(F,g)}}T.current=!1}),onBlur:ue(s.onBlur,()=>_(!1))})})}),ln="RovingFocusGroupItem",cn=k.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:e,focusable:o=!0,active:a=!1,tabStopId:i,children:l,...n}=s,f=kt(),v=i||f,g=Sa(ln,e),b=g.currentTabStopId===v,y=nn(e),{onFocusableItemAdd:w,onFocusableItemRemove:c,currentTabStopId:h}=g;return k.useEffect(()=>{if(o)return w(),()=>c()},[o,w,c]),x.jsx(vr.ItemSlot,{scope:e,id:v,focusable:o,active:a,children:x.jsx(be.span,{tabIndex:b?0:-1,"data-orientation":g.orientation,...n,ref:t,onMouseDown:ue(s.onMouseDown,p=>{o?g.onItemFocus(v):p.preventDefault()}),onFocus:ue(s.onFocus,()=>g.onItemFocus(v)),onKeyDown:ue(s.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){g.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const S=Aa(p,g.orientation,g.dir);if(S!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let C=y().filter(P=>P.focusable).map(P=>P.ref.current);if(S==="last")C.reverse();else if(S==="prev"||S==="next"){S==="prev"&&C.reverse();const P=C.indexOf(p.currentTarget);C=g.loop?Ia(C,P+1):C.slice(P+1)}setTimeout(()=>un(C))}}),children:typeof l=="function"?l({isCurrentTabStop:b,hasTabStop:h!=null}):l})})});cn.displayName=ln;var Ea={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ca(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function Aa(s,t,e){const o=Ca(s.key,e);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Ea[o]}function un(s,t=!1){const e=document.activeElement;for(const o of s)if(o===e||(o.focus({preventScroll:t}),document.activeElement!==e))return}function Ia(s,t){return s.map((e,o)=>s[(t+o)%s.length])}var Ra=an,Na=cn,hn="Toggle",Rr=k.forwardRef((s,t)=>{const{pressed:e,defaultPressed:o,onPressedChange:a,...i}=s,[l,n]=ut({prop:e,onChange:a,defaultProp:o??!1,caller:hn});return x.jsx(be.button,{type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":s.disabled?"":void 0,...i,ref:t,onClick:ue(s.onClick,()=>{s.disabled||n(!l)})})});Rr.displayName=hn;var fn=Rr,Ke="ToggleGroup",[dn,Zl]=Er(Ke,[on]),pn=on(),Nr=Pe.forwardRef((s,t)=>{const{type:e,...o}=s;if(e==="single"){const a=o;return x.jsx(Pa,{...a,ref:t})}if(e==="multiple"){const a=o;return x.jsx(Ta,{...a,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Ke}\``)});Nr.displayName=Ke;var[mn,gn]=dn(Ke),Pa=Pe.forwardRef((s,t)=>{const{value:e,defaultValue:o,onValueChange:a=()=>{},...i}=s,[l,n]=ut({prop:e,defaultProp:o??"",onChange:a,caller:Ke});return x.jsx(mn,{scope:s.__scopeToggleGroup,type:"single",value:Pe.useMemo(()=>l?[l]:[],[l]),onItemActivate:n,onItemDeactivate:Pe.useCallback(()=>n(""),[n]),children:x.jsx(yn,{...i,ref:t})})}),Ta=Pe.forwardRef((s,t)=>{const{value:e,defaultValue:o,onValueChange:a=()=>{},...i}=s,[l,n]=ut({prop:e,defaultProp:o??[],onChange:a,caller:Ke}),f=Pe.useCallback(g=>n((b=[])=>[...b,g]),[n]),v=Pe.useCallback(g=>n((b=[])=>b.filter(y=>y!==g)),[n]);return x.jsx(mn,{scope:s.__scopeToggleGroup,type:"multiple",value:l,onItemActivate:f,onItemDeactivate:v,children:x.jsx(yn,{...i,ref:t})})});Nr.displayName=Ke;var[Ma,La]=dn(Ke),yn=Pe.forwardRef((s,t)=>{const{__scopeToggleGroup:e,disabled:o=!1,rovingFocus:a=!0,orientation:i,dir:l,loop:n=!0,...f}=s,v=pn(e),g=_r(l),b={role:"group",dir:g,...f};return x.jsx(Ma,{scope:e,rovingFocus:a,disabled:o,children:a?x.jsx(Ra,{asChild:!0,...v,orientation:i,dir:g,loop:n,children:x.jsx(be.div,{...b,ref:t})}):x.jsx(be.div,{...b,ref:t})})}),jt="ToggleGroupItem",vn=Pe.forwardRef((s,t)=>{const e=gn(jt,s.__scopeToggleGroup),o=La(jt,s.__scopeToggleGroup),a=pn(s.__scopeToggleGroup),i=e.value.includes(s.value),l=o.disabled||s.disabled,n={...s,pressed:i,disabled:l},f=Pe.useRef(null);return o.rovingFocus?x.jsx(Na,{asChild:!0,...a,focusable:!l,active:i,ref:f,children:x.jsx(rs,{...n,ref:t})}):x.jsx(rs,{...n,ref:t})});vn.displayName=jt;var rs=Pe.forwardRef((s,t)=>{const{__scopeToggleGroup:e,value:o,...a}=s,i=gn(jt,e),l={role:"radio","aria-checked":s.pressed,"aria-pressed":void 0},n=i.type==="single"?l:void 0;return x.jsx(Rr,{...n,...a,ref:t,onPressedChange:f=>{f?i.onItemActivate(o):i.onItemDeactivate(o)}})}),bn=Nr,wn=vn;const xn=Ar("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),ja=k.forwardRef(({className:s,variant:t,size:e,...o},a)=>x.jsx(fn,{ref:a,className:me(xn({variant:t,size:e,className:s})),...o}));ja.displayName=fn.displayName;const Sn=k.createContext({size:"default",variant:"default"}),_n=k.forwardRef(({className:s,variant:t,size:e,children:o,...a},i)=>x.jsx(bn,{ref:i,className:me("flex items-center justify-center gap-1",s),...a,children:x.jsx(Sn.Provider,{value:{variant:t,size:e},children:o})}));_n.displayName=bn.displayName;const br=k.forwardRef(({className:s,children:t,variant:e,size:o,...a},i)=>{const l=k.useContext(Sn);return x.jsx(wn,{ref:i,className:me(xn({variant:l.variant||e,size:l.size||o}),s),...a,children:t})});br.displayName=wn.displayName;const En=k.forwardRef(({className:s,...t},e)=>x.jsx("div",{ref:e,className:me("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));En.displayName="Card";const ka=k.forwardRef(({className:s,...t},e)=>x.jsx("div",{ref:e,className:me("flex flex-col space-y-1.5 p-6",s),...t}));ka.displayName="CardHeader";const Ba=k.forwardRef(({className:s,...t},e)=>x.jsx("h3",{ref:e,className:me("text-2xl font-semibold leading-none tracking-tight",s),...t}));Ba.displayName="CardTitle";const Oa=k.forwardRef(({className:s,...t},e)=>x.jsx("p",{ref:e,className:me("text-sm text-muted-foreground",s),...t}));Oa.displayName="CardDescription";const Cn=k.forwardRef(({className:s,...t},e)=>x.jsx("div",{ref:e,className:me("p-6 pt-0",s),...t}));Cn.displayName="CardContent";const Da=k.forwardRef(({className:s,...t},e)=>x.jsx("div",{ref:e,className:me("flex items-center p-6 pt-0",s),...t}));Da.displayName="CardFooter";const Fa=Ar("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ye({className:s,variant:t,...e}){return x.jsx("div",{className:me(Fa({variant:t}),s),...e})}const ss=s=>{if(!s)return 0;const t=s.match(/(\d+)\s*yr?\s*(\d+)?\s*mo?/);if(t){const e=parseInt(t[1])||0,o=parseInt(t[2])||0;return e*12+o}return 0},An=(s,t)=>{if(s==="Foster Care")return"In Foster";if(s&&s.startsWith("ISO")&&t==="ISO Dogs")return`ISO Dogs ${s.replace("ISO","")}`;if(s&&s.startsWith("IsoP")&&t==="ISO Puppies")return`ISO Puppies ${s.replace("IsoP","")}`;if(s&&s.includes("Cat Holding")&&t&&t.includes("Cat Hold")){const e=s.match(/Cat Holding \((\d+)\) (\d+)/),o=t.match(/Cat Hold\((\d+)\)/);if(e&&o){const[,a,i]=e;return`Cat Holdings (${a}) - ${i}`}}if(s&&s.startsWith("Hold")&&t==="Dog Hold")return`Dog Holding ${s.replace("Hold","")}`;if(s&&s.startsWith("Bonding Rooms")&&(t==="Bonding Rooms"||!t)){const e=s.match(/Bonding Rooms ([A-Z]\d+)([A-Z])/);if(e){const[,o,a]=e;return`Bonding Rooms ${o} - ${a}`}return s}if(s&&s.includes("Hall Crate")&&(t==="Hall Crate"||!t)){let e=s.replace(/^Hall Crate\s+Hall Crate\s+/,"Hall Crate ");return e=e.replace(/(\d+)-([A-Z])/g,"$1 - $2"),e}return t&&t.includes("Adopt Dogs")&&s&&s.match(/^[A-Z]\d+/)?s.replace(/^([A-Z])(\d+)/,"$1 - $2"):t&&t!==s?`${s} â€¢ ${t}`:s},Ua=Pe.memo(({dog:s,isFavorite:t,onToggleFavorite:e})=>{const[o,a]=k.useState(0),[i,l]=k.useState(!1),n=I=>{var j;if(!I||I.trim()===""||I==="N/A")return null;const A=I.trim();if(A.includes("petango.com"))return A;if(A.includes("drive.google.com")){const L=(j=A.match(/\/d\/([a-zA-Z0-9-_]+)/))==null?void 0:j[1];return L?`https://drive.google.com/uc?id=${L}`:null}return A},f=I=>{switch(I){case 1:return"bg-green-100 text-green-800 border-green-200";case 2:return"bg-yellow-100 text-yellow-800 border-yellow-200";case 3:return"bg-red-100 text-red-800 border-red-200";case 0:return"bg-gray-100 text-gray-600 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=I=>I["Breed AI"]||"Mixed Breed",g=I=>I<=25?"Small":I<=60?"Medium":"Large",b=(I,A)=>I==="Yes"?(A==null?void 0:A.toLowerCase())==="female"?"Spayed":"Neutered":(A==null?void 0:A.toLowerCase())==="female"?"Not Spayed":"Not Neutered",y=I=>I==="Yes"?"bg-green-100 text-green-800 border-green-200":"bg-yellow-100 text-yellow-800 border-yellow-200",w=I=>I.toLowerCase()==="male"?{icon:"â™‚",className:"text-blue-500 text-lg"}:I.toLowerCase()==="female"?{icon:"â™€",className:"text-pink-500 text-lg"}:null,c=[s.Photo_1,s.Photo_2,s.Photo_3].filter(I=>I&&I.trim()!==""&&I!=="N/A"),h=c.length>1,p=()=>{h&&a(I=>(I+1)%c.length)},S=()=>{h&&a(I=>(I-1+c.length)%c.length)},_=k.useMemo(()=>n(c[o]||s.Photo_1),[c,o,s.Photo_1]),C=k.useMemo(()=>s.DFTD_eligibility==="Yes",[s.DFTD_eligibility]),P=k.useMemo(()=>g(s.Weight),[s.Weight]),T=k.useMemo(()=>v(s),[s]),E=w(s.Gender),R=!s.Level&&!s.Days_in_DCAS;return x.jsxs(En,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-300 bg-gradient-to-br from-orange-50 to-yellow-50 border-orange-200 flex flex-col h-full",children:[x.jsxs("div",{className:"relative h-64 bg-gradient-to-br from-orange-100 to-yellow-100 overflow-hidden rounded-t-lg",children:[_?x.jsx("img",{src:_,alt:s.Name,className:"w-full h-full object-contain",onError:I=>{l(!0)}}):x.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-400",children:[x.jsx(Kt,{className:"h-16 w-16 mb-2"}),x.jsx("span",{className:"text-sm font-medium",children:"Photo Coming Soon"}),x.jsxs("span",{className:"text-xs",children:["We're working on getting ",s.Name,"'s photo!"]})]}),i&&x.jsxs("div",{className:"absolute inset-0 w-full h-full flex flex-col items-center justify-center text-gray-400 bg-gradient-to-br from-orange-100 to-yellow-100",children:[x.jsx(Kt,{className:"h-16 w-16 mb-2"}),x.jsx("span",{className:"text-sm font-medium",children:"Image Not Available"}),x.jsxs("span",{className:"text-xs text-center px-4",children:["We're working on updating ",s.Name,"'s photo!"]})]}),h&&_&&!i&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:S,className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm p-1 rounded-full hover:bg-white transition-colors duration-200 shadow-sm",children:x.jsx(mo,{className:"h-4 w-4 text-gray-700"})}),x.jsx("button",{onClick:p,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm p-1 rounded-full hover:bg-white transition-colors duration-200 shadow-sm",children:x.jsx(yo,{className:"h-4 w-4 text-gray-700"})})]}),h&&_&&!i&&x.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1",children:c.map((I,A)=>x.jsx("button",{onClick:()=>a(A),className:`w-2 h-2 rounded-full transition-colors duration-200 ${A===o?"bg-white shadow-sm":"bg-white/60"}`},A))}),typeof s.Level=="number"&&x.jsx(Ye,{variant:"outline",className:`absolute top-2 right-2 text-xs font-medium ${f(s.Level)}`,children:s.Level>0?`Level ${s.Level}`:"No Level"}),x.jsx("button",{onClick:()=>e(s["Dog ID"]),className:"absolute top-2 left-2 p-2 bg-white/90 backdrop-blur-sm rounded-full hover:bg-white transition-colors duration-200 shadow-sm",children:x.jsx(Ro,{className:`h-4 w-4 ${t?"fill-red-500 text-red-500":"text-gray-600"}`})})]}),x.jsxs(Cn,{className:"p-4 flex-1 flex flex-col",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.Name}),E&&x.jsx("span",{className:E.className,children:E.icon})]}),x.jsxs(Ye,{variant:"outline",className:"text-xs bg-white/80 backdrop-blur-sm",children:["ID: ",s["Dog ID"]]})]}),R?x.jsxs("div",{className:"space-y-2 mb-3",children:[x.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),x.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]}):x.jsxs("div",{className:"space-y-2 mb-3",children:[x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[x.jsx(Kt,{className:"h-4 w-4"}),x.jsxs("div",{className:"relative group",children:[x.jsx("span",{className:"font-medium cursor-help underline decoration-dotted",children:"Breed:"}),x.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:["AI-identified breed. DNA test may be required to verify.",x.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"})]})]}),x.jsx("span",{children:T})]}),x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[x.jsx(xo,{className:"h-4 w-4"}),x.jsx("span",{className:"font-medium",children:"Age:"}),x.jsx("span",{children:s.Approx_Age})]}),x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[x.jsx(Fo,{className:"h-4 w-4"}),x.jsx("span",{className:"font-medium",children:"Weight:"}),x.jsxs("span",{children:[s.Weight," lbs"]})]}),x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[x.jsx(co,{className:"h-4 w-4"}),x.jsxs("span",{children:[s.Days_in_DCAS," days in shelter"]})]})]}),x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[x.jsx(Mo,{className:"h-4 w-4"}),x.jsx("span",{className:"font-medium",children:"Location:"}),x.jsx("span",{children:An(s.Location_kennel,s.Location_room)})]}),x.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[C&&x.jsxs(Ye,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0 font-medium",children:[x.jsx(Oo,{className:"h-3 w-3 mr-1"}),"DFTD Eligible"]}),x.jsxs(Ye,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center gap-1",children:[x.jsx(jo,{className:"h-3 w-3"}),P]})]}),x.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[x.jsx(Ye,{variant:"outline",className:y(s.Spay_Neuter_status),children:b(s.Spay_Neuter_status,s.Gender)}),s.Sociability_status&&x.jsx(Ye,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:s.Sociability_status}),s.Sociablity_playstyle&&x.jsx(Ye,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:s.Sociablity_playstyle})]}),x.jsx("div",{className:"flex-1"}),x.jsx(wt,{className:"w-full bg-orange-500 hover:bg-orange-600 text-white",onClick:()=>{s.Adopets_url&&s.Adopets_url!=="Dog Not Found"&&window.open(s.Adopets_url,"_blank")},disabled:!s.Adopets_url||s.Adopets_url==="Dog Not Found",children:!s.Adopets_url||s.Adopets_url==="Dog Not Found"?"Currently Unavailable":"View Adoption Details"})]})]})},(s,t)=>s.dog["Dog ID"]===t.dog["Dog ID"]&&s.isFavorite===t.isFavorite),Qa=({dogs:s,favorites:t,onToggleFavorite:e,viewMode:o="cards"})=>{const a=n=>{switch(n){case 1:return"bg-green-100 text-green-800 border-green-300";case 2:return"bg-yellow-100 text-yellow-800 border-yellow-300";case 3:return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},i=n=>n.toLowerCase()==="male"?x.jsx("span",{className:"text-blue-500 text-lg",children:"â™‚"}):n.toLowerCase()==="female"?x.jsx("span",{className:"text-pink-500 text-lg",children:"â™€"}):null,l=k.useCallback(n=>{var f;if(!n)return"https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=400&fit=crop&crop=face";if(n.includes("drive.google.com")){const v=(f=n.match(/\/d\/([a-zA-Z0-9-_]+)/))==null?void 0:f[1];if(v)return`https://drive.google.com/uc?export=view&id=${v}`}return n},[]);return o==="table"?x.jsx("div",{children:x.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-orange-200 overflow-hidden",children:x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full",children:[x.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 border-b border-orange-200",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Photo"}),x.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Name"}),x.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 relative",children:x.jsxs("div",{className:"relative group",children:[x.jsx("span",{className:"cursor-help underline decoration-dotted",children:"Breed"}),x.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:["AI-identified breed. DNA test may be required to verify.",x.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-800"})]})]})}),x.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-24",children:"Age"}),x.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Weight"}),x.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700 w-20",children:"Level"}),x.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700",children:"Location"}),x.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700",children:"Adopt"})]})}),x.jsx("tbody",{className:"divide-y divide-orange-100",children:s.map(n=>{const f=i(n.Gender);return x.jsxs("tr",{className:"hover:bg-orange-25 transition-colors",children:[x.jsx("td",{className:"px-4 py-3",children:x.jsx("div",{className:"w-16 h-16 bg-orange-50 rounded-lg overflow-hidden flex items-center justify-center",children:x.jsx("img",{src:l(n.Photo_1),alt:n.Name,className:"max-w-full max-h-full object-cover",onError:v=>{v.currentTarget.src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=400&fit=crop&crop=face"}})})}),x.jsxs("td",{className:"px-4 py-3",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[f&&x.jsx("span",{className:f.className,children:f.icon}),x.jsx("span",{className:"font-medium text-gray-900",children:n.Name})]}),x.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",n["Dog ID"]]})]}),x.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:n["Breed AI_1"]||n["Breed AI"]||"Mixed Breed"}),x.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 whitespace-nowrap",children:n.Approx_Age}),x.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[n.Weight," lbs"]}),x.jsx("td",{className:"px-4 py-3 text-center",children:x.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap ${a(n.Level)}`,children:["Level ",n.Level]})}),x.jsx("td",{className:"px-4 py-3 text-center",children:x.jsx("span",{className:"text-sm text-gray-700",children:An(n.Location_kennel,n.Location_room)})}),x.jsx("td",{className:"px-4 py-3 text-center",children:n.Adopets_url?x.jsx(wt,{asChild:!0,size:"sm",className:"bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white",children:x.jsxs("a",{href:n.Adopets_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1",children:[x.jsx("span",{children:"Adopt"}),x.jsx(Eo,{className:"h-3 w-3"})]})}):x.jsx("span",{className:"text-gray-400 text-sm",children:"N/A"})})]},n["Dog ID"])})})]})})})}):x.jsx("div",{children:x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.map(n=>x.jsx(Ua,{dog:n,isFavorite:t.has(n["Dog ID"]),onToggleFavorite:()=>e(n["Dog ID"])},n["Dog ID"]))})})};var qa=Object.create,ft=Object.defineProperty,$a=Object.getOwnPropertyDescriptor,Ha=Object.getOwnPropertyNames,Va=Object.getPrototypeOf,Wa=Object.prototype.hasOwnProperty,Ga=(s,t,e)=>t in s?ft(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,m=(s,t)=>ft(s,"name",{value:t,configurable:!0}),Ie=(s,t)=>()=>(s&&(t=s(s=0)),t),X=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),je=(s,t)=>{for(var e in t)ft(s,e,{get:t[e],enumerable:!0})},In=(s,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Ha(t))!Wa.call(s,a)&&a!==e&&ft(s,a,{get:()=>t[a],enumerable:!(o=$a(t,a))||o.enumerable});return s},rt=(s,t,e)=>(e=s!=null?qa(Va(s)):{},In(t||!s||!s.__esModule?ft(e,"default",{value:s,enumerable:!0}):e,s)),ve=s=>In(ft({},"__esModule",{value:!0}),s),K=(s,t,e)=>Ga(s,typeof t!="symbol"?t+"":t,e),za=X(s=>{V(),s.byteLength=f,s.toByteArray=g,s.fromByteArray=w;var t=[],e=[],o=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,l=a.length;i<l;++i)t[i]=a[i],e[a.charCodeAt(i)]=i;var i,l;e[45]=62,e[95]=63;function n(c){var h=c.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=c.indexOf("=");p===-1&&(p=h);var S=p===h?0:4-p%4;return[p,S]}m(n,"getLens");function f(c){var h=n(c),p=h[0],S=h[1];return(p+S)*3/4-S}m(f,"byteLength");function v(c,h,p){return(h+p)*3/4-p}m(v,"_byteLength");function g(c){var h,p=n(c),S=p[0],_=p[1],C=new o(v(c,S,_)),P=0,T=_>0?S-4:S,E;for(E=0;E<T;E+=4)h=e[c.charCodeAt(E)]<<18|e[c.charCodeAt(E+1)]<<12|e[c.charCodeAt(E+2)]<<6|e[c.charCodeAt(E+3)],C[P++]=h>>16&255,C[P++]=h>>8&255,C[P++]=h&255;return _===2&&(h=e[c.charCodeAt(E)]<<2|e[c.charCodeAt(E+1)]>>4,C[P++]=h&255),_===1&&(h=e[c.charCodeAt(E)]<<10|e[c.charCodeAt(E+1)]<<4|e[c.charCodeAt(E+2)]>>2,C[P++]=h>>8&255,C[P++]=h&255),C}m(g,"toByteArray");function b(c){return t[c>>18&63]+t[c>>12&63]+t[c>>6&63]+t[c&63]}m(b,"tripletToBase64");function y(c,h,p){for(var S,_=[],C=h;C<p;C+=3)S=(c[C]<<16&16711680)+(c[C+1]<<8&65280)+(c[C+2]&255),_.push(b(S));return _.join("")}m(y,"encodeChunk");function w(c){for(var h,p=c.length,S=p%3,_=[],C=16383,P=0,T=p-S;P<T;P+=C)_.push(y(c,P,P+C>T?T:P+C));return S===1?(h=c[p-1],_.push(t[h>>2]+t[h<<4&63]+"==")):S===2&&(h=(c[p-2]<<8)+c[p-1],_.push(t[h>>10]+t[h>>4&63]+t[h<<2&63]+"=")),_.join("")}m(w,"fromByteArray")}),Ka=X(s=>{V(),s.read=function(t,e,o,a,i){var l,n,f=i*8-a-1,v=(1<<f)-1,g=v>>1,b=-7,y=o?i-1:0,w=o?-1:1,c=t[e+y];for(y+=w,l=c&(1<<-b)-1,c>>=-b,b+=f;b>0;l=l*256+t[e+y],y+=w,b-=8);for(n=l&(1<<-b)-1,l>>=-b,b+=a;b>0;n=n*256+t[e+y],y+=w,b-=8);if(l===0)l=1-g;else{if(l===v)return n?NaN:(c?-1:1)*(1/0);n=n+Math.pow(2,a),l=l-g}return(c?-1:1)*n*Math.pow(2,l-a)},s.write=function(t,e,o,a,i,l){var n,f,v,g=l*8-i-1,b=(1<<g)-1,y=b>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=a?0:l-1,h=a?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(f=isNaN(e)?1:0,n=b):(n=Math.floor(Math.log(e)/Math.LN2),e*(v=Math.pow(2,-n))<1&&(n--,v*=2),n+y>=1?e+=w/v:e+=w*Math.pow(2,1-y),e*v>=2&&(n++,v/=2),n+y>=b?(f=0,n=b):n+y>=1?(f=(e*v-1)*Math.pow(2,i),n=n+y):(f=e*Math.pow(2,y-1)*Math.pow(2,i),n=0));i>=8;t[o+c]=f&255,c+=h,f/=256,i-=8);for(n=n<<i|f,g+=i;g>0;t[o+c]=n&255,c+=h,n/=256,g-=8);t[o+c-h]|=p*128}}),Ya=X(s=>{V();var t=za(),e=Ka(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=n,s.SlowBuffer=_,s.INSPECT_MAX_BYTES=50;var a=2147483647;s.kMaxLength=a,n.TYPED_ARRAY_SUPPORT=i(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let r=new Uint8Array(1),u={foo:m(function(){return 42},"foo")};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(r,u),r.foo()===42}catch{return!1}}m(i,"typedArraySupport"),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:m(function(){if(n.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:m(function(){if(n.isBuffer(this))return this.byteOffset},"get")});function l(r){if(r>a)throw new RangeError('The value "'+r+'" is invalid for option "size"');let u=new Uint8Array(r);return Object.setPrototypeOf(u,n.prototype),u}m(l,"createBuffer");function n(r,u,d){if(typeof r=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(r)}return f(r,u,d)}m(n,"Buffer"),n.poolSize=8192;function f(r,u,d){if(typeof r=="string")return y(r,u);if(ArrayBuffer.isView(r))return c(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Te(r,ArrayBuffer)||r&&Te(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Te(r,SharedArrayBuffer)||r&&Te(r.buffer,SharedArrayBuffer)))return h(r,u,d);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let N=r.valueOf&&r.valueOf();if(N!=null&&N!==r)return n.from(N,u,d);let M=p(r);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return n.from(r[Symbol.toPrimitive]("string"),u,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}m(f,"from"),n.from=function(r,u,d){return f(r,u,d)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array);function v(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}m(v,"assertSize");function g(r,u,d){return v(r),r<=0?l(r):u!==void 0?typeof d=="string"?l(r).fill(u,d):l(r).fill(u):l(r)}m(g,"alloc"),n.alloc=function(r,u,d){return g(r,u,d)};function b(r){return v(r),l(r<0?0:S(r)|0)}m(b,"allocUnsafe"),n.allocUnsafe=function(r){return b(r)},n.allocUnsafeSlow=function(r){return b(r)};function y(r,u){if((typeof u!="string"||u==="")&&(u="utf8"),!n.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let d=C(r,u)|0,N=l(d),M=N.write(r,u);return M!==d&&(N=N.slice(0,M)),N}m(y,"fromString");function w(r){let u=r.length<0?0:S(r.length)|0,d=l(u);for(let N=0;N<u;N+=1)d[N]=r[N]&255;return d}m(w,"fromArrayLike");function c(r){if(Te(r,Uint8Array)){let u=new Uint8Array(r);return h(u.buffer,u.byteOffset,u.byteLength)}return w(r)}m(c,"fromArrayView");function h(r,u,d){if(u<0||r.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<u+(d||0))throw new RangeError('"length" is outside of buffer bounds');let N;return u===void 0&&d===void 0?N=new Uint8Array(r):d===void 0?N=new Uint8Array(r,u):N=new Uint8Array(r,u,d),Object.setPrototypeOf(N,n.prototype),N}m(h,"fromArrayBuffer");function p(r){if(n.isBuffer(r)){let u=S(r.length)|0,d=l(u);return d.length===0||r.copy(d,0,0,u),d}if(r.length!==void 0)return typeof r.length!="number"||Ct(r.length)?l(0):w(r);if(r.type==="Buffer"&&Array.isArray(r.data))return w(r.data)}m(p,"fromObject");function S(r){if(r>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return r|0}m(S,"checked");function _(r){return+r!=r&&(r=0),n.alloc(+r)}m(_,"SlowBuffer"),n.isBuffer=m(function(r){return r!=null&&r._isBuffer===!0&&r!==n.prototype},"isBuffer"),n.compare=m(function(r,u){if(Te(r,Uint8Array)&&(r=n.from(r,r.offset,r.byteLength)),Te(u,Uint8Array)&&(u=n.from(u,u.offset,u.byteLength)),!n.isBuffer(r)||!n.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===u)return 0;let d=r.length,N=u.length;for(let M=0,O=Math.min(d,N);M<O;++M)if(r[M]!==u[M]){d=r[M],N=u[M];break}return d<N?-1:N<d?1:0},"compare"),n.isEncoding=m(function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),n.concat=m(function(r,u){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return n.alloc(0);let d;if(u===void 0)for(u=0,d=0;d<r.length;++d)u+=r[d].length;let N=n.allocUnsafe(u),M=0;for(d=0;d<r.length;++d){let O=r[d];if(Te(O,Uint8Array))M+O.length>N.length?(n.isBuffer(O)||(O=n.from(O)),O.copy(N,M)):Uint8Array.prototype.set.call(N,O,M);else if(n.isBuffer(O))O.copy(N,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=O.length}return N},"concat");function C(r,u){if(n.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Te(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let d=r.length,N=arguments.length>2&&arguments[2]===!0;if(!N&&d===0)return 0;let M=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return qe(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return Gt(r).length;default:if(M)return N?-1:qe(r).length;u=(""+u).toLowerCase(),M=!0}}m(C,"byteLength"),n.byteLength=C;function P(r,u,d){let N=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,u>>>=0,d<=u))return"";for(r||(r="utf8");;)switch(r){case"hex":return Z(this,u,d);case"utf8":case"utf-8":return B(this,u,d);case"ascii":return H(this,u,d);case"latin1":case"binary":return z(this,u,d);case"base64":return $(this,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,u,d);default:if(N)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),N=!0}}m(P,"slowToString"),n.prototype._isBuffer=!0;function T(r,u,d){let N=r[u];r[u]=r[d],r[d]=N}m(T,"swap"),n.prototype.swap16=m(function(){let r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<r;u+=2)T(this,u,u+1);return this},"swap16"),n.prototype.swap32=m(function(){let r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<r;u+=4)T(this,u,u+3),T(this,u+1,u+2);return this},"swap32"),n.prototype.swap64=m(function(){let r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<r;u+=8)T(this,u,u+7),T(this,u+1,u+6),T(this,u+2,u+5),T(this,u+3,u+4);return this},"swap64"),n.prototype.toString=m(function(){let r=this.length;return r===0?"":arguments.length===0?B(this,0,r):P.apply(this,arguments)},"toString"),n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=m(function(r){if(!n.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:n.compare(this,r)===0},"equals"),n.prototype.inspect=m(function(){let r="",u=s.INSPECT_MAX_BYTES;return r=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(r+=" ... "),"<Buffer "+r+">"},"inspect"),o&&(n.prototype[o]=n.prototype.inspect),n.prototype.compare=m(function(r,u,d,N,M){if(Te(r,Uint8Array)&&(r=n.from(r,r.offset,r.byteLength)),!n.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(u===void 0&&(u=0),d===void 0&&(d=r?r.length:0),N===void 0&&(N=0),M===void 0&&(M=this.length),u<0||d>r.length||N<0||M>this.length)throw new RangeError("out of range index");if(N>=M&&u>=d)return 0;if(N>=M)return-1;if(u>=d)return 1;if(u>>>=0,d>>>=0,N>>>=0,M>>>=0,this===r)return 0;let O=M-N,D=d-u,ae=Math.min(O,D),ye=this.slice(N,M),ce=r.slice(u,d);for(let le=0;le<ae;++le)if(ye[le]!==ce[le]){O=ye[le],D=ce[le];break}return O<D?-1:D<O?1:0},"compare");function E(r,u,d,N,M){if(r.length===0)return-1;if(typeof d=="string"?(N=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,Ct(d)&&(d=M?0:r.length-1),d<0&&(d=r.length+d),d>=r.length){if(M)return-1;d=r.length-1}else if(d<0)if(M)d=0;else return-1;if(typeof u=="string"&&(u=n.from(u,N)),n.isBuffer(u))return u.length===0?-1:R(r,u,d,N,M);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(r,u,d):Uint8Array.prototype.lastIndexOf.call(r,u,d):R(r,[u],d,N,M);throw new TypeError("val must be string, number or Buffer")}m(E,"bidirectionalIndexOf");function R(r,u,d,N,M){let O=1,D=r.length,ae=u.length;if(N!==void 0&&(N=String(N).toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(r.length<2||u.length<2)return-1;O=2,D/=2,ae/=2,d/=2}function ye(le,de){return O===1?le[de]:le.readUInt16BE(de*O)}m(ye,"read");let ce;if(M){let le=-1;for(ce=d;ce<D;ce++)if(ye(r,ce)===ye(u,le===-1?0:ce-le)){if(le===-1&&(le=ce),ce-le+1===ae)return le*O}else le!==-1&&(ce-=ce-le),le=-1}else for(d+ae>D&&(d=D-ae),ce=d;ce>=0;ce--){let le=!0;for(let de=0;de<ae;de++)if(ye(r,ce+de)!==ye(u,de)){le=!1;break}if(le)return ce}return-1}m(R,"arrayIndexOf"),n.prototype.includes=m(function(r,u,d){return this.indexOf(r,u,d)!==-1},"includes"),n.prototype.indexOf=m(function(r,u,d){return E(this,r,u,d,!0)},"indexOf"),n.prototype.lastIndexOf=m(function(r,u,d){return E(this,r,u,d,!1)},"lastIndexOf");function I(r,u,d,N){d=Number(d)||0;let M=r.length-d;N?(N=Number(N),N>M&&(N=M)):N=M;let O=u.length;N>O/2&&(N=O/2);let D;for(D=0;D<N;++D){let ae=parseInt(u.substr(D*2,2),16);if(Ct(ae))return D;r[d+D]=ae}return D}m(I,"hexWrite");function A(r,u,d,N){return pt(qe(u,r.length-d),r,d,N)}m(A,"utf8Write");function j(r,u,d,N){return pt(Qr(u),r,d,N)}m(j,"asciiWrite");function L(r,u,d,N){return pt(Gt(u),r,d,N)}m(L,"base64Write");function U(r,u,d,N){return pt(qr(u,r.length-d),r,d,N)}m(U,"ucs2Write"),n.prototype.write=m(function(r,u,d,N){if(u===void 0)N="utf8",d=this.length,u=0;else if(d===void 0&&typeof u=="string")N=u,d=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(d)?(d=d>>>0,N===void 0&&(N="utf8")):(N=d,d=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let M=this.length-u;if((d===void 0||d>M)&&(d=M),r.length>0&&(d<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");let O=!1;for(;;)switch(N){case"hex":return I(this,r,u,d);case"utf8":case"utf-8":return A(this,r,u,d);case"ascii":case"latin1":case"binary":return j(this,r,u,d);case"base64":return L(this,r,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,r,u,d);default:if(O)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),O=!0}},"write"),n.prototype.toJSON=m(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function $(r,u,d){return u===0&&d===r.length?t.fromByteArray(r):t.fromByteArray(r.slice(u,d))}m($,"base64Slice");function B(r,u,d){d=Math.min(r.length,d);let N=[],M=u;for(;M<d;){let O=r[M],D=null,ae=O>239?4:O>223?3:O>191?2:1;if(M+ae<=d){let ye,ce,le,de;switch(ae){case 1:O<128&&(D=O);break;case 2:ye=r[M+1],(ye&192)===128&&(de=(O&31)<<6|ye&63,de>127&&(D=de));break;case 3:ye=r[M+1],ce=r[M+2],(ye&192)===128&&(ce&192)===128&&(de=(O&15)<<12|(ye&63)<<6|ce&63,de>2047&&(de<55296||de>57343)&&(D=de));break;case 4:ye=r[M+1],ce=r[M+2],le=r[M+3],(ye&192)===128&&(ce&192)===128&&(le&192)===128&&(de=(O&15)<<18|(ye&63)<<12|(ce&63)<<6|le&63,de>65535&&de<1114112&&(D=de))}}D===null?(D=65533,ae=1):D>65535&&(D-=65536,N.push(D>>>10&1023|55296),D=56320|D&1023),N.push(D),M+=ae}return q(N)}m(B,"utf8Slice");var F=4096;function q(r){let u=r.length;if(u<=F)return String.fromCharCode.apply(String,r);let d="",N=0;for(;N<u;)d+=String.fromCharCode.apply(String,r.slice(N,N+=F));return d}m(q,"decodeCodePointsArray");function H(r,u,d){let N="";d=Math.min(r.length,d);for(let M=u;M<d;++M)N+=String.fromCharCode(r[M]&127);return N}m(H,"asciiSlice");function z(r,u,d){let N="";d=Math.min(r.length,d);for(let M=u;M<d;++M)N+=String.fromCharCode(r[M]);return N}m(z,"latin1Slice");function Z(r,u,d){let N=r.length;(!u||u<0)&&(u=0),(!d||d<0||d>N)&&(d=N);let M="";for(let O=u;O<d;++O)M+=bi[r[O]];return M}m(Z,"hexSlice");function xe(r,u,d){let N=r.slice(u,d),M="";for(let O=0;O<N.length-1;O+=2)M+=String.fromCharCode(N[O]+N[O+1]*256);return M}m(xe,"utf16leSlice"),n.prototype.slice=m(function(r,u){let d=this.length;r=~~r,u=u===void 0?d:~~u,r<0?(r+=d,r<0&&(r=0)):r>d&&(r=d),u<0?(u+=d,u<0&&(u=0)):u>d&&(u=d),u<r&&(u=r);let N=this.subarray(r,u);return Object.setPrototypeOf(N,n.prototype),N},"slice");function ne(r,u,d){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+u>d)throw new RangeError("Trying to access beyond buffer length")}m(ne,"checkOffset"),n.prototype.readUintLE=n.prototype.readUIntLE=m(function(r,u,d){r=r>>>0,u=u>>>0,d||ne(r,u,this.length);let N=this[r],M=1,O=0;for(;++O<u&&(M*=256);)N+=this[r+O]*M;return N},"readUIntLE"),n.prototype.readUintBE=n.prototype.readUIntBE=m(function(r,u,d){r=r>>>0,u=u>>>0,d||ne(r,u,this.length);let N=this[r+--u],M=1;for(;u>0&&(M*=256);)N+=this[r+--u]*M;return N},"readUIntBE"),n.prototype.readUint8=n.prototype.readUInt8=m(function(r,u){return r=r>>>0,u||ne(r,1,this.length),this[r]},"readUInt8"),n.prototype.readUint16LE=n.prototype.readUInt16LE=m(function(r,u){return r=r>>>0,u||ne(r,2,this.length),this[r]|this[r+1]<<8},"readUInt16LE"),n.prototype.readUint16BE=n.prototype.readUInt16BE=m(function(r,u){return r=r>>>0,u||ne(r,2,this.length),this[r]<<8|this[r+1]},"readUInt16BE"),n.prototype.readUint32LE=n.prototype.readUInt32LE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216},"readUInt32LE"),n.prototype.readUint32BE=n.prototype.readUInt32BE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])},"readUInt32BE"),n.prototype.readBigUInt64LE=Fe(m(function(r){r=r>>>0,_e(r,"offset");let u=this[r],d=this[r+7];(u===void 0||d===void 0)&&Ce(r,this.length-8);let N=u+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24,M=this[++r]+this[++r]*2**8+this[++r]*2**16+d*2**24;return BigInt(N)+(BigInt(M)<<BigInt(32))},"readBigUInt64LE")),n.prototype.readBigUInt64BE=Fe(m(function(r){r=r>>>0,_e(r,"offset");let u=this[r],d=this[r+7];(u===void 0||d===void 0)&&Ce(r,this.length-8);let N=u*2**24+this[++r]*2**16+this[++r]*2**8+this[++r],M=this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+d;return(BigInt(N)<<BigInt(32))+BigInt(M)},"readBigUInt64BE")),n.prototype.readIntLE=m(function(r,u,d){r=r>>>0,u=u>>>0,d||ne(r,u,this.length);let N=this[r],M=1,O=0;for(;++O<u&&(M*=256);)N+=this[r+O]*M;return M*=128,N>=M&&(N-=Math.pow(2,8*u)),N},"readIntLE"),n.prototype.readIntBE=m(function(r,u,d){r=r>>>0,u=u>>>0,d||ne(r,u,this.length);let N=u,M=1,O=this[r+--N];for(;N>0&&(M*=256);)O+=this[r+--N]*M;return M*=128,O>=M&&(O-=Math.pow(2,8*u)),O},"readIntBE"),n.prototype.readInt8=m(function(r,u){return r=r>>>0,u||ne(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]},"readInt8"),n.prototype.readInt16LE=m(function(r,u){r=r>>>0,u||ne(r,2,this.length);let d=this[r]|this[r+1]<<8;return d&32768?d|4294901760:d},"readInt16LE"),n.prototype.readInt16BE=m(function(r,u){r=r>>>0,u||ne(r,2,this.length);let d=this[r+1]|this[r]<<8;return d&32768?d|4294901760:d},"readInt16BE"),n.prototype.readInt32LE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},"readInt32LE"),n.prototype.readInt32BE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},"readInt32BE"),n.prototype.readBigInt64LE=Fe(m(function(r){r=r>>>0,_e(r,"offset");let u=this[r],d=this[r+7];(u===void 0||d===void 0)&&Ce(r,this.length-8);let N=this[r+4]+this[r+5]*2**8+this[r+6]*2**16+(d<<24);return(BigInt(N)<<BigInt(32))+BigInt(u+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24)},"readBigInt64LE")),n.prototype.readBigInt64BE=Fe(m(function(r){r=r>>>0,_e(r,"offset");let u=this[r],d=this[r+7];(u===void 0||d===void 0)&&Ce(r,this.length-8);let N=(u<<24)+this[++r]*2**16+this[++r]*2**8+this[++r];return(BigInt(N)<<BigInt(32))+BigInt(this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+d)},"readBigInt64BE")),n.prototype.readFloatLE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),e.read(this,r,!0,23,4)},"readFloatLE"),n.prototype.readFloatBE=m(function(r,u){return r=r>>>0,u||ne(r,4,this.length),e.read(this,r,!1,23,4)},"readFloatBE"),n.prototype.readDoubleLE=m(function(r,u){return r=r>>>0,u||ne(r,8,this.length),e.read(this,r,!0,52,8)},"readDoubleLE"),n.prototype.readDoubleBE=m(function(r,u){return r=r>>>0,u||ne(r,8,this.length),e.read(this,r,!1,52,8)},"readDoubleBE");function fe(r,u,d,N,M,O){if(!n.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>M||u<O)throw new RangeError('"value" argument is out of bounds');if(d+N>r.length)throw new RangeError("Index out of range")}m(fe,"checkInt"),n.prototype.writeUintLE=n.prototype.writeUIntLE=m(function(r,u,d,N){if(r=+r,u=u>>>0,d=d>>>0,!N){let D=Math.pow(2,8*d)-1;fe(this,r,u,d,D,0)}let M=1,O=0;for(this[u]=r&255;++O<d&&(M*=256);)this[u+O]=r/M&255;return u+d},"writeUIntLE"),n.prototype.writeUintBE=n.prototype.writeUIntBE=m(function(r,u,d,N){if(r=+r,u=u>>>0,d=d>>>0,!N){let D=Math.pow(2,8*d)-1;fe(this,r,u,d,D,0)}let M=d-1,O=1;for(this[u+M]=r&255;--M>=0&&(O*=256);)this[u+M]=r/O&255;return u+d},"writeUIntBE"),n.prototype.writeUint8=n.prototype.writeUInt8=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,1,255,0),this[u]=r&255,u+1},"writeUInt8"),n.prototype.writeUint16LE=n.prototype.writeUInt16LE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,2,65535,0),this[u]=r&255,this[u+1]=r>>>8,u+2},"writeUInt16LE"),n.prototype.writeUint16BE=n.prototype.writeUInt16BE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,2,65535,0),this[u]=r>>>8,this[u+1]=r&255,u+2},"writeUInt16BE"),n.prototype.writeUint32LE=n.prototype.writeUInt32LE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,4,4294967295,0),this[u+3]=r>>>24,this[u+2]=r>>>16,this[u+1]=r>>>8,this[u]=r&255,u+4},"writeUInt32LE"),n.prototype.writeUint32BE=n.prototype.writeUInt32BE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,4,4294967295,0),this[u]=r>>>24,this[u+1]=r>>>16,this[u+2]=r>>>8,this[u+3]=r&255,u+4},"writeUInt32BE");function Oe(r,u,d,N,M){se(u,N,M,r,d,7);let O=Number(u&BigInt(4294967295));r[d++]=O,O=O>>8,r[d++]=O,O=O>>8,r[d++]=O,O=O>>8,r[d++]=O;let D=Number(u>>BigInt(32)&BigInt(4294967295));return r[d++]=D,D=D>>8,r[d++]=D,D=D>>8,r[d++]=D,D=D>>8,r[d++]=D,d}m(Oe,"wrtBigUInt64LE");function ke(r,u,d,N,M){se(u,N,M,r,d,7);let O=Number(u&BigInt(4294967295));r[d+7]=O,O=O>>8,r[d+6]=O,O=O>>8,r[d+5]=O,O=O>>8,r[d+4]=O;let D=Number(u>>BigInt(32)&BigInt(4294967295));return r[d+3]=D,D=D>>8,r[d+2]=D,D=D>>8,r[d+1]=D,D=D>>8,r[d]=D,d+8}m(ke,"wrtBigUInt64BE"),n.prototype.writeBigUInt64LE=Fe(m(function(r,u=0){return Oe(this,r,u,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),n.prototype.writeBigUInt64BE=Fe(m(function(r,u=0){return ke(this,r,u,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),n.prototype.writeIntLE=m(function(r,u,d,N){if(r=+r,u=u>>>0,!N){let ae=Math.pow(2,8*d-1);fe(this,r,u,d,ae-1,-ae)}let M=0,O=1,D=0;for(this[u]=r&255;++M<d&&(O*=256);)r<0&&D===0&&this[u+M-1]!==0&&(D=1),this[u+M]=(r/O>>0)-D&255;return u+d},"writeIntLE"),n.prototype.writeIntBE=m(function(r,u,d,N){if(r=+r,u=u>>>0,!N){let ae=Math.pow(2,8*d-1);fe(this,r,u,d,ae-1,-ae)}let M=d-1,O=1,D=0;for(this[u+M]=r&255;--M>=0&&(O*=256);)r<0&&D===0&&this[u+M+1]!==0&&(D=1),this[u+M]=(r/O>>0)-D&255;return u+d},"writeIntBE"),n.prototype.writeInt8=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,1,127,-128),r<0&&(r=255+r+1),this[u]=r&255,u+1},"writeInt8"),n.prototype.writeInt16LE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,2,32767,-32768),this[u]=r&255,this[u+1]=r>>>8,u+2},"writeInt16LE"),n.prototype.writeInt16BE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,2,32767,-32768),this[u]=r>>>8,this[u+1]=r&255,u+2},"writeInt16BE"),n.prototype.writeInt32LE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,4,2147483647,-2147483648),this[u]=r&255,this[u+1]=r>>>8,this[u+2]=r>>>16,this[u+3]=r>>>24,u+4},"writeInt32LE"),n.prototype.writeInt32BE=m(function(r,u,d){return r=+r,u=u>>>0,d||fe(this,r,u,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[u]=r>>>24,this[u+1]=r>>>16,this[u+2]=r>>>8,this[u+3]=r&255,u+4},"writeInt32BE"),n.prototype.writeBigInt64LE=Fe(m(function(r,u=0){return Oe(this,r,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),n.prototype.writeBigInt64BE=Fe(m(function(r,u=0){return ke(this,r,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function Qe(r,u,d,N,M,O){if(d+N>r.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}m(Qe,"checkIEEE754");function De(r,u,d,N,M){return u=+u,d=d>>>0,M||Qe(r,u,d,4),e.write(r,u,d,N,23,4),d+4}m(De,"writeFloat"),n.prototype.writeFloatLE=m(function(r,u,d){return De(this,r,u,!0,d)},"writeFloatLE"),n.prototype.writeFloatBE=m(function(r,u,d){return De(this,r,u,!1,d)},"writeFloatBE");function Y(r,u,d,N,M){return u=+u,d=d>>>0,M||Qe(r,u,d,8),e.write(r,u,d,N,52,8),d+8}m(Y,"writeDouble"),n.prototype.writeDoubleLE=m(function(r,u,d){return Y(this,r,u,!0,d)},"writeDoubleLE"),n.prototype.writeDoubleBE=m(function(r,u,d){return Y(this,r,u,!1,d)},"writeDoubleBE"),n.prototype.copy=m(function(r,u,d,N){if(!n.isBuffer(r))throw new TypeError("argument should be a Buffer");if(d||(d=0),!N&&N!==0&&(N=this.length),u>=r.length&&(u=r.length),u||(u=0),N>0&&N<d&&(N=d),N===d||r.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),r.length-u<N-d&&(N=r.length-u+d);let M=N-d;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,d,N):Uint8Array.prototype.set.call(r,this.subarray(d,N),u),M},"copy"),n.prototype.fill=m(function(r,u,d,N){if(typeof r=="string"){if(typeof u=="string"?(N=u,u=0,d=this.length):typeof d=="string"&&(N=d,d=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!n.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(r.length===1){let O=r.charCodeAt(0);(N==="utf8"&&O<128||N==="latin1")&&(r=O)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(u<0||this.length<u||this.length<d)throw new RangeError("Out of range index");if(d<=u)return this;u=u>>>0,d=d===void 0?this.length:d>>>0,r||(r=0);let M;if(typeof r=="number")for(M=u;M<d;++M)this[M]=r;else{let O=n.isBuffer(r)?r:n.from(r,N),D=O.length;if(D===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(M=0;M<d-u;++M)this[M+u]=O[M%D]}return this},"fill");var re={};function ge(r,u,d){var N;re[r]=(N=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}},m(N,"NodeError"),N)}m(ge,"E"),ge("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(r,u){return`The "${r}" argument must be of type number. Received type ${typeof u}`},TypeError),ge("ERR_OUT_OF_RANGE",function(r,u,d){let N=`The value of "${r}" is out of range.`,M=d;return Number.isInteger(d)&&Math.abs(d)>2**32?M=oe(String(d)):typeof d=="bigint"&&(M=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(M=oe(M)),M+="n"),N+=` It must be ${u}. Received ${M}`,N},RangeError);function oe(r){let u="",d=r.length,N=r[0]==="-"?1:0;for(;d>=N+4;d-=3)u=`_${r.slice(d-3,d)}${u}`;return`${r.slice(0,d)}${u}`}m(oe,"addNumericalSeparator");function ie(r,u,d){_e(u,"offset"),(r[u]===void 0||r[u+d]===void 0)&&Ce(u,r.length-(d+1))}m(ie,"checkBounds");function se(r,u,d,N,M,O){if(r>d||r<u){let D=typeof u=="bigint"?"n":"",ae;throw O>3?u===0||u===BigInt(0)?ae=`>= 0${D} and < 2${D} ** ${(O+1)*8}${D}`:ae=`>= -(2${D} ** ${(O+1)*8-1}${D}) and < 2 ** ${(O+1)*8-1}${D}`:ae=`>= ${u}${D} and <= ${d}${D}`,new re.ERR_OUT_OF_RANGE("value",ae,r)}ie(N,M,O)}m(se,"checkIntBI");function _e(r,u){if(typeof r!="number")throw new re.ERR_INVALID_ARG_TYPE(u,"number",r)}m(_e,"validateNumber");function Ce(r,u,d){throw Math.floor(r)!==r?(_e(r,d),new re.ERR_OUT_OF_RANGE(d||"offset","an integer",r)):u<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE(d||"offset",`>= ${d?1:0} and <= ${u}`,r)}m(Ce,"boundsError");var dt=/[^+/0-9A-Za-z-_]/g;function nt(r){if(r=r.split("=")[0],r=r.trim().replace(dt,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}m(nt,"base64clean");function qe(r,u){u=u||1/0;let d,N=r.length,M=null,O=[];for(let D=0;D<N;++D){if(d=r.charCodeAt(D),d>55295&&d<57344){if(!M){if(d>56319){(u-=3)>-1&&O.push(239,191,189);continue}else if(D+1===N){(u-=3)>-1&&O.push(239,191,189);continue}M=d;continue}if(d<56320){(u-=3)>-1&&O.push(239,191,189),M=d;continue}d=(M-55296<<10|d-56320)+65536}else M&&(u-=3)>-1&&O.push(239,191,189);if(M=null,d<128){if((u-=1)<0)break;O.push(d)}else if(d<2048){if((u-=2)<0)break;O.push(d>>6|192,d&63|128)}else if(d<65536){if((u-=3)<0)break;O.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((u-=4)<0)break;O.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return O}m(qe,"utf8ToBytes");function Qr(r){let u=[];for(let d=0;d<r.length;++d)u.push(r.charCodeAt(d)&255);return u}m(Qr,"asciiToBytes");function qr(r,u){let d,N,M,O=[];for(let D=0;D<r.length&&!((u-=2)<0);++D)d=r.charCodeAt(D),N=d>>8,M=d%256,O.push(M),O.push(N);return O}m(qr,"utf16leToBytes");function Gt(r){return t.toByteArray(nt(r))}m(Gt,"base64ToBytes");function pt(r,u,d,N){let M;for(M=0;M<N&&!(M+d>=u.length||M>=r.length);++M)u[M+d]=r[M];return M}m(pt,"blitBuffer");function Te(r,u){return r instanceof u||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===u.name}m(Te,"isInstance");function Ct(r){return r!==r}m(Ct,"numberIsNaN");var bi=function(){let r="0123456789abcdef",u=new Array(256);for(let d=0;d<16;++d){let N=d*16;for(let M=0;M<16;++M)u[N+M]=r[d]+r[M]}return u}();function Fe(r){return typeof BigInt>"u"?$r:r}m(Fe,"defineBigIntMethod");function $r(){throw new Error("BigInt not supported")}m($r,"BufferBigIntNotDefined")}),Ft,Pr,G,J,V=Ie(()=>{Ft=globalThis,Pr=globalThis.setImmediate??(s=>setTimeout(s,0)),G=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:Ya().Buffer,J=globalThis.process??{},J.env??(J.env={});try{J.nextTick(()=>{})}catch{let s=Promise.resolve();J.nextTick=s.then.bind(s)}}),st=X((s,t)=>{V();var e=typeof Reflect=="object"?Reflect:null,o=e&&typeof e.apply=="function"?e.apply:m(function(E,R,I){return Function.prototype.apply.call(E,R,I)},"ReflectApply"),a;e&&typeof e.ownKeys=="function"?a=e.ownKeys:Object.getOwnPropertySymbols?a=m(function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))},"ReflectOwnKeys"):a=m(function(E){return Object.getOwnPropertyNames(E)},"ReflectOwnKeys");function i(E){console&&console.warn&&console.warn(E)}m(i,"ProcessEmitWarning");var l=Number.isNaN||m(function(E){return E!==E},"NumberIsNaN");function n(){n.init.call(this)}m(n,"EventEmitter"),t.exports=n,t.exports.once=C,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var f=10;function v(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}m(v,"checkListener"),Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:m(function(){return f},"get"),set:m(function(E){if(typeof E!="number"||E<0||l(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");f=E},"set")}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=m(function(E){if(typeof E!="number"||E<0||l(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this},"setMaxListeners");function g(E){return E._maxListeners===void 0?n.defaultMaxListeners:E._maxListeners}m(g,"_getMaxListeners"),n.prototype.getMaxListeners=m(function(){return g(this)},"getMaxListeners"),n.prototype.emit=m(function(E){for(var R=[],I=1;I<arguments.length;I++)R.push(arguments[I]);var A=E==="error",j=this._events;if(j!==void 0)A=A&&j.error===void 0;else if(!A)return!1;if(A){var L;if(R.length>0&&(L=R[0]),L instanceof Error)throw L;var U=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw U.context=L,U}var $=j[E];if($===void 0)return!1;if(typeof $=="function")o($,this,R);else for(var B=$.length,F=p($,B),I=0;I<B;++I)o(F[I],this,R);return!0},"emit");function b(E,R,I,A){var j,L,U;if(v(I),L=E._events,L===void 0?(L=E._events=Object.create(null),E._eventsCount=0):(L.newListener!==void 0&&(E.emit("newListener",R,I.listener?I.listener:I),L=E._events),U=L[R]),U===void 0)U=L[R]=I,++E._eventsCount;else if(typeof U=="function"?U=L[R]=A?[I,U]:[U,I]:A?U.unshift(I):U.push(I),j=g(E),j>0&&U.length>j&&!U.warned){U.warned=!0;var $=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");$.name="MaxListenersExceededWarning",$.emitter=E,$.type=R,$.count=U.length,i($)}return E}m(b,"_addListener"),n.prototype.addListener=m(function(E,R){return b(this,E,R,!1)},"addListener"),n.prototype.on=n.prototype.addListener,n.prototype.prependListener=m(function(E,R){return b(this,E,R,!0)},"prependListener");function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}m(y,"onceWrapper");function w(E,R,I){var A={fired:!1,wrapFn:void 0,target:E,type:R,listener:I},j=y.bind(A);return j.listener=I,A.wrapFn=j,j}m(w,"_onceWrap"),n.prototype.once=m(function(E,R){return v(R),this.on(E,w(this,E,R)),this},"once"),n.prototype.prependOnceListener=m(function(E,R){return v(R),this.prependListener(E,w(this,E,R)),this},"prependOnceListener"),n.prototype.removeListener=m(function(E,R){var I,A,j,L,U;if(v(R),A=this._events,A===void 0)return this;if(I=A[E],I===void 0)return this;if(I===R||I.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete A[E],A.removeListener&&this.emit("removeListener",E,I.listener||R));else if(typeof I!="function"){for(j=-1,L=I.length-1;L>=0;L--)if(I[L]===R||I[L].listener===R){U=I[L].listener,j=L;break}if(j<0)return this;j===0?I.shift():S(I,j),I.length===1&&(A[E]=I[0]),A.removeListener!==void 0&&this.emit("removeListener",E,U||R)}return this},"removeListener"),n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=m(function(E){var R,I,A;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[E]),this;if(arguments.length===0){var j=Object.keys(I),L;for(A=0;A<j.length;++A)L=j[A],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=I[E],typeof R=="function")this.removeListener(E,R);else if(R!==void 0)for(A=R.length-1;A>=0;A--)this.removeListener(E,R[A]);return this},"removeAllListeners");function c(E,R,I){var A=E._events;if(A===void 0)return[];var j=A[R];return j===void 0?[]:typeof j=="function"?I?[j.listener||j]:[j]:I?_(j):p(j,j.length)}m(c,"_listeners"),n.prototype.listeners=m(function(E){return c(this,E,!0)},"listeners"),n.prototype.rawListeners=m(function(E){return c(this,E,!1)},"rawListeners"),n.listenerCount=function(E,R){return typeof E.listenerCount=="function"?E.listenerCount(R):h.call(E,R)},n.prototype.listenerCount=h;function h(E){var R=this._events;if(R!==void 0){var I=R[E];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}m(h,"listenerCount"),n.prototype.eventNames=m(function(){return this._eventsCount>0?a(this._events):[]},"eventNames");function p(E,R){for(var I=new Array(R),A=0;A<R;++A)I[A]=E[A];return I}m(p,"arrayClone");function S(E,R){for(;R+1<E.length;R++)E[R]=E[R+1];E.pop()}m(S,"spliceOne");function _(E){for(var R=new Array(E.length),I=0;I<R.length;++I)R[I]=E[I].listener||E[I];return R}m(_,"unwrapListeners");function C(E,R){return new Promise(function(I,A){function j(U){E.removeListener(R,L),A(U)}m(j,"errorListener");function L(){typeof E.removeListener=="function"&&E.removeListener("error",j),I([].slice.call(arguments))}m(L,"resolver"),T(E,R,L,{once:!0}),R!=="error"&&P(E,j,{once:!0})})}m(C,"once");function P(E,R,I){typeof E.on=="function"&&T(E,"error",R,I)}m(P,"addErrorHandlerIfEventEmitter");function T(E,R,I,A){if(typeof E.on=="function")A.once?E.once(R,I):E.on(R,I);else if(typeof E.addEventListener=="function")E.addEventListener(R,m(function j(L){A.once&&E.removeEventListener(R,j),I(L)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}m(T,"eventTargetAgnosticAddListener")}),Rn={};je(Rn,{Socket:()=>Ut,isIP:()=>Nn});function Nn(s){return 0}var ns,Xt,mt,Ut,Qt=Ie(()=>{V(),ns=rt(st(),1),m(Nn,"isIP"),Xt=/^[^.]+\./,mt=class W extends ns.EventEmitter{constructor(){super(...arguments),K(this,"opts",{}),K(this,"connecting",!1),K(this,"pending",!0),K(this,"writable",!0),K(this,"encrypted",!1),K(this,"authorized",!1),K(this,"destroyed",!1),K(this,"ws",null),K(this,"writeBuffer"),K(this,"tlsState",0),K(this,"tlsRead"),K(this,"tlsWrite")}static get poolQueryViaFetch(){return W.opts.poolQueryViaFetch??W.defaults.poolQueryViaFetch}static set poolQueryViaFetch(t){W.opts.poolQueryViaFetch=t}static get fetchEndpoint(){return W.opts.fetchEndpoint??W.defaults.fetchEndpoint}static set fetchEndpoint(t){W.opts.fetchEndpoint=t}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(t){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return W.opts.fetchFunction??W.defaults.fetchFunction}static set fetchFunction(t){W.opts.fetchFunction=t}static get webSocketConstructor(){return W.opts.webSocketConstructor??W.defaults.webSocketConstructor}static set webSocketConstructor(t){W.opts.webSocketConstructor=t}get webSocketConstructor(){return this.opts.webSocketConstructor??W.webSocketConstructor}set webSocketConstructor(t){this.opts.webSocketConstructor=t}static get wsProxy(){return W.opts.wsProxy??W.defaults.wsProxy}static set wsProxy(t){W.opts.wsProxy=t}get wsProxy(){return this.opts.wsProxy??W.wsProxy}set wsProxy(t){this.opts.wsProxy=t}static get coalesceWrites(){return W.opts.coalesceWrites??W.defaults.coalesceWrites}static set coalesceWrites(t){W.opts.coalesceWrites=t}get coalesceWrites(){return this.opts.coalesceWrites??W.coalesceWrites}set coalesceWrites(t){this.opts.coalesceWrites=t}static get useSecureWebSocket(){return W.opts.useSecureWebSocket??W.defaults.useSecureWebSocket}static set useSecureWebSocket(t){W.opts.useSecureWebSocket=t}get useSecureWebSocket(){return this.opts.useSecureWebSocket??W.useSecureWebSocket}set useSecureWebSocket(t){this.opts.useSecureWebSocket=t}static get forceDisablePgSSL(){return W.opts.forceDisablePgSSL??W.defaults.forceDisablePgSSL}static set forceDisablePgSSL(t){W.opts.forceDisablePgSSL=t}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??W.forceDisablePgSSL}set forceDisablePgSSL(t){this.opts.forceDisablePgSSL=t}static get disableSNI(){return W.opts.disableSNI??W.defaults.disableSNI}static set disableSNI(t){W.opts.disableSNI=t}get disableSNI(){return this.opts.disableSNI??W.disableSNI}set disableSNI(t){this.opts.disableSNI=t}static get pipelineConnect(){return W.opts.pipelineConnect??W.defaults.pipelineConnect}static set pipelineConnect(t){W.opts.pipelineConnect=t}get pipelineConnect(){return this.opts.pipelineConnect??W.pipelineConnect}set pipelineConnect(t){this.opts.pipelineConnect=t}static get subtls(){return W.opts.subtls??W.defaults.subtls}static set subtls(t){W.opts.subtls=t}get subtls(){return this.opts.subtls??W.subtls}set subtls(t){this.opts.subtls=t}static get pipelineTLS(){return W.opts.pipelineTLS??W.defaults.pipelineTLS}static set pipelineTLS(t){W.opts.pipelineTLS=t}get pipelineTLS(){return this.opts.pipelineTLS??W.pipelineTLS}set pipelineTLS(t){this.opts.pipelineTLS=t}static get rootCerts(){return W.opts.rootCerts??W.defaults.rootCerts}static set rootCerts(t){W.opts.rootCerts=t}get rootCerts(){return this.opts.rootCerts??W.rootCerts}set rootCerts(t){this.opts.rootCerts=t}wsProxyAddrForHost(t,e){let o=this.wsProxy;if(o===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof o=="function"?o(t,e):`${o}?address=${t}:${e}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(t,e,o){this.connecting=!0,o&&this.once("connect",o);let a=m(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),i=m((n,f=!1)=>{n.binaryType="arraybuffer",n.addEventListener("error",v=>{this.emit("error",v),this.emit("close")}),n.addEventListener("message",v=>{if(this.tlsState===0){let g=G.from(v.data);this.emit("data",g)}}),n.addEventListener("close",()=>{this.emit("close")}),f?a():n.addEventListener("open",a)},"configureWebSocket"),l;try{l=this.wsProxyAddrForHost(e,typeof t=="string"?parseInt(t,10):t)}catch(n){this.emit("error",n),this.emit("close");return}try{let n=(this.useSecureWebSocket?"wss:":"ws:")+"//"+l;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(n),i(this.ws);else try{this.ws=new WebSocket(n),i(this.ws)}catch{this.ws=new __unstable_WebSocket(n),i(this.ws)}}catch(n){let f=(this.useSecureWebSocket?"https:":"http:")+"//"+l;fetch(f,{headers:{Upgrade:"websocket"}}).then(v=>{if(this.ws=v.webSocket,this.ws==null)throw n;this.ws.accept(),i(this.ws,!0)}).catch(v=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${v}`)),this.emit("close")})}}async startTls(t){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let e=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),o=new this.subtls.WebSocketReadQueue(this.ws),a=o.read.bind(o),i=this.rawWrite.bind(this),{read:l,write:n}=await this.subtls.startTls(t,e,a,i,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=l,this.tlsWrite=n,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let t=await this.tlsRead();if(t===void 0)break;{let e=G.from(t);this.emit("data",e)}}}rawWrite(t){if(!this.coalesceWrites){this.ws.send(t);return}if(this.writeBuffer===void 0)this.writeBuffer=t,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let e=new Uint8Array(this.writeBuffer.length+t.length);e.set(this.writeBuffer),e.set(t,this.writeBuffer.length),this.writeBuffer=e}}write(t,e="utf8",o=a=>{}){return t.length===0?(o(),!0):(typeof t=="string"&&(t=G.from(t,e)),this.tlsState===0?(this.rawWrite(t),o()):this.tlsState===1?this.once("secureConnection",()=>{this.write(t,e,o)}):(this.tlsWrite(t),o()),!0)}end(t=G.alloc(0),e="utf8",o=()=>{}){return this.write(t,e,()=>{this.ws.close(),o()}),this}destroy(){return this.destroyed=!0,this.end()}},m(mt,"Socket"),K(mt,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:m((s,t,e)=>{let o;return e!=null&&e.jwtAuth?o=s.replace(Xt,"apiauth."):o=s.replace(Xt,"api."),"https://"+o+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:m(s=>s+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),K(mt,"opts",{}),Ut=mt}),Pn={};je(Pn,{parse:()=>Tr});function Tr(s,t=!1){let{protocol:e}=new URL(s),o="http:"+s.substring(e.length),{username:a,password:i,host:l,hostname:n,port:f,pathname:v,search:g,searchParams:b,hash:y}=new URL(o);i=decodeURIComponent(i),a=decodeURIComponent(a),v=decodeURIComponent(v);let w=a+":"+i,c=t?Object.fromEntries(b.entries()):g;return{href:s,protocol:e,auth:w,username:a,password:i,host:l,hostname:n,port:f,pathname:v,search:g,query:c,hash:y}}var Tn=Ie(()=>{V(),m(Tr,"parse")}),Mn=X(s=>{V(),s.parse=function(a,i){return new e(a,i).parse()};var t=class Ln{constructor(i,l){this.source=i,this.transform=l||o,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var i=this.source[this.position++];return i==="\\"?{value:this.source[this.position++],escaped:!0}:{value:i,escaped:!1}}record(i){this.recorded.push(i)}newEntry(i){var l;(this.recorded.length>0||i)&&(l=this.recorded.join(""),l==="NULL"&&!i&&(l=null),l!==null&&(l=this.transform(l)),this.entries.push(l),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var i=this.nextCharacter();if(i.value==="=")break}}parse(i){var l,n,f;for(this.consumeDimensions();!this.isEof();)if(l=this.nextCharacter(),l.value==="{"&&!f)this.dimension++,this.dimension>1&&(n=new Ln(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(l.value==="}"&&!f){if(this.dimension--,!this.dimension&&(this.newEntry(),i))return this.entries}else l.value==='"'&&!l.escaped?(f&&this.newEntry(!0),f=!f):l.value===","&&!f?this.newEntry():this.record(l.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};m(t,"ArrayParser");var e=t;function o(a){return a}m(o,"identity")}),jn=X((s,t)=>{V();var e=Mn();t.exports={create:m(function(o,a){return{parse:m(function(){return e.parse(o,a)},"parse")}},"create")}}),Za=X((s,t)=>{V();var e=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,o=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,a=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,i=/^-?infinity$/;t.exports=m(function(g){if(i.test(g))return Number(g.replace("i","I"));var b=e.exec(g);if(!b)return l(g)||null;var y=!!b[8],w=parseInt(b[1],10);y&&(w=f(w));var c=parseInt(b[2],10)-1,h=b[3],p=parseInt(b[4],10),S=parseInt(b[5],10),_=parseInt(b[6],10),C=b[7];C=C?1e3*parseFloat(C):0;var P,T=n(g);return T!=null?(P=new Date(Date.UTC(w,c,h,p,S,_,C)),v(w)&&P.setUTCFullYear(w),T!==0&&P.setTime(P.getTime()-T)):(P=new Date(w,c,h,p,S,_,C),v(w)&&P.setFullYear(w)),P},"parseDate");function l(g){var b=o.exec(g);if(b){var y=parseInt(b[1],10),w=!!b[4];w&&(y=f(y));var c=parseInt(b[2],10)-1,h=b[3],p=new Date(y,c,h);return v(y)&&p.setFullYear(y),p}}m(l,"getDate");function n(g){if(g.endsWith("+00"))return 0;var b=a.exec(g.split(" ")[1]);if(b){var y=b[1];if(y==="Z")return 0;var w=y==="-"?-1:1,c=parseInt(b[2],10)*3600+parseInt(b[3]||0,10)*60+parseInt(b[4]||0,10);return c*w*1e3}}m(n,"timeZoneOffset");function f(g){return-(g-1)}m(f,"bcYearToNegativeYear");function v(g){return g>=0&&g<100}m(v,"is0To99")}),Ja=X((s,t)=>{V(),t.exports=o;var e=Object.prototype.hasOwnProperty;function o(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var n in l)e.call(l,n)&&(a[n]=l[n])}return a}m(o,"extend")}),Xa=X((s,t)=>{V();var e=Ja();t.exports=o;function o(_){if(!(this instanceof o))return new o(_);e(this,S(_))}m(o,"PostgresInterval");var a=["seconds","minutes","hours","days","months","years"];o.prototype.toPostgres=function(){var _=a.filter(this.hasOwnProperty,this);return this.milliseconds&&_.indexOf("seconds")<0&&_.push("seconds"),_.length===0?"0":_.map(function(C){var P=this[C]||0;return C==="seconds"&&this.milliseconds&&(P=(P+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),P+" "+C},this).join(" ")};var i={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},l=["years","months","days"],n=["hours","minutes","seconds"];o.prototype.toISOString=o.prototype.toISO=function(){var _=l.map(P,this).join(""),C=n.map(P,this).join("");return"P"+_+"T"+C;function P(T){var E=this[T]||0;return T==="seconds"&&this.milliseconds&&(E=(E+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),E+i[T]}};var f="([+-]?\\d+)",v=f+"\\s+years?",g=f+"\\s+mons?",b=f+"\\s+days?",y="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",w=new RegExp([v,g,b,y].map(function(_){return"("+_+")?"}).join("\\s*")),c={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},h=["hours","minutes","seconds","milliseconds"];function p(_){var C=_+"000000".slice(_.length);return parseInt(C,10)/1e3}m(p,"parseMilliseconds");function S(_){if(!_)return{};var C=w.exec(_),P=C[8]==="-";return Object.keys(c).reduce(function(T,E){var R=c[E],I=C[R];return!I||(I=E==="milliseconds"?p(I):parseInt(I,10),!I)||(P&&~h.indexOf(E)&&(I*=-1),T[E]=I),T},{})}m(S,"parse")}),el=X((s,t)=>{V(),t.exports=m(function(e){if(/^\\x/.test(e))return new G(e.substr(2),"hex");for(var o="",a=0;a<e.length;)if(e[a]!=="\\")o+=e[a],++a;else if(/[0-7]{3}/.test(e.substr(a+1,3)))o+=String.fromCharCode(parseInt(e.substr(a+1,3),8)),a+=4;else{for(var i=1;a+i<e.length&&e[a+i]==="\\";)i++;for(var l=0;l<Math.floor(i/2);++l)o+="\\";a+=Math.floor(i/2)*2}return new G(o,"binary")},"parseBytea")}),tl=X((s,t)=>{V();var e=Mn(),o=jn(),a=Za(),i=Xa(),l=el();function n(A){return m(function(j){return j===null?j:A(j)},"nullAllowed")}m(n,"allowNull");function f(A){return A===null?A:A==="TRUE"||A==="t"||A==="true"||A==="y"||A==="yes"||A==="on"||A==="1"}m(f,"parseBool");function v(A){return A?e.parse(A,f):null}m(v,"parseBoolArray");function g(A){return parseInt(A,10)}m(g,"parseBaseTenInt");function b(A){return A?e.parse(A,n(g)):null}m(b,"parseIntegerArray");function y(A){return A?e.parse(A,n(function(j){return P(j).trim()})):null}m(y,"parseBigIntegerArray");var w=m(function(A){if(!A)return null;var j=o.create(A,function(L){return L!==null&&(L=E(L)),L});return j.parse()},"parsePointArray"),c=m(function(A){if(!A)return null;var j=o.create(A,function(L){return L!==null&&(L=parseFloat(L)),L});return j.parse()},"parseFloatArray"),h=m(function(A){if(!A)return null;var j=o.create(A);return j.parse()},"parseStringArray"),p=m(function(A){if(!A)return null;var j=o.create(A,function(L){return L!==null&&(L=a(L)),L});return j.parse()},"parseDateArray"),S=m(function(A){if(!A)return null;var j=o.create(A,function(L){return L!==null&&(L=i(L)),L});return j.parse()},"parseIntervalArray"),_=m(function(A){return A?e.parse(A,n(l)):null},"parseByteAArray"),C=m(function(A){return parseInt(A,10)},"parseInteger"),P=m(function(A){var j=String(A);return/^\d+$/.test(j)?j:A},"parseBigInteger"),T=m(function(A){return A?e.parse(A,n(JSON.parse)):null},"parseJsonArray"),E=m(function(A){return A[0]!=="("?null:(A=A.substring(1,A.length-1).split(","),{x:parseFloat(A[0]),y:parseFloat(A[1])})},"parsePoint"),R=m(function(A){if(A[0]!=="<"&&A[1]!=="(")return null;for(var j="(",L="",U=!1,$=2;$<A.length-1;$++){if(U||(j+=A[$]),A[$]===")"){U=!0;continue}else if(!U)continue;A[$]!==","&&(L+=A[$])}var B=E(j);return B.radius=parseFloat(L),B},"parseCircle"),I=m(function(A){A(20,P),A(21,C),A(23,C),A(26,C),A(700,parseFloat),A(701,parseFloat),A(16,f),A(1082,a),A(1114,a),A(1184,a),A(600,E),A(651,h),A(718,R),A(1e3,v),A(1001,_),A(1005,b),A(1007,b),A(1028,b),A(1016,y),A(1017,w),A(1021,c),A(1022,c),A(1231,c),A(1014,h),A(1015,h),A(1008,h),A(1009,h),A(1040,h),A(1041,h),A(1115,p),A(1182,p),A(1185,p),A(1186,i),A(1187,S),A(17,l),A(114,JSON.parse.bind(JSON)),A(3802,JSON.parse.bind(JSON)),A(199,T),A(3807,T),A(3907,h),A(2951,h),A(791,h),A(1183,h),A(1270,h)},"init");t.exports={init:I}}),rl=X((s,t)=>{V();var e=1e6;function o(a){var i=a.readInt32BE(0),l=a.readUInt32BE(4),n="";i<0&&(i=~i+(l===0),l=~l+1>>>0,n="-");var f="",v,g,b,y,w,c;{if(v=i%e,i=i/e>>>0,g=4294967296*v+l,l=g/e>>>0,b=""+(g-e*l),l===0&&i===0)return n+b+f;for(y="",w=6-b.length,c=0;c<w;c++)y+="0";f=y+b+f}{if(v=i%e,i=i/e>>>0,g=4294967296*v+l,l=g/e>>>0,b=""+(g-e*l),l===0&&i===0)return n+b+f;for(y="",w=6-b.length,c=0;c<w;c++)y+="0";f=y+b+f}{if(v=i%e,i=i/e>>>0,g=4294967296*v+l,l=g/e>>>0,b=""+(g-e*l),l===0&&i===0)return n+b+f;for(y="",w=6-b.length,c=0;c<w;c++)y+="0";f=y+b+f}return v=i%e,g=4294967296*v+l,b=""+g%e,n+b+f}m(o,"readInt8"),t.exports=o}),sl=X((s,t)=>{V();var e=rl(),o=m(function(h,p,S,_,C){S=S||0,_=_||!1,C=C||function(U,$,B){return U*Math.pow(2,B)+$};var P=S>>3,T=m(function(U){return _?~U&255:U},"inv"),E=255,R=8-S%8;p<R&&(E=255<<8-p&255,R=p),S&&(E=E>>S%8);var I=0;S%8+p>=8&&(I=C(0,T(h[P])&E,R));for(var A=p+S>>3,j=P+1;j<A;j++)I=C(I,T(h[j]),8);var L=(p+S)%8;return L>0&&(I=C(I,T(h[A])>>8-L,L)),I},"parseBits"),a=m(function(h,p,S){var _=Math.pow(2,S-1)-1,C=o(h,1),P=o(h,S,1);if(P===0)return 0;var T=1,E=m(function(I,A,j){I===0&&(I=1);for(var L=1;L<=j;L++)T/=2,(A&1<<j-L)>0&&(I+=T);return I},"parsePrecisionBits"),R=o(h,p,S+1,!1,E);return P==Math.pow(2,S+1)-1?R===0?C===0?1/0:-1/0:NaN:(C===0?1:-1)*Math.pow(2,P-_)*R},"parseFloatFromBits"),i=m(function(h){return o(h,1)==1?-1*(o(h,15,1,!0)+1):o(h,15,1)},"parseInt16"),l=m(function(h){return o(h,1)==1?-1*(o(h,31,1,!0)+1):o(h,31,1)},"parseInt32"),n=m(function(h){return a(h,23,8)},"parseFloat32"),f=m(function(h){return a(h,52,11)},"parseFloat64"),v=m(function(h){var p=o(h,16,32);if(p==49152)return NaN;for(var S=Math.pow(1e4,o(h,16,16)),_=0,C=[],P=o(h,16),T=0;T<P;T++)_+=o(h,16,64+16*T)*S,S/=1e4;var E=Math.pow(10,o(h,16,48));return(p===0?1:-1)*Math.round(_*E)/E},"parseNumeric"),g=m(function(h,p){var S=o(p,1),_=o(p,63,1),C=new Date((S===0?1:-1)*_/1e3+9466848e5);return h||C.setTime(C.getTime()+C.getTimezoneOffset()*6e4),C.usec=_%1e3,C.getMicroSeconds=function(){return this.usec},C.setMicroSeconds=function(P){this.usec=P},C.getUTCMicroSeconds=function(){return this.usec},C},"parseDate"),b=m(function(h){for(var p=o(h,32),S=o(h,32,32),_=o(h,32,64),C=96,P=[],T=0;T<p;T++)P[T]=o(h,32,C),C+=32,C+=32;var E=m(function(I){var A=o(h,32,C);if(C+=32,A==4294967295)return null;var j;if(I==23||I==20)return j=o(h,A*8,C),C+=A*8,j;if(I==25)return j=h.toString(this.encoding,C>>3,(C+=A<<3)>>3),j;console.log("ERROR: ElementType not implemented: "+I)},"parseElement"),R=m(function(I,A){var j=[],L;if(I.length>1){var U=I.shift();for(L=0;L<U;L++)j[L]=R(I,A);I.unshift(U)}else for(L=0;L<I[0];L++)j[L]=E(A);return j},"parse");return R(P,_)},"parseArray"),y=m(function(h){return h.toString("utf8")},"parseText"),w=m(function(h){return h===null?null:o(h,8)>0},"parseBool"),c=m(function(h){h(20,e),h(21,i),h(23,l),h(26,l),h(1700,v),h(700,n),h(701,f),h(16,w),h(1114,g.bind(null,!1)),h(1184,g.bind(null,!0)),h(1e3,b),h(1007,b),h(1016,b),h(1008,b),h(1009,b),h(25,y)},"init");t.exports={init:c}}),nl=X((s,t)=>{V(),t.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),qt=X(s=>{V();var t=tl(),e=sl(),o=jn(),a=nl();s.getTypeParser=n,s.setTypeParser=f,s.arrayParser=o,s.builtins=a;var i={text:{},binary:{}};function l(v){return String(v)}m(l,"noParse");function n(v,g){return g=g||"text",i[g]&&i[g][v]||l}m(n,"getTypeParser");function f(v,g,b){typeof g=="function"&&(b=g,g="text"),i[g][v]=b}m(f,"setTypeParser"),t.init(function(v,g){i.text[v]=g}),e.init(function(v,g){i.binary[v]=g})}),Mr=X((s,t)=>{V();var e=qt();function o(a){this._types=a||e,this.text={},this.binary={}}m(o,"TypeOverrides"),o.prototype.getOverrides=function(a){switch(a){case"text":return this.text;case"binary":return this.binary;default:return{}}},o.prototype.setTypeParser=function(a,i,l){typeof i=="function"&&(l=i,i="text"),this.getOverrides(i)[a]=l},o.prototype.getTypeParser=function(a,i){return i=i||"text",this.getOverrides(i)[a]||this._types.getTypeParser(a,i)},t.exports=o});function bt(s){let t=1779033703,e=3144134277,o=1013904242,a=2773480762,i=1359893119,l=2600822924,n=528734635,f=1541459225,v=0,g=0,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],y=m((_,C)=>_>>>C|_<<32-C,"rrot"),w=new Uint32Array(64),c=new Uint8Array(64),h=m(()=>{for(let j=0,L=0;j<16;j++,L+=4)w[j]=c[L]<<24|c[L+1]<<16|c[L+2]<<8|c[L+3];for(let j=16;j<64;j++){let L=y(w[j-15],7)^y(w[j-15],18)^w[j-15]>>>3,U=y(w[j-2],17)^y(w[j-2],19)^w[j-2]>>>10;w[j]=w[j-16]+L+w[j-7]+U|0}let _=t,C=e,P=o,T=a,E=i,R=l,I=n,A=f;for(let j=0;j<64;j++){let L=y(E,6)^y(E,11)^y(E,25),U=E&R^~E&I,$=A+L+U+b[j]+w[j]|0,B=y(_,2)^y(_,13)^y(_,22),F=_&C^_&P^C&P,q=B+F|0;A=I,I=R,R=E,E=T+$|0,T=P,P=C,C=_,_=$+q|0}t=t+_|0,e=e+C|0,o=o+P|0,a=a+T|0,i=i+E|0,l=l+R|0,n=n+I|0,f=f+A|0,g=0},"process"),p=m(_=>{typeof _=="string"&&(_=new TextEncoder().encode(_));for(let C=0;C<_.length;C++)c[g++]=_[C],g===64&&h();v+=_.length},"add"),S=m(()=>{if(c[g++]=128,g==64&&h(),g+8>64){for(;g<64;)c[g++]=0;h()}for(;g<58;)c[g++]=0;let _=v*8;c[g++]=_/1099511627776&255,c[g++]=_/4294967296&255,c[g++]=_>>>24,c[g++]=_>>>16&255,c[g++]=_>>>8&255,c[g++]=_&255,h();let C=new Uint8Array(32);return C[0]=t>>>24,C[1]=t>>>16&255,C[2]=t>>>8&255,C[3]=t&255,C[4]=e>>>24,C[5]=e>>>16&255,C[6]=e>>>8&255,C[7]=e&255,C[8]=o>>>24,C[9]=o>>>16&255,C[10]=o>>>8&255,C[11]=o&255,C[12]=a>>>24,C[13]=a>>>16&255,C[14]=a>>>8&255,C[15]=a&255,C[16]=i>>>24,C[17]=i>>>16&255,C[18]=i>>>8&255,C[19]=i&255,C[20]=l>>>24,C[21]=l>>>16&255,C[22]=l>>>8&255,C[23]=l&255,C[24]=n>>>24,C[25]=n>>>16&255,C[26]=n>>>8&255,C[27]=n&255,C[28]=f>>>24,C[29]=f>>>16&255,C[30]=f>>>8&255,C[31]=f&255,C},"digest");return s===void 0?{add:p,digest:S}:(p(s),S())}var il=Ie(()=>{V(),m(bt,"sha256")}),Ue,wr,ol=Ie(()=>{V(),Ue=class Ne{constructor(){K(this,"_dataLength",0),K(this,"_bufferLength",0),K(this,"_state",new Int32Array(4)),K(this,"_buffer",new ArrayBuffer(68)),K(this,"_buffer8"),K(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(t,e=!1){return this.onePassHasher.start().appendByteArray(t).end(e)}static hashStr(t,e=!1){return this.onePassHasher.start().appendStr(t).end(e)}static hashAsciiStr(t,e=!1){return this.onePassHasher.start().appendAsciiStr(t).end(e)}static _hex(t){let e=Ne.hexChars,o=Ne.hexOut,a,i,l,n;for(n=0;n<4;n+=1)for(i=n*8,a=t[n],l=0;l<8;l+=2)o[i+1+l]=e.charAt(a&15),a>>>=4,o[i+0+l]=e.charAt(a&15),a>>>=4;return o.join("")}static _md5cycle(t,e){let o=t[0],a=t[1],i=t[2],l=t[3];o+=(a&i|~a&l)+e[0]-680876936|0,o=(o<<7|o>>>25)+a|0,l+=(o&a|~o&i)+e[1]-389564586|0,l=(l<<12|l>>>20)+o|0,i+=(l&o|~l&a)+e[2]+606105819|0,i=(i<<17|i>>>15)+l|0,a+=(i&l|~i&o)+e[3]-1044525330|0,a=(a<<22|a>>>10)+i|0,o+=(a&i|~a&l)+e[4]-176418897|0,o=(o<<7|o>>>25)+a|0,l+=(o&a|~o&i)+e[5]+1200080426|0,l=(l<<12|l>>>20)+o|0,i+=(l&o|~l&a)+e[6]-1473231341|0,i=(i<<17|i>>>15)+l|0,a+=(i&l|~i&o)+e[7]-45705983|0,a=(a<<22|a>>>10)+i|0,o+=(a&i|~a&l)+e[8]+1770035416|0,o=(o<<7|o>>>25)+a|0,l+=(o&a|~o&i)+e[9]-1958414417|0,l=(l<<12|l>>>20)+o|0,i+=(l&o|~l&a)+e[10]-42063|0,i=(i<<17|i>>>15)+l|0,a+=(i&l|~i&o)+e[11]-1990404162|0,a=(a<<22|a>>>10)+i|0,o+=(a&i|~a&l)+e[12]+1804603682|0,o=(o<<7|o>>>25)+a|0,l+=(o&a|~o&i)+e[13]-40341101|0,l=(l<<12|l>>>20)+o|0,i+=(l&o|~l&a)+e[14]-1502002290|0,i=(i<<17|i>>>15)+l|0,a+=(i&l|~i&o)+e[15]+1236535329|0,a=(a<<22|a>>>10)+i|0,o+=(a&l|i&~l)+e[1]-165796510|0,o=(o<<5|o>>>27)+a|0,l+=(o&i|a&~i)+e[6]-1069501632|0,l=(l<<9|l>>>23)+o|0,i+=(l&a|o&~a)+e[11]+643717713|0,i=(i<<14|i>>>18)+l|0,a+=(i&o|l&~o)+e[0]-373897302|0,a=(a<<20|a>>>12)+i|0,o+=(a&l|i&~l)+e[5]-701558691|0,o=(o<<5|o>>>27)+a|0,l+=(o&i|a&~i)+e[10]+38016083|0,l=(l<<9|l>>>23)+o|0,i+=(l&a|o&~a)+e[15]-660478335|0,i=(i<<14|i>>>18)+l|0,a+=(i&o|l&~o)+e[4]-405537848|0,a=(a<<20|a>>>12)+i|0,o+=(a&l|i&~l)+e[9]+568446438|0,o=(o<<5|o>>>27)+a|0,l+=(o&i|a&~i)+e[14]-1019803690|0,l=(l<<9|l>>>23)+o|0,i+=(l&a|o&~a)+e[3]-187363961|0,i=(i<<14|i>>>18)+l|0,a+=(i&o|l&~o)+e[8]+1163531501|0,a=(a<<20|a>>>12)+i|0,o+=(a&l|i&~l)+e[13]-1444681467|0,o=(o<<5|o>>>27)+a|0,l+=(o&i|a&~i)+e[2]-51403784|0,l=(l<<9|l>>>23)+o|0,i+=(l&a|o&~a)+e[7]+1735328473|0,i=(i<<14|i>>>18)+l|0,a+=(i&o|l&~o)+e[12]-1926607734|0,a=(a<<20|a>>>12)+i|0,o+=(a^i^l)+e[5]-378558|0,o=(o<<4|o>>>28)+a|0,l+=(o^a^i)+e[8]-2022574463|0,l=(l<<11|l>>>21)+o|0,i+=(l^o^a)+e[11]+1839030562|0,i=(i<<16|i>>>16)+l|0,a+=(i^l^o)+e[14]-35309556|0,a=(a<<23|a>>>9)+i|0,o+=(a^i^l)+e[1]-1530992060|0,o=(o<<4|o>>>28)+a|0,l+=(o^a^i)+e[4]+1272893353|0,l=(l<<11|l>>>21)+o|0,i+=(l^o^a)+e[7]-155497632|0,i=(i<<16|i>>>16)+l|0,a+=(i^l^o)+e[10]-1094730640|0,a=(a<<23|a>>>9)+i|0,o+=(a^i^l)+e[13]+681279174|0,o=(o<<4|o>>>28)+a|0,l+=(o^a^i)+e[0]-358537222|0,l=(l<<11|l>>>21)+o|0,i+=(l^o^a)+e[3]-722521979|0,i=(i<<16|i>>>16)+l|0,a+=(i^l^o)+e[6]+76029189|0,a=(a<<23|a>>>9)+i|0,o+=(a^i^l)+e[9]-640364487|0,o=(o<<4|o>>>28)+a|0,l+=(o^a^i)+e[12]-421815835|0,l=(l<<11|l>>>21)+o|0,i+=(l^o^a)+e[15]+530742520|0,i=(i<<16|i>>>16)+l|0,a+=(i^l^o)+e[2]-995338651|0,a=(a<<23|a>>>9)+i|0,o+=(i^(a|~l))+e[0]-198630844|0,o=(o<<6|o>>>26)+a|0,l+=(a^(o|~i))+e[7]+1126891415|0,l=(l<<10|l>>>22)+o|0,i+=(o^(l|~a))+e[14]-1416354905|0,i=(i<<15|i>>>17)+l|0,a+=(l^(i|~o))+e[5]-57434055|0,a=(a<<21|a>>>11)+i|0,o+=(i^(a|~l))+e[12]+1700485571|0,o=(o<<6|o>>>26)+a|0,l+=(a^(o|~i))+e[3]-1894986606|0,l=(l<<10|l>>>22)+o|0,i+=(o^(l|~a))+e[10]-1051523|0,i=(i<<15|i>>>17)+l|0,a+=(l^(i|~o))+e[1]-2054922799|0,a=(a<<21|a>>>11)+i|0,o+=(i^(a|~l))+e[8]+1873313359|0,o=(o<<6|o>>>26)+a|0,l+=(a^(o|~i))+e[15]-30611744|0,l=(l<<10|l>>>22)+o|0,i+=(o^(l|~a))+e[6]-1560198380|0,i=(i<<15|i>>>17)+l|0,a+=(l^(i|~o))+e[13]+1309151649|0,a=(a<<21|a>>>11)+i|0,o+=(i^(a|~l))+e[4]-145523070|0,o=(o<<6|o>>>26)+a|0,l+=(a^(o|~i))+e[11]-1120210379|0,l=(l<<10|l>>>22)+o|0,i+=(o^(l|~a))+e[2]+718787259|0,i=(i<<15|i>>>17)+l|0,a+=(l^(i|~o))+e[9]-343485551|0,a=(a<<21|a>>>11)+i|0,t[0]=o+t[0]|0,t[1]=a+t[1]|0,t[2]=i+t[2]|0,t[3]=l+t[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(Ne.stateIdentity),this}appendStr(t){let e=this._buffer8,o=this._buffer32,a=this._bufferLength,i,l;for(l=0;l<t.length;l+=1){if(i=t.charCodeAt(l),i<128)e[a++]=i;else if(i<2048)e[a++]=(i>>>6)+192,e[a++]=i&63|128;else if(i<55296||i>56319)e[a++]=(i>>>12)+224,e[a++]=i>>>6&63|128,e[a++]=i&63|128;else{if(i=(i-55296)*1024+(t.charCodeAt(++l)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");e[a++]=(i>>>18)+240,e[a++]=i>>>12&63|128,e[a++]=i>>>6&63|128,e[a++]=i&63|128}a>=64&&(this._dataLength+=64,Ne._md5cycle(this._state,o),a-=64,o[0]=o[16])}return this._bufferLength=a,this}appendAsciiStr(t){let e=this._buffer8,o=this._buffer32,a=this._bufferLength,i,l=0;for(;;){for(i=Math.min(t.length-l,64-a);i--;)e[a++]=t.charCodeAt(l++);if(a<64)break;this._dataLength+=64,Ne._md5cycle(this._state,o),a=0}return this._bufferLength=a,this}appendByteArray(t){let e=this._buffer8,o=this._buffer32,a=this._bufferLength,i,l=0;for(;;){for(i=Math.min(t.length-l,64-a);i--;)e[a++]=t[l++];if(a<64)break;this._dataLength+=64,Ne._md5cycle(this._state,o),a=0}return this._bufferLength=a,this}getState(){let t=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[t[0],t[1],t[2],t[3]]}}setState(t){let e=t.buffer,o=t.state,a=this._state,i;for(this._dataLength=t.length,this._bufferLength=t.buflen,a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],i=0;i<e.length;i+=1)this._buffer8[i]=e.charCodeAt(i)}end(t=!1){let e=this._bufferLength,o=this._buffer8,a=this._buffer32,i=(e>>2)+1;this._dataLength+=e;let l=this._dataLength*8;if(o[e]=128,o[e+1]=o[e+2]=o[e+3]=0,a.set(Ne.buffer32Identity.subarray(i),i),e>55&&(Ne._md5cycle(this._state,a),a.set(Ne.buffer32Identity)),l<=4294967295)a[14]=l;else{let n=l.toString(16).match(/(.*?)(.{0,8})$/);if(n===null)return;let f=parseInt(n[2],16),v=parseInt(n[1],16)||0;a[14]=f,a[15]=v}return Ne._md5cycle(this._state,a),t?this._state:Ne._hex(this._state)}},m(Ue,"Md5"),K(Ue,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),K(Ue,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),K(Ue,"hexChars","0123456789abcdef"),K(Ue,"hexOut",[]),K(Ue,"onePassHasher",new Ue),wr=Ue}),Lr={};je(Lr,{createHash:()=>Bn,createHmac:()=>On,randomBytes:()=>kn});function kn(s){return crypto.getRandomValues(G.alloc(s))}function Bn(s){if(s==="sha256")return{update:m(function(t){return{digest:m(function(){return G.from(bt(t))},"digest")}},"update")};if(s==="md5")return{update:m(function(t){return{digest:m(function(){return typeof t=="string"?wr.hashStr(t):wr.hashByteArray(t)},"digest")}},"update")};throw new Error(`Hash type '${s}' not supported`)}function On(s,t){if(s!=="sha256")throw new Error(`Only sha256 is supported (requested: '${s}')`);return{update:m(function(e){return{digest:m(function(){typeof t=="string"&&(t=new TextEncoder().encode(t)),typeof e=="string"&&(e=new TextEncoder().encode(e));let o=t.length;if(o>64)t=bt(t);else if(o<64){let f=new Uint8Array(64);f.set(t),t=f}let a=new Uint8Array(64),i=new Uint8Array(64);for(let f=0;f<64;f++)a[f]=54^t[f],i[f]=92^t[f];let l=new Uint8Array(e.length+64);l.set(a,0),l.set(e,64);let n=new Uint8Array(96);return n.set(i,0),n.set(bt(l),64),G.from(bt(n))},"digest")}},"update")}}var Dn=Ie(()=>{V(),il(),ol(),m(kn,"randomBytes"),m(Bn,"createHash"),m(On,"createHmac")}),$t=X((s,t)=>{V(),t.exports={host:"localhost",user:J.platform==="win32"?J.env.USERNAME:J.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var e=qt(),o=e.getTypeParser(20,"text"),a=e.getTypeParser(1016,"text");t.exports.__defineSetter__("parseInt8",function(i){e.setTypeParser(20,"text",i?e.getTypeParser(23,"text"):o),e.setTypeParser(1016,"text",i?e.getTypeParser(1007,"text"):a)})}),Ht=X((s,t)=>{V();var e=(Dn(),ve(Lr)),o=$t();function a(c){var h=c.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+h+'"'}m(a,"escapeElement");function i(c){for(var h="{",p=0;p<c.length;p++)p>0&&(h=h+","),c[p]===null||typeof c[p]>"u"?h=h+"NULL":Array.isArray(c[p])?h=h+i(c[p]):c[p]instanceof G?h+="\\\\x"+c[p].toString("hex"):h+=a(l(c[p]));return h=h+"}",h}m(i,"arrayString");var l=m(function(c,h){if(c==null)return null;if(c instanceof G)return c;if(ArrayBuffer.isView(c)){var p=G.from(c.buffer,c.byteOffset,c.byteLength);return p.length===c.byteLength?p:p.slice(c.byteOffset,c.byteOffset+c.byteLength)}return c instanceof Date?o.parseInputDatesAsUTC?g(c):v(c):Array.isArray(c)?i(c):typeof c=="object"?n(c,h):c.toString()},"prepareValue");function n(c,h){if(c&&typeof c.toPostgres=="function"){if(h=h||[],h.indexOf(c)!==-1)throw new Error('circular reference detected while preparing "'+c+'" for query');return h.push(c),l(c.toPostgres(l),h)}return JSON.stringify(c)}m(n,"prepareObject");function f(c,h){for(c=""+c;c.length<h;)c="0"+c;return c}m(f,"pad");function v(c){var h=-c.getTimezoneOffset(),p=c.getFullYear(),S=p<1;S&&(p=Math.abs(p)+1);var _=f(p,4)+"-"+f(c.getMonth()+1,2)+"-"+f(c.getDate(),2)+"T"+f(c.getHours(),2)+":"+f(c.getMinutes(),2)+":"+f(c.getSeconds(),2)+"."+f(c.getMilliseconds(),3);return h<0?(_+="-",h*=-1):_+="+",_+=f(Math.floor(h/60),2)+":"+f(h%60,2),S&&(_+=" BC"),_}m(v,"dateToString");function g(c){var h=c.getUTCFullYear(),p=h<1;p&&(h=Math.abs(h)+1);var S=f(h,4)+"-"+f(c.getUTCMonth()+1,2)+"-"+f(c.getUTCDate(),2)+"T"+f(c.getUTCHours(),2)+":"+f(c.getUTCMinutes(),2)+":"+f(c.getUTCSeconds(),2)+"."+f(c.getUTCMilliseconds(),3);return S+="+00:00",p&&(S+=" BC"),S}m(g,"dateToStringUTC");function b(c,h,p){return c=typeof c=="string"?{text:c}:c,h&&(typeof h=="function"?c.callback=h:c.values=h),p&&(c.callback=p),c}m(b,"normalizeQueryConfig");var y=m(function(c){return e.createHash("md5").update(c,"utf-8").digest("hex")},"md5"),w=m(function(c,h,p){var S=y(h+c),_=y(G.concat([G.from(S),p]));return"md5"+_},"postgresMd5PasswordHash");t.exports={prepareValue:m(function(c){return l(c)},"prepareValueWrapper"),normalizeQueryConfig:b,postgresMd5PasswordHash:w,md5:y}}),Et={};je(Et,{default:()=>Fn});var Fn,Vt=Ie(()=>{V(),Fn={}}),al=X((s,t)=>{V();var e=(Dn(),ve(Lr));function o(h){if(h.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let p=e.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:p,response:"n,,n=*,r="+p,message:"SASLInitialResponse"}}m(o,"startSession");function a(h,p,S){if(h.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof p!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof S!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let _=v(S);if(_.nonce.startsWith(h.clientNonce)){if(_.nonce.length===h.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var C=G.from(_.salt,"base64"),P=c(p,C,_.iteration),T=w(P,"Client Key"),E=y(T),R="n=*,r="+h.clientNonce,I="r="+_.nonce+",s="+_.salt+",i="+_.iteration,A="c=biws,r="+_.nonce,j=R+","+I+","+A,L=w(E,j),U=b(T,L),$=U.toString("base64"),B=w(P,"Server Key"),F=w(B,j);h.message="SASLResponse",h.serverSignature=F.toString("base64"),h.response=A+",p="+$}m(a,"continueSession");function i(h,p){if(h.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof p!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:S}=g(p);if(S!==h.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}m(i,"finalizeSession");function l(h){if(typeof h!="string")throw new TypeError("SASL: text must be a string");return h.split("").map((p,S)=>h.charCodeAt(S)).every(p=>p>=33&&p<=43||p>=45&&p<=126)}m(l,"isPrintableChars");function n(h){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(h)}m(n,"isBase64");function f(h){if(typeof h!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(h.split(",").map(p=>{if(!/^.=/.test(p))throw new Error("SASL: Invalid attribute pair entry");let S=p[0],_=p.substring(2);return[S,_]}))}m(f,"parseAttributePairs");function v(h){let p=f(h),S=p.get("r");if(S){if(!l(S))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let _=p.get("s");if(_){if(!n(_))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let C=p.get("i");if(C){if(!/^[1-9][0-9]*$/.test(C))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let P=parseInt(C,10);return{nonce:S,salt:_,iteration:P}}m(v,"parseServerFirstMessage");function g(h){let p=f(h).get("v");if(p){if(!n(p))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:p}}m(g,"parseServerFinalMessage");function b(h,p){if(!G.isBuffer(h))throw new TypeError("first argument must be a Buffer");if(!G.isBuffer(p))throw new TypeError("second argument must be a Buffer");if(h.length!==p.length)throw new Error("Buffer lengths must match");if(h.length===0)throw new Error("Buffers cannot be empty");return G.from(h.map((S,_)=>h[_]^p[_]))}m(b,"xorBuffers");function y(h){return e.createHash("sha256").update(h).digest()}m(y,"sha256");function w(h,p){return e.createHmac("sha256",h).update(p).digest()}m(w,"hmacSha256");function c(h,p,S){for(var _=w(h,G.concat([p,G.from([0,0,0,1])])),C=_,P=0;P<S-1;P++)_=w(h,_),C=b(C,_);return C}m(c,"Hi"),t.exports={startSession:o,continueSession:a,finalizeSession:i}}),jr={};je(jr,{join:()=>Un});function Un(...s){return s.join("/")}var Qn=Ie(()=>{V(),m(Un,"join")}),kr={};je(kr,{stat:()=>qn});function qn(s,t){t(new Error("No filesystem"))}var $n=Ie(()=>{V(),m(qn,"stat")}),Br={};je(Br,{default:()=>Hn});var Hn,Vn=Ie(()=>{V(),Hn={}}),Wn={};je(Wn,{StringDecoder:()=>Gn});var er,Gn,ll=Ie(()=>{V(),er=class{constructor(t){K(this,"td"),this.td=new TextDecoder(t)}write(t){return this.td.decode(t,{stream:!0})}end(t){return this.td.decode(t)}},m(er,"StringDecoder"),Gn=er}),cl=X((s,t)=>{V();var{Transform:e}=(Vn(),ve(Br)),{StringDecoder:o}=(ll(),ve(Wn)),a=Symbol("last"),i=Symbol("decoder");function l(b,y,w){let c;if(this.overflow){if(c=this[i].write(b).split(this.matcher),c.length===1)return w();c.shift(),this.overflow=!1}else this[a]+=this[i].write(b),c=this[a].split(this.matcher);this[a]=c.pop();for(let h=0;h<c.length;h++)try{f(this,this.mapper(c[h]))}catch(p){return w(p)}if(this.overflow=this[a].length>this.maxLength,this.overflow&&!this.skipOverflow){w(new Error("maximum buffer reached"));return}w()}m(l,"transform");function n(b){if(this[a]+=this[i].end(),this[a])try{f(this,this.mapper(this[a]))}catch(y){return b(y)}b()}m(n,"flush");function f(b,y){y!==void 0&&b.push(y)}m(f,"push");function v(b){return b}m(v,"noop");function g(b,y,w){switch(b=b||/\r?\n/,y=y||v,w=w||{},arguments.length){case 1:typeof b=="function"?(y=b,b=/\r?\n/):typeof b=="object"&&!(b instanceof RegExp)&&!b[Symbol.split]&&(w=b,b=/\r?\n/);break;case 2:typeof b=="function"?(w=y,y=b,b=/\r?\n/):typeof y=="object"&&(w=y,y=v)}w=Object.assign({},w),w.autoDestroy=!0,w.transform=l,w.flush=n,w.readableObjectMode=!0;let c=new e(w);return c[a]="",c[i]=new o("utf8"),c.matcher=b,c.mapper=y,c.maxLength=w.maxLength,c.skipOverflow=w.skipOverflow||!1,c.overflow=!1,c._destroy=function(h,p){this._writableState.errorEmitted=!1,p(h)},c}m(g,"split"),t.exports=g}),ul=X((s,t)=>{V();var e=(Qn(),ve(jr)),o=(Vn(),ve(Br)).Stream,a=cl(),i=(Vt(),ve(Et)),l=5432,n=J.platform==="win32",f=J.stderr,v=56,g=7,b=61440,y=32768;function w(T){return(T&b)==y}m(w,"isRegFile");var c=["host","port","database","user","password"],h=c.length,p=c[h-1];function S(){var T=f instanceof o&&f.writable===!0;if(T){var E=Array.prototype.slice.call(arguments).concat(`
`);f.write(i.format.apply(i,E))}}m(S,"warn"),Object.defineProperty(t.exports,"isWin",{get:m(function(){return n},"get"),set:m(function(T){n=T},"set")}),t.exports.warnTo=function(T){var E=f;return f=T,E},t.exports.getFileName=function(T){var E=T||J.env,R=E.PGPASSFILE||(n?e.join(E.APPDATA||"./","postgresql","pgpass.conf"):e.join(E.HOME||"./",".pgpass"));return R},t.exports.usePgPass=function(T,E){return Object.prototype.hasOwnProperty.call(J.env,"PGPASSWORD")?!1:n?!0:(E=E||"<unkn>",w(T.mode)?T.mode&(v|g)?(S('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',E),!1):!0:(S('WARNING: password file "%s" is not a plain file',E),!1))};var _=t.exports.match=function(T,E){return c.slice(0,-1).reduce(function(R,I,A){return A==1&&Number(T[I]||l)===Number(E[I])?R&&!0:R&&(E[I]==="*"||E[I]===T[I])},!0)};t.exports.getPassword=function(T,E,R){var I,A=E.pipe(a());function j($){var B=C($);B&&P(B)&&_(T,B)&&(I=B[p],A.end())}m(j,"onLine");var L=m(function(){E.destroy(),R(I)},"onEnd"),U=m(function($){E.destroy(),S("WARNING: error on reading file: %s",$),R(void 0)},"onErr");E.on("error",U),A.on("data",j).on("end",L).on("error",U)};var C=t.exports.parseLine=function(T){if(T.length<11||T.match(/^\s+#/))return null;for(var E="",R="",I=0,A=0,j=0,L={},U=!1,$=m(function(F,q,H){var z=T.substring(q,H);Object.hasOwnProperty.call(J.env,"PGPASS_NO_DEESCAPE")||(z=z.replace(/\\([:\\])/g,"$1")),L[c[F]]=z},"addToObj"),B=0;B<T.length-1;B+=1){if(E=T.charAt(B+1),R=T.charAt(B),U=I==h-1,U){$(I,A);break}B>=0&&E==":"&&R!=="\\"&&($(I,A,B+1),A=B+2,I+=1)}return L=Object.keys(L).length===h?L:null,L},P=t.exports.isValidEntry=function(T){for(var E={0:function(L){return L.length>0},1:function(L){return L==="*"?!0:(L=Number(L),isFinite(L)&&L>0&&L<9007199254740992&&Math.floor(L)===L)},2:function(L){return L.length>0},3:function(L){return L.length>0},4:function(L){return L.length>0}},R=0;R<c.length;R+=1){var I=E[R],A=T[c[R]]||"",j=I(A);if(!j)return!1}return!0}}),hl=X((s,t)=>{V(),Qn(),ve(jr);var e=($n(),ve(kr)),o=ul();t.exports=function(a,i){var l=o.getFileName();e.stat(l,function(n,f){if(n||!o.usePgPass(f,l))return i(void 0);var v=e.createReadStream(l);o.getPassword(a,v,i)})},t.exports.warnTo=o.warnTo}),zn={};je(zn,{default:()=>Kn});var Kn,fl=Ie(()=>{V(),Kn={}}),dl=X((s,t)=>{V();var e=(Tn(),ve(Pn)),o=($n(),ve(kr));function a(i){if(i.charAt(0)==="/"){var n=i.split(" ");return{host:n[0],database:n[1]}}var l=e.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(i)?encodeURI(i).replace(/\%25(\d\d)/g,"%$1"):i,!0),n=l.query;for(var f in n)Array.isArray(n[f])&&(n[f]=n[f][n[f].length-1]);var v=(l.auth||":").split(":");if(n.user=v[0],n.password=v.splice(1).join(":"),n.port=l.port,l.protocol=="socket:")return n.host=decodeURI(l.pathname),n.database=l.query.db,n.client_encoding=l.query.encoding,n;n.host||(n.host=l.hostname);var g=l.pathname;if(!n.host&&g&&/^%2f/i.test(g)){var b=g.split("/");n.host=decodeURIComponent(b[0]),g=b.splice(1).join("/")}switch(g&&g.charAt(0)==="/"&&(g=g.slice(1)||null),n.database=g&&decodeURI(g),(n.ssl==="true"||n.ssl==="1")&&(n.ssl=!0),n.ssl==="0"&&(n.ssl=!1),(n.sslcert||n.sslkey||n.sslrootcert||n.sslmode)&&(n.ssl={}),n.sslcert&&(n.ssl.cert=o.readFileSync(n.sslcert).toString()),n.sslkey&&(n.ssl.key=o.readFileSync(n.sslkey).toString()),n.sslrootcert&&(n.ssl.ca=o.readFileSync(n.sslrootcert).toString()),n.sslmode){case"disable":{n.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{n.ssl.rejectUnauthorized=!1;break}}return n}m(a,"parse"),t.exports=a,a.parse=a}),Or=X((s,t)=>{V();var e=(fl(),ve(zn)),o=$t(),a=dl().parse,i=m(function(b,y,w){return w===void 0?w=J.env["PG"+b.toUpperCase()]:w===!1||(w=J.env[w]),y[b]||w||o[b]},"val"),l=m(function(){switch(J.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return o.ssl},"readSSLConfigFromEnvironment"),n=m(function(b){return"'"+(""+b).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),f=m(function(b,y,w){var c=y[w];c!=null&&b.push(w+"="+n(c))},"add"),v=class{constructor(y){y=typeof y=="string"?a(y):y||{},y.connectionString&&(y=Object.assign({},y,a(y.connectionString))),this.user=i("user",y),this.database=i("database",y),this.database===void 0&&(this.database=this.user),this.port=parseInt(i("port",y),10),this.host=i("host",y),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:i("password",y)}),this.binary=i("binary",y),this.options=i("options",y),this.ssl=typeof y.ssl>"u"?l():y.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=i("client_encoding",y),this.replication=i("replication",y),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=i("application_name",y,"PGAPPNAME"),this.fallback_application_name=i("fallback_application_name",y,!1),this.statement_timeout=i("statement_timeout",y,!1),this.lock_timeout=i("lock_timeout",y,!1),this.idle_in_transaction_session_timeout=i("idle_in_transaction_session_timeout",y,!1),this.query_timeout=i("query_timeout",y,!1),y.connectionTimeoutMillis===void 0?this.connect_timeout=J.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(y.connectionTimeoutMillis/1e3),y.keepAlive===!1?this.keepalives=0:y.keepAlive===!0&&(this.keepalives=1),typeof y.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(y.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(y){var w=[];f(w,this,"user"),f(w,this,"password"),f(w,this,"port"),f(w,this,"application_name"),f(w,this,"fallback_application_name"),f(w,this,"connect_timeout"),f(w,this,"options");var c=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(f(w,c,"sslmode"),f(w,c,"sslca"),f(w,c,"sslkey"),f(w,c,"sslcert"),f(w,c,"sslrootcert"),this.database&&w.push("dbname="+n(this.database)),this.replication&&w.push("replication="+n(this.replication)),this.host&&w.push("host="+n(this.host)),this.isDomainSocket)return y(null,w.join(" "));this.client_encoding&&w.push("client_encoding="+n(this.client_encoding)),e.lookup(this.host,function(h,p){return h?y(h,null):(w.push("hostaddr="+n(p)),y(null,w.join(" ")))})}};m(v,"ConnectionParameters");var g=v;t.exports=g}),pl=X((s,t)=>{V();var e=qt(),o=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,a=class{constructor(n,f){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=f,this.RowCtor=null,this.rowAsArray=n==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(n){var f;n.text?f=o.exec(n.text):f=o.exec(n.command),f&&(this.command=f[1],f[3]?(this.oid=parseInt(f[2],10),this.rowCount=parseInt(f[3],10)):f[2]&&(this.rowCount=parseInt(f[2],10)))}_parseRowAsArray(n){for(var f=new Array(n.length),v=0,g=n.length;v<g;v++){var b=n[v];b!==null?f[v]=this._parsers[v](b):f[v]=null}return f}parseRow(n){for(var f={},v=0,g=n.length;v<g;v++){var b=n[v],y=this.fields[v].name;b!==null?f[y]=this._parsers[v](b):f[y]=null}return f}addRow(n){this.rows.push(n)}addFields(n){this.fields=n,this.fields.length&&(this._parsers=new Array(n.length));for(var f=0;f<n.length;f++){var v=n[f];this._types?this._parsers[f]=this._types.getTypeParser(v.dataTypeID,v.format||"text"):this._parsers[f]=e.getTypeParser(v.dataTypeID,v.format||"text")}}};m(a,"Result");var i=a;t.exports=i}),ml=X((s,t)=>{V();var{EventEmitter:e}=st(),o=pl(),a=Ht(),i=class extends e{constructor(f,v,g){super(),f=a.normalizeQueryConfig(f,v,g),this.text=f.text,this.values=f.values,this.rows=f.rows,this.types=f.types,this.name=f.name,this.binary=f.binary,this.portal=f.portal||"",this.callback=f.callback,this._rowMode=f.rowMode,J.domain&&f.callback&&(this.callback=J.domain.bind(f.callback)),this._result=new o(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new o(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(f){this._checkForMultirow(),this._result.addFields(f.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(f){let v;if(!this._canceledDueToError){try{v=this._result.parseRow(f.fields)}catch(g){this._canceledDueToError=g;return}this.emit("row",v,this._result),this._accumulateRows&&this._result.addRow(v)}}handleCommandComplete(f,v){this._checkForMultirow(),this._result.addCommandComplete(f),this.rows&&v.sync()}handleEmptyQuery(f){this.rows&&f.sync()}handleError(f,v){if(this._canceledDueToError&&(f=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(f);this.emit("error",f)}handleReadyForQuery(f){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,f);if(this.callback)try{this.callback(null,this._results)}catch(v){J.nextTick(()=>{throw v})}this.emit("end",this._results)}submit(f){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let v=f.parsedStatements[this.name];return this.text&&v&&this.text!==v?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(f):f.query(this.text),null)}hasBeenParsed(f){return this.name&&f.parsedStatements[this.name]}handlePortalSuspended(f){this._getRows(f,this.rows)}_getRows(f,v){f.execute({portal:this.portal,rows:v}),v?f.flush():f.sync()}prepare(f){this.isPreparedStatement=!0,this.hasBeenParsed(f)||f.parse({text:this.text,name:this.name,types:this.types});try{f.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:a.prepareValue})}catch(v){this.handleError(v,f);return}f.describe({type:"P",name:this.portal||""}),this._getRows(f,this.rows)}handleCopyInResponse(f){f.sendCopyFail("No source stream defined")}handleCopyData(f,v){}};m(i,"Query");var l=i;t.exports=l}),Yn=X(s=>{V(),Object.defineProperty(s,"__esModule",{value:!0}),s.NoticeMessage=s.DataRowMessage=s.CommandCompleteMessage=s.ReadyForQueryMessage=s.NotificationResponseMessage=s.BackendKeyDataMessage=s.AuthenticationMD5Password=s.ParameterStatusMessage=s.ParameterDescriptionMessage=s.RowDescriptionMessage=s.Field=s.CopyResponse=s.CopyDataMessage=s.DatabaseError=s.copyDone=s.emptyQuery=s.replicationStart=s.portalSuspended=s.noData=s.closeComplete=s.bindComplete=s.parseComplete=void 0,s.parseComplete={name:"parseComplete",length:5},s.bindComplete={name:"bindComplete",length:5},s.closeComplete={name:"closeComplete",length:5},s.noData={name:"noData",length:5},s.portalSuspended={name:"portalSuspended",length:5},s.replicationStart={name:"replicationStart",length:4},s.emptyQuery={name:"emptyQuery",length:4},s.copyDone={name:"copyDone",length:4};var t=class extends Error{constructor(B,F,q){super(B),this.length=F,this.name=q}};m(t,"DatabaseError");var e=t;s.DatabaseError=e;var o=class{constructor(B,F){this.length=B,this.chunk=F,this.name="copyData"}};m(o,"CopyDataMessage");var a=o;s.CopyDataMessage=a;var i=class{constructor(B,F,q,H){this.length=B,this.name=F,this.binary=q,this.columnTypes=new Array(H)}};m(i,"CopyResponse");var l=i;s.CopyResponse=l;var n=class{constructor(B,F,q,H,z,Z,xe){this.name=B,this.tableID=F,this.columnID=q,this.dataTypeID=H,this.dataTypeSize=z,this.dataTypeModifier=Z,this.format=xe}};m(n,"Field");var f=n;s.Field=f;var v=class{constructor(B,F){this.length=B,this.fieldCount=F,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};m(v,"RowDescriptionMessage");var g=v;s.RowDescriptionMessage=g;var b=class{constructor(B,F){this.length=B,this.parameterCount=F,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};m(b,"ParameterDescriptionMessage");var y=b;s.ParameterDescriptionMessage=y;var w=class{constructor(B,F,q){this.length=B,this.parameterName=F,this.parameterValue=q,this.name="parameterStatus"}};m(w,"ParameterStatusMessage");var c=w;s.ParameterStatusMessage=c;var h=class{constructor(B,F){this.length=B,this.salt=F,this.name="authenticationMD5Password"}};m(h,"AuthenticationMD5Password");var p=h;s.AuthenticationMD5Password=p;var S=class{constructor(B,F,q){this.length=B,this.processID=F,this.secretKey=q,this.name="backendKeyData"}};m(S,"BackendKeyDataMessage");var _=S;s.BackendKeyDataMessage=_;var C=class{constructor(B,F,q,H){this.length=B,this.processId=F,this.channel=q,this.payload=H,this.name="notification"}};m(C,"NotificationResponseMessage");var P=C;s.NotificationResponseMessage=P;var T=class{constructor(B,F){this.length=B,this.status=F,this.name="readyForQuery"}};m(T,"ReadyForQueryMessage");var E=T;s.ReadyForQueryMessage=E;var R=class{constructor(B,F){this.length=B,this.text=F,this.name="commandComplete"}};m(R,"CommandCompleteMessage");var I=R;s.CommandCompleteMessage=I;var A=class{constructor(B,F){this.length=B,this.fields=F,this.name="dataRow",this.fieldCount=F.length}};m(A,"DataRowMessage");var j=A;s.DataRowMessage=j;var L=class{constructor(B,F){this.length=B,this.message=F,this.name="notice"}};m(L,"NoticeMessage");var U=L;s.NoticeMessage=U}),gl=X(s=>{V(),Object.defineProperty(s,"__esModule",{value:!0}),s.Writer=void 0;var t=class{constructor(a=256){this.size=a,this.offset=5,this.headerPosition=0,this.buffer=G.allocUnsafe(a)}ensure(a){var i=this.buffer.length-this.offset;if(i<a){var l=this.buffer,n=l.length+(l.length>>1)+a;this.buffer=G.allocUnsafe(n),l.copy(this.buffer)}}addInt32(a){return this.ensure(4),this.buffer[this.offset++]=a>>>24&255,this.buffer[this.offset++]=a>>>16&255,this.buffer[this.offset++]=a>>>8&255,this.buffer[this.offset++]=a>>>0&255,this}addInt16(a){return this.ensure(2),this.buffer[this.offset++]=a>>>8&255,this.buffer[this.offset++]=a>>>0&255,this}addCString(a){if(!a)this.ensure(1);else{var i=G.byteLength(a);this.ensure(i+1),this.buffer.write(a,this.offset,"utf-8"),this.offset+=i}return this.buffer[this.offset++]=0,this}addString(a=""){var i=G.byteLength(a);return this.ensure(i),this.buffer.write(a,this.offset),this.offset+=i,this}add(a){return this.ensure(a.length),a.copy(this.buffer,this.offset),this.offset+=a.length,this}join(a){if(a){this.buffer[this.headerPosition]=a;let i=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(i,this.headerPosition+1)}return this.buffer.slice(a?0:5,this.offset)}flush(a){var i=this.join(a);return this.offset=5,this.headerPosition=0,this.buffer=G.allocUnsafe(this.size),i}};m(t,"Writer");var e=t;s.Writer=e}),yl=X(s=>{V(),Object.defineProperty(s,"__esModule",{value:!0}),s.serialize=void 0;var t=gl(),e=new t.Writer,o=m(B=>{e.addInt16(3).addInt16(0);for(let H of Object.keys(B))e.addCString(H).addCString(B[H]);e.addCString("client_encoding").addCString("UTF8");var F=e.addCString("").flush(),q=F.length+4;return new t.Writer().addInt32(q).add(F).flush()},"startup"),a=m(()=>{let B=G.allocUnsafe(8);return B.writeInt32BE(8,0),B.writeInt32BE(80877103,4),B},"requestSsl"),i=m(B=>e.addCString(B).flush(112),"password"),l=m(function(B,F){return e.addCString(B).addInt32(G.byteLength(F)).addString(F),e.flush(112)},"sendSASLInitialResponseMessage"),n=m(function(B){return e.addString(B).flush(112)},"sendSCRAMClientFinalMessage"),f=m(B=>e.addCString(B).flush(81),"query"),v=[],g=m(B=>{let F=B.name||"";F.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",F,F.length),console.error("This can cause conflicts and silent errors executing queries"));let q=B.types||v;for(var H=q.length,z=e.addCString(F).addCString(B.text).addInt16(H),Z=0;Z<H;Z++)z.addInt32(q[Z]);return e.flush(80)},"parse"),b=new t.Writer,y=m(function(B,F){for(let q=0;q<B.length;q++){let H=F?F(B[q],q):B[q];H==null?(e.addInt16(0),b.addInt32(-1)):H instanceof G?(e.addInt16(1),b.addInt32(H.length),b.add(H)):(e.addInt16(0),b.addInt32(G.byteLength(H)),b.addString(H))}},"writeValues"),w=m((B={})=>{let F=B.portal||"",q=B.statement||"",H=B.binary||!1,z=B.values||v,Z=z.length;return e.addCString(F).addCString(q),e.addInt16(Z),y(z,B.valueMapper),e.addInt16(Z),e.add(b.flush()),e.addInt16(H?1:0),e.flush(66)},"bind"),c=G.from([69,0,0,0,9,0,0,0,0,0]),h=m(B=>{if(!B||!B.portal&&!B.rows)return c;let F=B.portal||"",q=B.rows||0,H=G.byteLength(F),z=4+H+1+4,Z=G.allocUnsafe(1+z);return Z[0]=69,Z.writeInt32BE(z,1),Z.write(F,5,"utf-8"),Z[H+5]=0,Z.writeUInt32BE(q,Z.length-4),Z},"execute"),p=m((B,F)=>{let q=G.allocUnsafe(16);return q.writeInt32BE(16,0),q.writeInt16BE(1234,4),q.writeInt16BE(5678,6),q.writeInt32BE(B,8),q.writeInt32BE(F,12),q},"cancel"),S=m((B,F)=>{let q=4+G.byteLength(F)+1,H=G.allocUnsafe(1+q);return H[0]=B,H.writeInt32BE(q,1),H.write(F,5,"utf-8"),H[q]=0,H},"cstringMessage"),_=e.addCString("P").flush(68),C=e.addCString("S").flush(68),P=m(B=>B.name?S(68,`${B.type}${B.name||""}`):B.type==="P"?_:C,"describe"),T=m(B=>{let F=`${B.type}${B.name||""}`;return S(67,F)},"close"),E=m(B=>e.add(B).flush(100),"copyData"),R=m(B=>S(102,B),"copyFail"),I=m(B=>G.from([B,0,0,0,4]),"codeOnlyBuffer"),A=I(72),j=I(83),L=I(88),U=I(99),$={startup:o,password:i,requestSsl:a,sendSASLInitialResponseMessage:l,sendSCRAMClientFinalMessage:n,query:f,parse:g,bind:w,execute:h,describe:P,close:T,flush:m(()=>A,"flush"),sync:m(()=>j,"sync"),end:m(()=>L,"end"),copyData:E,copyDone:m(()=>U,"copyDone"),copyFail:R,cancel:p};s.serialize=$}),vl=X(s=>{V(),Object.defineProperty(s,"__esModule",{value:!0}),s.BufferReader=void 0;var t=G.allocUnsafe(0),e=class{constructor(i=0){this.offset=i,this.buffer=t,this.encoding="utf-8"}setBuffer(i,l){this.offset=i,this.buffer=l}int16(){let i=this.buffer.readInt16BE(this.offset);return this.offset+=2,i}byte(){let i=this.buffer[this.offset];return this.offset++,i}int32(){let i=this.buffer.readInt32BE(this.offset);return this.offset+=4,i}uint32(){let i=this.buffer.readUInt32BE(this.offset);return this.offset+=4,i}string(i){let l=this.buffer.toString(this.encoding,this.offset,this.offset+i);return this.offset+=i,l}cstring(){let i=this.offset,l=i;for(;this.buffer[l++]!==0;);return this.offset=l,this.buffer.toString(this.encoding,i,l-1)}bytes(i){let l=this.buffer.slice(this.offset,this.offset+i);return this.offset+=i,l}};m(e,"BufferReader");var o=e;s.BufferReader=o}),bl=X(s=>{V(),Object.defineProperty(s,"__esModule",{value:!0}),s.Parser=void 0;var t=Yn(),e=vl(),o=1,a=4,i=o+a,l=G.allocUnsafe(0),n=class{constructor(g){if(this.buffer=l,this.bufferLength=0,this.bufferOffset=0,this.reader=new e.BufferReader,(g==null?void 0:g.mode)==="binary")throw new Error("Binary mode not supported yet");this.mode=(g==null?void 0:g.mode)||"text"}parse(g,b){this.mergeBuffer(g);let y=this.bufferOffset+this.bufferLength,w=this.bufferOffset;for(;w+i<=y;){let c=this.buffer[w],h=this.buffer.readUInt32BE(w+o),p=o+h;if(p+w<=y){let S=this.handlePacket(w+i,c,h,this.buffer);b(S),w+=p}else break}w===y?(this.buffer=l,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=y-w,this.bufferOffset=w)}mergeBuffer(g){if(this.bufferLength>0){let b=this.bufferLength+g.byteLength;if(b+this.bufferOffset>this.buffer.byteLength){let y;if(b<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)y=this.buffer;else{let w=this.buffer.byteLength*2;for(;b>=w;)w*=2;y=G.allocUnsafe(w)}this.buffer.copy(y,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=y,this.bufferOffset=0}g.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=b}else this.buffer=g,this.bufferOffset=0,this.bufferLength=g.byteLength}handlePacket(g,b,y,w){switch(b){case 50:return t.bindComplete;case 49:return t.parseComplete;case 51:return t.closeComplete;case 110:return t.noData;case 115:return t.portalSuspended;case 99:return t.copyDone;case 87:return t.replicationStart;case 73:return t.emptyQuery;case 68:return this.parseDataRowMessage(g,y,w);case 67:return this.parseCommandCompleteMessage(g,y,w);case 90:return this.parseReadyForQueryMessage(g,y,w);case 65:return this.parseNotificationMessage(g,y,w);case 82:return this.parseAuthenticationResponse(g,y,w);case 83:return this.parseParameterStatusMessage(g,y,w);case 75:return this.parseBackendKeyData(g,y,w);case 69:return this.parseErrorMessage(g,y,w,"error");case 78:return this.parseErrorMessage(g,y,w,"notice");case 84:return this.parseRowDescriptionMessage(g,y,w);case 116:return this.parseParameterDescriptionMessage(g,y,w);case 71:return this.parseCopyInMessage(g,y,w);case 72:return this.parseCopyOutMessage(g,y,w);case 100:return this.parseCopyData(g,y,w);default:return new t.DatabaseError("received invalid response: "+b.toString(16),y,"error")}}parseReadyForQueryMessage(g,b,y){this.reader.setBuffer(g,y);let w=this.reader.string(1);return new t.ReadyForQueryMessage(b,w)}parseCommandCompleteMessage(g,b,y){this.reader.setBuffer(g,y);let w=this.reader.cstring();return new t.CommandCompleteMessage(b,w)}parseCopyData(g,b,y){let w=y.slice(g,g+(b-4));return new t.CopyDataMessage(b,w)}parseCopyInMessage(g,b,y){return this.parseCopyMessage(g,b,y,"copyInResponse")}parseCopyOutMessage(g,b,y){return this.parseCopyMessage(g,b,y,"copyOutResponse")}parseCopyMessage(g,b,y,w){this.reader.setBuffer(g,y);let c=this.reader.byte()!==0,h=this.reader.int16(),p=new t.CopyResponse(b,w,c,h);for(let S=0;S<h;S++)p.columnTypes[S]=this.reader.int16();return p}parseNotificationMessage(g,b,y){this.reader.setBuffer(g,y);let w=this.reader.int32(),c=this.reader.cstring(),h=this.reader.cstring();return new t.NotificationResponseMessage(b,w,c,h)}parseRowDescriptionMessage(g,b,y){this.reader.setBuffer(g,y);let w=this.reader.int16(),c=new t.RowDescriptionMessage(b,w);for(let h=0;h<w;h++)c.fields[h]=this.parseField();return c}parseField(){let g=this.reader.cstring(),b=this.reader.uint32(),y=this.reader.int16(),w=this.reader.uint32(),c=this.reader.int16(),h=this.reader.int32(),p=this.reader.int16()===0?"text":"binary";return new t.Field(g,b,y,w,c,h,p)}parseParameterDescriptionMessage(g,b,y){this.reader.setBuffer(g,y);let w=this.reader.int16(),c=new t.ParameterDescriptionMessage(b,w);for(let h=0;h<w;h++)c.dataTypeIDs[h]=this.reader.int32();return c}parseDataRowMessage(g,b,y){this.reader.setBuffer(g,y);let w=this.reader.int16(),c=new Array(w);for(let h=0;h<w;h++){let p=this.reader.int32();c[h]=p===-1?null:this.reader.string(p)}return new t.DataRowMessage(b,c)}parseParameterStatusMessage(g,b,y){this.reader.setBuffer(g,y);let w=this.reader.cstring(),c=this.reader.cstring();return new t.ParameterStatusMessage(b,w,c)}parseBackendKeyData(g,b,y){this.reader.setBuffer(g,y);let w=this.reader.int32(),c=this.reader.int32();return new t.BackendKeyDataMessage(b,w,c)}parseAuthenticationResponse(g,b,y){this.reader.setBuffer(g,y);let w=this.reader.int32(),c={name:"authenticationOk",length:b};switch(w){case 0:break;case 3:c.length===8&&(c.name="authenticationCleartextPassword");break;case 5:if(c.length===12){c.name="authenticationMD5Password";let p=this.reader.bytes(4);return new t.AuthenticationMD5Password(b,p)}break;case 10:c.name="authenticationSASL",c.mechanisms=[];let h;do h=this.reader.cstring(),h&&c.mechanisms.push(h);while(h);break;case 11:c.name="authenticationSASLContinue",c.data=this.reader.string(b-8);break;case 12:c.name="authenticationSASLFinal",c.data=this.reader.string(b-8);break;default:throw new Error("Unknown authenticationOk message type "+w)}return c}parseErrorMessage(g,b,y,w){this.reader.setBuffer(g,y);let c={},h=this.reader.string(1);for(;h!=="\0";)c[h]=this.reader.cstring(),h=this.reader.string(1);let p=c.M,S=w==="notice"?new t.NoticeMessage(b,p):new t.DatabaseError(p,b,w);return S.severity=c.S,S.code=c.C,S.detail=c.D,S.hint=c.H,S.position=c.P,S.internalPosition=c.p,S.internalQuery=c.q,S.where=c.W,S.schema=c.s,S.table=c.t,S.column=c.c,S.dataType=c.d,S.constraint=c.n,S.file=c.F,S.line=c.L,S.routine=c.R,S}};m(n,"Parser");var f=n;s.Parser=f}),Zn=X(s=>{V(),Object.defineProperty(s,"__esModule",{value:!0}),s.DatabaseError=s.serialize=s.parse=void 0;var t=Yn();Object.defineProperty(s,"DatabaseError",{enumerable:!0,get:m(function(){return t.DatabaseError},"get")});var e=yl();Object.defineProperty(s,"serialize",{enumerable:!0,get:m(function(){return e.serialize},"get")});var o=bl();function a(i,l){let n=new o.Parser;return i.on("data",f=>n.parse(f,l)),new Promise(f=>i.on("end",()=>f()))}m(a,"parse"),s.parse=a}),Jn={};je(Jn,{connect:()=>Xn});function Xn({socket:s,servername:t}){return s.startTls(t),s}var wl=Ie(()=>{V(),m(Xn,"connect")}),ei=X((s,t)=>{V();var e=(Qt(),ve(Rn)),o=st().EventEmitter,{parse:a,serialize:i}=Zn(),l=i.flush(),n=i.sync(),f=i.end(),v=class extends o{constructor(y){super(),y=y||{},this.stream=y.stream||new e.Socket,this._keepAlive=y.keepAlive,this._keepAliveInitialDelayMillis=y.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=y.ssl||!1,this._ending=!1,this._emitMessage=!1;var w=this;this.on("newListener",function(c){c==="message"&&(w._emitMessage=!0)})}connect(y,w){var c=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(y,w),this.stream.once("connect",function(){c._keepAlive&&c.stream.setKeepAlive(!0,c._keepAliveInitialDelayMillis),c.emit("connect")});let h=m(function(p){c._ending&&(p.code==="ECONNRESET"||p.code==="EPIPE")||c.emit("error",p)},"reportStreamError");if(this.stream.on("error",h),this.stream.on("close",function(){c.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(p){var S=p.toString("utf8");switch(S){case"S":break;case"N":return c.stream.end(),c.emit("error",new Error("The server does not support SSL connections"));default:return c.stream.end(),c.emit("error",new Error("There was an error establishing an SSL connection"))}var _=(wl(),ve(Jn));let C={socket:c.stream};c.ssl!==!0&&(Object.assign(C,c.ssl),"key"in c.ssl&&(C.key=c.ssl.key)),e.isIP(w)===0&&(C.servername=w);try{c.stream=_.connect(C)}catch(P){return c.emit("error",P)}c.attachListeners(c.stream),c.stream.on("error",h),c.emit("sslconnect")})}attachListeners(y){y.on("end",()=>{this.emit("end")}),a(y,w=>{var c=w.name==="error"?"errorMessage":w.name;this._emitMessage&&this.emit("message",w),this.emit(c,w)})}requestSsl(){this.stream.write(i.requestSsl())}startup(y){this.stream.write(i.startup(y))}cancel(y,w){this._send(i.cancel(y,w))}password(y){this._send(i.password(y))}sendSASLInitialResponseMessage(y,w){this._send(i.sendSASLInitialResponseMessage(y,w))}sendSCRAMClientFinalMessage(y){this._send(i.sendSCRAMClientFinalMessage(y))}_send(y){return this.stream.writable?this.stream.write(y):!1}query(y){this._send(i.query(y))}parse(y){this._send(i.parse(y))}bind(y){this._send(i.bind(y))}execute(y){this._send(i.execute(y))}flush(){this.stream.writable&&this.stream.write(l)}sync(){this._ending=!0,this._send(l),this._send(n)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(f,()=>{this.stream.end()})}close(y){this._send(i.close(y))}describe(y){this._send(i.describe(y))}sendCopyFromChunk(y){this._send(i.copyData(y))}endCopyFrom(){this._send(i.copyDone())}sendCopyFail(y){this._send(i.copyFail(y))}};m(v,"Connection");var g=v;t.exports=g}),xl=X((s,t)=>{V();var e=st().EventEmitter;Vt(),ve(Et);var o=Ht(),a=al(),i=hl(),l=Mr(),n=Or(),f=ml(),v=$t(),g=ei(),b=class extends e{constructor(c){super(),this.connectionParameters=new n(c),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var h=c||{};this._Promise=h.Promise||Ft.Promise,this._types=new l(h.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=h.connection||new g({stream:h.stream,ssl:this.connectionParameters.ssl,keepAlive:h.keepAlive||!1,keepAliveInitialDelayMillis:h.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=h.binary||v.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=h.connectionTimeoutMillis||0}_errorAllQueries(c){let h=m(p=>{J.nextTick(()=>{p.handleError(c,this.connection)})},"enqueueError");this.activeQuery&&(h(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(h),this.queryQueue.length=0}_connect(c){var h=this,p=this.connection;if(this._connectionCallback=c,this._connecting||this._connected){let S=new Error("Client has already been connected. You cannot reuse a client.");J.nextTick(()=>{c(S)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{p._ending=!0,p.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?p.connect(this.host+"/.s.PGSQL."+this.port):p.connect(this.port,this.host),p.on("connect",function(){h.ssl?p.requestSsl():p.startup(h.getStartupConf())}),p.on("sslconnect",function(){p.startup(h.getStartupConf())}),this._attachListeners(p),p.once("end",()=>{let S=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(S),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(S):this._handleErrorEvent(S):this._connectionError||this._handleErrorEvent(S)),J.nextTick(()=>{this.emit("end")})})}connect(c){if(c){this._connect(c);return}return new this._Promise((h,p)=>{this._connect(S=>{S?p(S):h()})})}_attachListeners(c){c.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),c.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),c.on("authenticationSASL",this._handleAuthSASL.bind(this)),c.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),c.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),c.on("backendKeyData",this._handleBackendKeyData.bind(this)),c.on("error",this._handleErrorEvent.bind(this)),c.on("errorMessage",this._handleErrorMessage.bind(this)),c.on("readyForQuery",this._handleReadyForQuery.bind(this)),c.on("notice",this._handleNotice.bind(this)),c.on("rowDescription",this._handleRowDescription.bind(this)),c.on("dataRow",this._handleDataRow.bind(this)),c.on("portalSuspended",this._handlePortalSuspended.bind(this)),c.on("emptyQuery",this._handleEmptyQuery.bind(this)),c.on("commandComplete",this._handleCommandComplete.bind(this)),c.on("parseComplete",this._handleParseComplete.bind(this)),c.on("copyInResponse",this._handleCopyInResponse.bind(this)),c.on("copyData",this._handleCopyData.bind(this)),c.on("notification",this._handleNotification.bind(this))}_checkPgPass(c){let h=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(p=>{if(p!==void 0){if(typeof p!="string"){h.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=p}else this.connectionParameters.password=this.password=null;c()}).catch(p=>{h.emit("error",p)}):this.password!==null?c():i(this.connectionParameters,p=>{p!==void 0&&(this.connectionParameters.password=this.password=p),c()})}_handleAuthCleartextPassword(c){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(c){this._checkPgPass(()=>{let h=o.postgresMd5PasswordHash(this.user,this.password,c.salt);this.connection.password(h)})}_handleAuthSASL(c){this._checkPgPass(()=>{this.saslSession=a.startSession(c.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(c){a.continueSession(this.saslSession,this.password,c.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(c){a.finalizeSession(this.saslSession,c.data),this.saslSession=null}_handleBackendKeyData(c){this.processID=c.processID,this.secretKey=c.secretKey}_handleReadyForQuery(c){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:h}=this;this.activeQuery=null,this.readyForQuery=!0,h&&h.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(c){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(c);this.emit("error",c)}}_handleErrorEvent(c){if(this._connecting)return this._handleErrorWhileConnecting(c);this._queryable=!1,this._errorAllQueries(c),this.emit("error",c)}_handleErrorMessage(c){if(this._connecting)return this._handleErrorWhileConnecting(c);let h=this.activeQuery;if(!h){this._handleErrorEvent(c);return}this.activeQuery=null,h.handleError(c,this.connection)}_handleRowDescription(c){this.activeQuery.handleRowDescription(c)}_handleDataRow(c){this.activeQuery.handleDataRow(c)}_handlePortalSuspended(c){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(c){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(c){this.activeQuery.handleCommandComplete(c,this.connection)}_handleParseComplete(c){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(c){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(c){this.activeQuery.handleCopyData(c,this.connection)}_handleNotification(c){this.emit("notification",c)}_handleNotice(c){this.emit("notice",c)}getStartupConf(){var c=this.connectionParameters,h={user:c.user,database:c.database},p=c.application_name||c.fallback_application_name;return p&&(h.application_name=p),c.replication&&(h.replication=""+c.replication),c.statement_timeout&&(h.statement_timeout=String(parseInt(c.statement_timeout,10))),c.lock_timeout&&(h.lock_timeout=String(parseInt(c.lock_timeout,10))),c.idle_in_transaction_session_timeout&&(h.idle_in_transaction_session_timeout=String(parseInt(c.idle_in_transaction_session_timeout,10))),c.options&&(h.options=c.options),h}cancel(c,h){if(c.activeQuery===h){var p=this.connection;this.host&&this.host.indexOf("/")===0?p.connect(this.host+"/.s.PGSQL."+this.port):p.connect(this.port,this.host),p.on("connect",function(){p.cancel(c.processID,c.secretKey)})}else c.queryQueue.indexOf(h)!==-1&&c.queryQueue.splice(c.queryQueue.indexOf(h),1)}setTypeParser(c,h,p){return this._types.setTypeParser(c,h,p)}getTypeParser(c,h){return this._types.getTypeParser(c,h)}escapeIdentifier(c){return'"'+c.replace(/"/g,'""')+'"'}escapeLiteral(c){for(var h=!1,p="'",S=0;S<c.length;S++){var _=c[S];_==="'"?p+=_+_:_==="\\"?(p+=_+_,h=!0):p+=_}return p+="'",h===!0&&(p=" E"+p),p}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let c=this.activeQuery.submit(this.connection);c&&J.nextTick(()=>{this.activeQuery.handleError(c,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(c,h,p){var S,_,C,P,T;if(c==null)throw new TypeError("Client was passed a null or undefined query");return typeof c.submit=="function"?(C=c.query_timeout||this.connectionParameters.query_timeout,_=S=c,typeof h=="function"&&(S.callback=S.callback||h)):(C=this.connectionParameters.query_timeout,S=new f(c,h,p),S.callback||(_=new this._Promise((E,R)=>{S.callback=(I,A)=>I?R(I):E(A)}))),C&&(T=S.callback,P=setTimeout(()=>{var E=new Error("Query read timeout");J.nextTick(()=>{S.handleError(E,this.connection)}),T(E),S.callback=()=>{};var R=this.queryQueue.indexOf(S);R>-1&&this.queryQueue.splice(R,1),this._pulseQueryQueue()},C),S.callback=(E,R)=>{clearTimeout(P),T(E,R)}),this.binary&&!S.binary&&(S.binary=!0),S._result&&!S._result._types&&(S._result._types=this._types),this._queryable?this._ending?(J.nextTick(()=>{S.handleError(new Error("Client was closed and is not queryable"),this.connection)}),_):(this.queryQueue.push(S),this._pulseQueryQueue(),_):(J.nextTick(()=>{S.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),_)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(c){if(this._ending=!0,!this.connection._connecting)if(c)c();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),c)this.connection.once("end",c);else return new this._Promise(h=>{this.connection.once("end",h)})}};m(b,"Client");var y=b;y.Query=f,t.exports=y}),Sl=X((s,t)=>{V();var e=st().EventEmitter,o=m(function(){},"NOOP"),a=m((c,h)=>{let p=c.findIndex(h);return p===-1?void 0:c.splice(p,1)[0]},"removeWhere"),i=class{constructor(h,p,S){this.client=h,this.idleListener=p,this.timeoutId=S}};m(i,"IdleItem");var l=i,n=class{constructor(h){this.callback=h}};m(n,"PendingItem");var f=n;function v(){throw new Error("Release called on client which has already been released to the pool.")}m(v,"throwOnDoubleRelease");function g(c,h){if(h)return{callback:h,result:void 0};let p,S,_=m(function(P,T){P?p(P):S(T)},"cb"),C=new c(function(P,T){S=P,p=T}).catch(P=>{throw Error.captureStackTrace(P),P});return{callback:_,result:C}}m(g,"promisify");function b(c,h){return m(function p(S){S.client=h,h.removeListener("error",p),h.on("error",()=>{c.log("additional client error after disconnection due to error",S)}),c._remove(h),c.emit("error",S,h)},"idleListener")}m(b,"makeIdleListener");var y=class extends e{constructor(h,p){super(),this.options=Object.assign({},h),h!=null&&"password"in h&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:h.password}),h!=null&&h.ssl&&h.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||p||Wt().Client,this.Promise=this.options.Promise||Ft.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(p=>{this._remove(p.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let h=this._pendingQueue.shift();if(this._idle.length){let p=this._idle.pop();clearTimeout(p.timeoutId);let S=p.client;S.ref&&S.ref();let _=p.idleListener;return this._acquireClient(S,h,_,!1)}if(!this._isFull())return this.newClient(h);throw new Error("unexpected condition")}_remove(h){let p=a(this._idle,S=>S.client===h);p!==void 0&&clearTimeout(p.timeoutId),this._clients=this._clients.filter(S=>S!==h),h.end(),this.emit("remove",h)}connect(h){if(this.ending){let _=new Error("Cannot use a pool after calling end on the pool");return h?h(_):this.Promise.reject(_)}let p=g(this.Promise,h),S=p.result;if(this._isFull()||this._idle.length){if(this._idle.length&&J.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new f(p.callback)),S;let _=m((T,E,R)=>{clearTimeout(P),p.callback(T,E,R)},"queueCallback"),C=new f(_),P=setTimeout(()=>{a(this._pendingQueue,T=>T.callback===_),C.timedOut=!0,p.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return P.unref&&P.unref(),this._pendingQueue.push(C),S}return this.newClient(new f(p.callback)),S}newClient(h){let p=new this.Client(this.options);this._clients.push(p);let S=b(this,p);this.log("checking client timeout");let _,C=!1;this.options.connectionTimeoutMillis&&(_=setTimeout(()=>{this.log("ending client due to timeout"),C=!0,p.connection?p.connection.stream.destroy():p.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),p.connect(P=>{if(_&&clearTimeout(_),p.on("error",S),P)this.log("client failed to connect",P),this._clients=this._clients.filter(T=>T!==p),C&&(P=new Error("Connection terminated due to connection timeout",{cause:P})),this._pulseQueue(),h.timedOut||h.callback(P,void 0,o);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let T=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(p),this._idle.findIndex(E=>E.client===p)!==-1&&this._acquireClient(p,new f((E,R,I)=>I()),S,!1)},this.options.maxLifetimeSeconds*1e3);T.unref(),p.once("end",()=>clearTimeout(T))}return this._acquireClient(p,h,S,!0)}})}_acquireClient(h,p,S,_){_&&this.emit("connect",h),this.emit("acquire",h),h.release=this._releaseOnce(h,S),h.removeListener("error",S),p.timedOut?_&&this.options.verify?this.options.verify(h,h.release):h.release():_&&this.options.verify?this.options.verify(h,C=>{if(C)return h.release(C),p.callback(C,void 0,o);p.callback(void 0,h,h.release)}):p.callback(void 0,h,h.release)}_releaseOnce(h,p){let S=!1;return _=>{S&&v(),S=!0,this._release(h,p,_)}}_release(h,p,S){if(h.on("error",p),h._poolUseCount=(h._poolUseCount||0)+1,this.emit("release",S,h),S||this.ending||!h._queryable||h._ending||h._poolUseCount>=this.options.maxUses){h._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(h),this._pulseQueue();return}if(this._expired.has(h)){this.log("remove expired client"),this._expired.delete(h),this._remove(h),this._pulseQueue();return}let _;this.options.idleTimeoutMillis&&(_=setTimeout(()=>{this.log("remove idle client"),this._remove(h)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&_.unref()),this.options.allowExitOnIdle&&h.unref(),this._idle.push(new l(h,p,_)),this._pulseQueue()}query(h,p,S){if(typeof h=="function"){let C=g(this.Promise,h);return Pr(function(){return C.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),C.result}typeof p=="function"&&(S=p,p=void 0);let _=g(this.Promise,S);return S=_.callback,this.connect((C,P)=>{if(C)return S(C);let T=!1,E=m(R=>{T||(T=!0,P.release(R),S(R))},"onError");P.once("error",E),this.log("dispatching query");try{P.query(h,p,(R,I)=>{if(this.log("query dispatched"),P.removeListener("error",E),!T)return T=!0,P.release(R),R?S(R):S(void 0,I)})}catch(R){return P.release(R),S(R)}}),_.result}end(h){if(this.log("ending"),this.ending){let S=new Error("Called end on pool more than once");return h?h(S):this.Promise.reject(S)}this.ending=!0;let p=g(this.Promise,h);return this._endCallback=p.callback,this._pulseQueue(),p.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((h,p)=>h+(this._expired.has(p)?1:0),0)}get totalCount(){return this._clients.length}};m(y,"Pool");var w=y;t.exports=w}),ti={};je(ti,{default:()=>ri});var ri,_l=Ie(()=>{V(),ri={}}),El=X((s,t)=>{t.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),Cl=X((s,t)=>{V();var e=st().EventEmitter,o=(Vt(),ve(Et)),a=Ht(),i=t.exports=function(n,f,v){e.call(this),n=a.normalizeQueryConfig(n,f,v),this.text=n.text,this.values=n.values,this.name=n.name,this.callback=n.callback,this.state="new",this._arrayMode=n.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",(function(g){g==="row"&&(this._emitRowEvents=!0)}).bind(this))};o.inherits(i,e);var l={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};i.prototype.handleError=function(n){var f=this.native.pq.resultErrorFields();if(f)for(var v in f){var g=l[v]||v;n[g]=f[v]}this.callback?this.callback(n):this.emit("error",n),this.state="error"},i.prototype.then=function(n,f){return this._getPromise().then(n,f)},i.prototype.catch=function(n){return this._getPromise().catch(n)},i.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise((function(n,f){this._once("end",n),this._once("error",f)}).bind(this)),this._promise)},i.prototype.submit=function(n){this.state="running";var f=this;this.native=n.native,n.native.arrayMode=this._arrayMode;var v=m(function(y,w,c){if(n.native.arrayMode=!1,Pr(function(){f.emit("_done")}),y)return f.handleError(y);f._emitRowEvents&&(c.length>1?w.forEach((h,p)=>{h.forEach(S=>{f.emit("row",S,c[p])})}):w.forEach(function(h){f.emit("row",h,c)})),f.state="end",f.emit("end",c),f.callback&&f.callback(null,c)},"after");if(J.domain&&(v=J.domain.bind(v)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var g=(this.values||[]).map(a.prepareValue);if(n.namedQueries[this.name]){if(this.text&&n.namedQueries[this.name]!==this.text){let y=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return v(y)}return n.native.execute(this.name,g,v)}return n.native.prepare(this.name,this.text,g.length,function(y){return y?v(y):(n.namedQueries[f.name]=f.text,f.native.execute(f.name,g,v))})}else if(this.values){if(!Array.isArray(this.values)){let y=new Error("Query values must be an array");return v(y)}var b=this.values.map(a.prepareValue);n.native.query(this.text,b,v)}else n.native.query(this.text,v)}}),Al=X((s,t)=>{V();var e=(_l(),ve(ti)),o=Mr();El();var a=st().EventEmitter,i=(Vt(),ve(Et)),l=Or(),n=Cl(),f=t.exports=function(v){a.call(this),v=v||{},this._Promise=v.Promise||Ft.Promise,this._types=new o(v.types),this.native=new e({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var g=this.connectionParameters=new l(v);this.user=g.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:g.password}),this.database=g.database,this.host=g.host,this.port=g.port,this.namedQueries={}};f.Query=n,i.inherits(f,a),f.prototype._errorAllQueries=function(v){let g=m(b=>{J.nextTick(()=>{b.native=this.native,b.handleError(v)})},"enqueueError");this._hasActiveQuery()&&(g(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(g),this._queryQueue.length=0},f.prototype._connect=function(v){var g=this;if(this._connecting){J.nextTick(()=>v(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(b,y){if(b)return v(b);g.native.connect(y,function(w){if(w)return g.native.end(),v(w);g._connected=!0,g.native.on("error",function(c){g._queryable=!1,g._errorAllQueries(c),g.emit("error",c)}),g.native.on("notification",function(c){g.emit("notification",{channel:c.relname,payload:c.extra})}),g.emit("connect"),g._pulseQueryQueue(!0),v()})})},f.prototype.connect=function(v){if(v){this._connect(v);return}return new this._Promise((g,b)=>{this._connect(y=>{y?b(y):g()})})},f.prototype.query=function(v,g,b){var y,w,c,h,p;if(v==null)throw new TypeError("Client was passed a null or undefined query");if(typeof v.submit=="function")c=v.query_timeout||this.connectionParameters.query_timeout,w=y=v,typeof g=="function"&&(v.callback=g);else if(c=this.connectionParameters.query_timeout,y=new n(v,g,b),!y.callback){let S,_;w=new this._Promise((C,P)=>{S=C,_=P}),y.callback=(C,P)=>C?_(C):S(P)}return c&&(p=y.callback,h=setTimeout(()=>{var S=new Error("Query read timeout");J.nextTick(()=>{y.handleError(S,this.connection)}),p(S),y.callback=()=>{};var _=this._queryQueue.indexOf(y);_>-1&&this._queryQueue.splice(_,1),this._pulseQueryQueue()},c),y.callback=(S,_)=>{clearTimeout(h),p(S,_)}),this._queryable?this._ending?(y.native=this.native,J.nextTick(()=>{y.handleError(new Error("Client was closed and is not queryable"))}),w):(this._queryQueue.push(y),this._pulseQueryQueue(),w):(y.native=this.native,J.nextTick(()=>{y.handleError(new Error("Client has encountered a connection error and is not queryable"))}),w)},f.prototype.end=function(v){var g=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,v));var b;return v||(b=new this._Promise(function(y,w){v=m(c=>c?w(c):y(),"cb")})),this.native.end(function(){g._errorAllQueries(new Error("Connection terminated")),J.nextTick(()=>{g.emit("end"),v&&v()})}),b},f.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},f.prototype._pulseQueryQueue=function(v){if(this._connected&&!this._hasActiveQuery()){var g=this._queryQueue.shift();if(!g){v||this.emit("drain");return}this._activeQuery=g,g.submit(this);var b=this;g.once("_done",function(){b._pulseQueryQueue()})}},f.prototype.cancel=function(v){this._activeQuery===v?this.native.cancel(function(){}):this._queryQueue.indexOf(v)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(v),1)},f.prototype.ref=function(){},f.prototype.unref=function(){},f.prototype.setTypeParser=function(v,g,b){return this._types.setTypeParser(v,g,b)},f.prototype.getTypeParser=function(v,g){return this._types.getTypeParser(v,g)}}),is=X((s,t)=>{V(),t.exports=Al()}),Wt=X((s,t)=>{V();var e=xl(),o=$t(),a=ei(),i=Sl(),{DatabaseError:l}=Zn(),n=m(v=>{var g;return g=class extends i{constructor(b){super(b,v)}},m(g,"BoundPool"),g},"poolFactory"),f=m(function(v){this.defaults=o,this.Client=v,this.Query=this.Client.Query,this.Pool=n(this.Client),this._pools=[],this.Connection=a,this.types=qt(),this.DatabaseError=l},"PG");typeof J.env.NODE_PG_FORCE_NATIVE<"u"?t.exports=new f(is()):(t.exports=new f(e),Object.defineProperty(t.exports,"native",{configurable:!0,enumerable:!1,get(){var v=null;try{v=new f(is())}catch(g){if(g.code!=="MODULE_NOT_FOUND")throw g}return Object.defineProperty(t.exports,"native",{value:v}),v}}))});V();V();Qt();Tn();V();var Il=Object.defineProperty,Rl=Object.defineProperties,Nl=Object.getOwnPropertyDescriptors,os=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,Tl=Object.prototype.propertyIsEnumerable,as=m((s,t,e)=>t in s?Il(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,"__defNormalProp"),Ml=m((s,t)=>{for(var e in t||(t={}))Pl.call(t,e)&&as(s,e,t[e]);if(os)for(var e of os(t))Tl.call(t,e)&&as(s,e,t[e]);return s},"__spreadValues"),Ll=m((s,t)=>Rl(s,Nl(t)),"__spreadProps"),jl=1008e3,ls=new Uint8Array(new Uint16Array([258]).buffer)[0]===2,kl=new TextDecoder,Dr=new TextEncoder,At=Dr.encode("0123456789abcdef"),It=Dr.encode("0123456789ABCDEF"),Bl=Dr.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),si=Bl.slice();si[62]=45;si[63]=95;var gt,Rt;function ni(s,{alphabet:t,scratchArr:e}={}){if(!gt)if(gt=new Uint16Array(256),Rt=new Uint16Array(256),ls)for(let w=0;w<256;w++)gt[w]=At[w&15]<<8|At[w>>>4],Rt[w]=It[w&15]<<8|It[w>>>4];else for(let w=0;w<256;w++)gt[w]=At[w&15]|At[w>>>4]<<8,Rt[w]=It[w&15]|It[w>>>4]<<8;s.byteOffset%4!==0&&(s=new Uint8Array(s));let o=s.length,a=o>>>1,i=o>>>2,l=e||new Uint16Array(o),n=new Uint32Array(s.buffer,s.byteOffset,i),f=new Uint32Array(l.buffer,l.byteOffset,a),v=t==="upper"?Rt:gt,g=0,b=0,y;if(ls)for(;g<i;)y=n[g++],f[b++]=v[y>>>8&255]<<16|v[y&255],f[b++]=v[y>>>24]<<16|v[y>>>16&255];else for(;g<i;)y=n[g++],f[b++]=v[y>>>24]<<16|v[y>>>16&255],f[b++]=v[y>>>8&255]<<16|v[y&255];for(g<<=2;g<o;)l[g]=v[s[g++]];return kl.decode(l.subarray(0,o))}m(ni,"_toHex");function ii(s,t={}){let e="",o=s.length,a=jl>>>1,i=Math.ceil(o/a),l=new Uint16Array(i>1?a:o);for(let n=0;n<i;n++){let f=n*a,v=f+a;e+=ni(s.subarray(f,v),Ll(Ml({},t),{scratchArr:l}))}return e}m(ii,"_toHexChunked");function oi(s,t={}){return t.alphabet!=="upper"&&typeof s.toHex=="function"?s.toHex():ii(s,t)}m(oi,"toHex");V();var ai=class li{constructor(t,e){this.strings=t,this.values=e}toParameterizedQuery(t={query:"",params:[]}){var a;let{strings:e,values:o}=this;for(let i=0,l=e.length;i<l;i++)if(t.query+=e[i],i<o.length){let n=o[i];if(n instanceof hi)t.query+=n.sql;else if(n instanceof Mt)if(n.queryData instanceof li)n.queryData.toParameterizedQuery(t);else{if((a=n.queryData.params)!=null&&a.length)throw new Error("This query is not composable");t.query+=n.queryData.query}else{let{params:f}=t;f.push(n),t.query+="$"+f.length,(n instanceof G||ArrayBuffer.isView(n))&&(t.query+="::bytea")}}return t}};m(ai,"SqlTemplate");var ci=ai,ui=class{constructor(t){this.sql=t}};m(ui,"UnsafeRawSql");var hi=ui,Ol=rt(Mr()),Dl=rt(Ht()),fi=class di extends Error{constructor(t){super(t),K(this,"name","NeonDbError"),K(this,"severity"),K(this,"code"),K(this,"detail"),K(this,"hint"),K(this,"position"),K(this,"internalPosition"),K(this,"internalQuery"),K(this,"where"),K(this,"schema"),K(this,"table"),K(this,"column"),K(this,"dataType"),K(this,"constraint"),K(this,"file"),K(this,"line"),K(this,"routine"),K(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,di)}};m(fi,"NeonDbError");var it=fi,cs="transaction() expects an array of queries, or a function returning an array of queries",Fl=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function pi(s){return s instanceof G?"\\x"+oi(s):s}m(pi,"encodeBuffersAsBytea");function xr(s){let{query:t,params:e}=s instanceof ci?s.toParameterizedQuery():s;return{query:t,params:e.map(o=>pi((0,Dl.prepareValue)(o)))}}m(xr,"prepareQuery");function Fr(s,{arrayMode:t,fullResults:e,fetchOptions:o,isolationLevel:a,readOnly:i,deferrable:l,authToken:n}={}){if(!s)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let f;try{f=Tr(s)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(s))}let{protocol:v,username:g,hostname:b,port:y,pathname:w}=f;if(v!=="postgres:"&&v!=="postgresql:"||!g||!b||!w)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function c(p,...S){if(!(Array.isArray(p)&&Array.isArray(p.raw)&&Array.isArray(S)))throw new Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new Mt(h,new ci(p,S))}m(c,"templateFn"),c.query=(p,S,_)=>new Mt(h,{query:p,params:S??[]},_),c.unsafe=p=>new hi(p),c.transaction=async(p,S)=>{if(typeof p=="function"&&(p=p(c)),!Array.isArray(p))throw new Error(cs);p.forEach(P=>{if(!(P instanceof Mt))throw new Error(cs)});let _=p.map(P=>P.queryData),C=p.map(P=>P.opts??{});return h(_,C,S)};async function h(p,S,_){let{fetchEndpoint:C,fetchFunction:P}=Ut,T=Array.isArray(p)?{queries:p.map(H=>xr(H))}:xr(p),E=o??{},R=t??!1,I=e??!1,A=a,j=i,L=l;_!==void 0&&(_.fetchOptions!==void 0&&(E={...E,..._.fetchOptions}),_.arrayMode!==void 0&&(R=_.arrayMode),_.fullResults!==void 0&&(I=_.fullResults),_.isolationLevel!==void 0&&(A=_.isolationLevel),_.readOnly!==void 0&&(j=_.readOnly),_.deferrable!==void 0&&(L=_.deferrable)),S!==void 0&&!Array.isArray(S)&&S.fetchOptions!==void 0&&(E={...E,...S.fetchOptions});let U=n;!Array.isArray(S)&&(S==null?void 0:S.authToken)!==void 0&&(U=S.authToken);let $=typeof C=="function"?C(b,y,{jwtAuth:U!==void 0}):C,B={"Neon-Connection-String":s,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},F=await gi(U);F&&(B.Authorization=`Bearer ${F}`),Array.isArray(p)&&(A!==void 0&&(B["Neon-Batch-Isolation-Level"]=A),j!==void 0&&(B["Neon-Batch-Read-Only"]=String(j)),L!==void 0&&(B["Neon-Batch-Deferrable"]=String(L)));let q;try{q=await(P??fetch)($,{method:"POST",body:JSON.stringify(T),headers:B,...E})}catch(H){let z=new it(`Error connecting to database: ${H}`);throw z.sourceError=H,z}if(q.ok){let H=await q.json();if(Array.isArray(p)){let z=H.results;if(!Array.isArray(z))throw new it("Neon internal error: unexpected result format");return z.map((Z,xe)=>{let ne=S[xe]??{},fe=ne.arrayMode??R,Oe=ne.fullResults??I;return Sr(Z,{arrayMode:fe,fullResults:Oe,types:ne.types})})}else{let z=S??{},Z=z.arrayMode??R,xe=z.fullResults??I;return Sr(H,{arrayMode:Z,fullResults:xe,types:z.types})}}else{let{status:H}=q;if(H===400){let z=await q.json(),Z=new it(z.message);for(let xe of Fl)Z[xe]=z[xe]??void 0;throw Z}else{let z=await q.text();throw new it(`Server error (HTTP status ${H}): ${z}`)}}}return m(h,"execute"),c}m(Fr,"neon");var mi=class{constructor(t,e,o){this.execute=t,this.queryData=e,this.opts=o}then(t,e){return this.execute(this.queryData,this.opts).then(t,e)}catch(t){return this.execute(this.queryData,this.opts).catch(t)}finally(t){return this.execute(this.queryData,this.opts).finally(t)}};m(mi,"NeonQueryPromise");var Mt=mi;function Sr(s,{arrayMode:t,fullResults:e,types:o}){let a=new Ol.default(o),i=s.fields.map(f=>f.name),l=s.fields.map(f=>a.getTypeParser(f.dataTypeID)),n=t===!0?s.rows.map(f=>f.map((v,g)=>v===null?null:l[g](v))):s.rows.map(f=>Object.fromEntries(f.map((v,g)=>[i[g],v===null?null:l[g](v)])));return e?(s.viaNeonFetch=!0,s.rowAsArray=t,s.rows=n,s._parsers=l,s._types=a,s):n}m(Sr,"processQueryResult");async function gi(s){if(typeof s=="string")return s;if(typeof s=="function")try{return await Promise.resolve(s())}catch(t){let e=new it("Error getting auth token.");throw t instanceof Error&&(e=new it(`Error getting auth token: ${t.message}`)),e}}m(gi,"getAuthToken");V();var Ul=rt(Wt());V();var Ql=rt(Wt()),yi=class extends Ql.Client{constructor(t){super(t),this.config=t}get neonConfig(){return this.connection.stream}connect(t){var v,g;let{neonConfig:e}=this;e.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&e.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let o=typeof this.config!="string"&&((v=this.config)==null?void 0:v.host)!==void 0||typeof this.config!="string"&&((g=this.config)==null?void 0:g.connectionString)!==void 0||J.env.PGHOST!==void 0,a=J.env.USER??J.env.USERNAME;if(!o&&this.host==="localhost"&&this.user===a&&this.database===a&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${a}, db: ${a}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let i=super.connect(t),l=e.pipelineTLS&&this.ssl,n=e.pipelineConnect==="password";if(!l&&!e.pipelineConnect)return i;let f=this.connection;if(l&&f.on("connect",()=>f.stream.emit("data","S")),n){f.removeAllListeners("authenticationCleartextPassword"),f.removeAllListeners("readyForQuery"),f.once("readyForQuery",()=>f.on("readyForQuery",this._handleReadyForQuery.bind(this)));let b=this.ssl?"sslconnect":"connect";f.on(b,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return i}async _handleAuthSASLContinue(t){if(typeof crypto>"u"||crypto.subtle===void 0||crypto.subtle.importKey===void 0)throw new Error("Cannot use SASL auth when `crypto.subtle` is not defined");let e=crypto.subtle,o=this.saslSession,a=this.password,i=t.data;if(o.message!=="SASLInitialResponse"||typeof a!="string"||typeof i!="string")throw new Error("SASL: protocol error");let l=Object.fromEntries(i.split(",").map(z=>{if(!/^.=/.test(z))throw new Error("SASL: Invalid attribute pair entry");let Z=z[0],xe=z.substring(2);return[Z,xe]})),n=l.r,f=l.s,v=l.i;if(!n||!/^[!-+--~]+$/.test(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!f||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(f))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!v||!/^[1-9][0-9]*$/.test(v))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!n.startsWith(o.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(n.length===o.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let g=parseInt(v,10),b=G.from(f,"base64"),y=new TextEncoder,w=y.encode(a),c=await e.importKey("raw",w,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),h=new Uint8Array(await e.sign("HMAC",c,G.concat([b,G.from([0,0,0,1])]))),p=h;for(var S=0;S<g-1;S++)h=new Uint8Array(await e.sign("HMAC",c,h)),p=G.from(p.map((z,Z)=>p[Z]^h[Z]));let _=p,C=await e.importKey("raw",_,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),P=new Uint8Array(await e.sign("HMAC",C,y.encode("Client Key"))),T=await e.digest("SHA-256",P),E="n=*,r="+o.clientNonce,R="r="+n+",s="+f+",i="+g,I="c=biws,r="+n,A=E+","+R+","+I,j=await e.importKey("raw",T,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var L=new Uint8Array(await e.sign("HMAC",j,y.encode(A))),U=G.from(P.map((z,Z)=>P[Z]^L[Z])),$=U.toString("base64");let B=await e.importKey("raw",_,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),F=await e.sign("HMAC",B,y.encode("Server Key")),q=await e.importKey("raw",F,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var H=G.from(await e.sign("HMAC",q,y.encode(A)));o.message="SASLResponse",o.serverSignature=H.toString("base64"),o.response=I+",p="+$,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};m(yi,"NeonClient");var ql=yi;Qt();var $l=rt(Or());function vi(s,t){if(t)return{callback:t,result:void 0};let e,o,a=m(function(l,n){l?e(l):o(n)},"cb"),i=new s(function(l,n){o=l,e=n});return{callback:a,result:i}}m(vi,"promisify");var Hl=class extends Ul.Pool{constructor(){super(...arguments),K(this,"Client",ql),K(this,"hasFetchUnsupportedListeners",!1),K(this,"addListener",this.on)}on(t,e){return t!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(t,e)}query(t,e,o){var i;if(!Ut.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof t=="function")return super.query(t,e,o);typeof e=="function"&&(o=e,e=void 0);let a=vi(this.Promise,o);o=a.callback;try{let l=new $l.default(this.options),n=encodeURIComponent,f=encodeURI,v=`postgresql://${n(l.user)}:${n(l.password)}@${n(l.host)}/${f(l.database)}`,g=typeof t=="string"?t:t.text,b=e??t.values??[];Fr(v,{fullResults:!0,arrayMode:t.rowMode==="array"}).query(g,b,{types:t.types??((i=this.options)==null?void 0:i.types)}).then(y=>o(void 0,y)).catch(y=>o(y))}catch(l){o(l)}return a.result}};m(Hl,"NeonPool");Qt();var Ur=rt(Wt());Ur.DatabaseError;Ur.defaults;Ur.types;/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/const us=Fr("postgresql://neondb_owner:npg_trG0JRad6sxP@ep-flat-smoke-a5gx7mdm-pooler.us-east-2.aws.neon.tech/neondb?sslmode=require");async function Vl(){try{const s=await us`
      SELECT column_name, ordinal_position 
      FROM information_schema.columns 
      WHERE table_name = 'dogs' 
      ORDER BY ordinal_position
    `;console.log("Database columns:",s);const t=await us`SELECT * FROM dogs ORDER BY intake_date DESC`;return console.log("Raw database result:",t),t&&t.rows&&Array.isArray(t.rows)?(console.log("Converting array-based response to objects"),t.rows.map(e=>({dog_id:e[0]||"",name:e[1]||"",breed_ai:e[2]||"",photo_1:e[3]||"",photo_2:e[4]||"",photo_3:e[5]||"",gender:e[6]||"",approx_age:e[7]||"",weight:parseFloat(e[8])||0,level:parseInt(e[9])||1,location_kennel:e[10]||"",location_room:e[11]||"",spay_neuter_status:e[12]||"",sociability_status:e[13]||"",sociablity_playstyle:e[14]||"",petpoint_url:e[15]||"",breed_ai_1:e[16]||"",breed_ai_2:e[17]||"",breed_ai_3:e[18]||"",dob:e[19]||"",intake_date:e[20]||"",days_in_dcas:parseInt(e[21])||0,color_pimary:e[22]||"",color_seconday:e[23]||"",adoption_restriction:e[24]||"",da2ppv_vax_date:e[25]||"",rabies_vax_date:e[26]||"",hw_test_date:e[27]||"",heartworm_status:e[28]||"",foster_status:e[29]||"",l2_reason:e[30]||"",play_group_initial:e[31]||"",play_group_recent:e[32]||"",sociability_notes:e[33]||"",adopets_url:e[34]||"",dftd_eligibility:e[35]||"",mini_pic_1:e[36]||"",mini_pic_2:e[37]||"",mini_pic_3:e[38]||"",adopets_status:e[39]||""}))):t}catch(s){throw console.error("Error fetching dogs from Neon:",s),s}}const Rc=()=>{const[s,t]=k.useState(""),[e,o]=k.useState("all"),[a,i]=k.useState("all"),[l,n]=k.useState("name"),[f,v]=k.useState("cards"),[g,b]=k.useState(new Set),y=P=>{b(T=>{const E=new Set(T);return E.has(P)?E.delete(P):E.add(P),E})},{data:w=[],isLoading:c,error:h}=eo({queryKey:["dogs"],queryFn:async()=>{try{console.log("Fetching dogs...");const P=await Vl();console.log("Raw dogs from API:",P),console.log("Number of dogs fetched:",P==null?void 0:P.length);const T=P.map(R=>{var I,A,j,L;return{"Dog ID":R.dog_id,Name:R.name,"Breed AI":R.breed_ai,Photo_1:((I=R.photo_1)==null?void 0:I.replace(/\n/g,"").trim())||"",Photo_2:((A=R.photo_2)==null?void 0:A.replace(/\n/g,"").trim())||"",Photo_3:((j=R.photo_3)==null?void 0:j.replace(/\n/g,"").trim())||"",Gender:R.gender,Approx_Age:R.approx_age,Weight:R.weight||0,Level:R.level||0,Location_kennel:R.location_kennel,Location_room:R.location_room,Spay_Neuter_status:R.spay_neuter_status,Sociability_status:R.sociability_status,Sociablity_playstyle:R.sociablity_playstyle,Petpoint_url:R.petpoint_url,Breed_AI_1:R.breed_ai_1,Breed_AI_2:R.breed_ai_2,Breed_AI_3:R.breed_ai_3,DOB:R.dob,Intake_Date:R.intake_date,Days_in_DCAS:R.days_in_dcas||0,Color_pimary:R.color_pimary,Color_seconday:R.color_seconday,Adoption_restriction:R.adoption_restriction,DA2PPV_vax_date:R.da2ppv_vax_date,Rabies_vax_date:R.rabies_vax_date,HW_test_date:R.hw_test_date,Heartworm_Status:R.heartworm_status,Foster_status:R.foster_status,L2_reason:R.l2_reason,Play_group_initial:R.play_group_initial,Play_group_recent:R.play_group_recent,Sociability_notes:((L=R.sociability_notes)==null?void 0:L.replace(/\n/g,"").trim())||"",Adopets_url:R.adopets_url,DFTD_eligibility:R.dftd_eligibility,Mini_pic_1:R.mini_pic_1,Mini_pic_2:R.mini_pic_2,Mini_pic_3:R.mini_pic_3,Adopets_status:R.adopets_status}});console.log("Transformed dogs:",T),console.log("Number of transformed dogs:",T==null?void 0:T.length),console.log("First dog details:",T[0]);const E=T.filter(R=>R.Name&&!R.Name.startsWith("http"));return console.log("Filtered dogs:",E),console.log("Number of filtered dogs:",E==null?void 0:E.length),console.log("First filtered dog:",E[0]),E}catch(P){throw console.error("Fetch error:",P),P}},staleTime:1e3*60*60*12,gcTime:1e3*60*60*24,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,retry:3,retryDelay:P=>Math.min(1e3*2**P,3e4)}),p=P=>{if(!P||P.trim()==="")return"Mixed Breed";const T=P.toLowerCase();return T.includes("pit bull")||T.includes("pitbull")||T.includes("american pit bull")||T.includes("staffordshire")?"Pit Bull / Staffordshire":T.includes("boxer")?"Boxer":T.includes("labrador")||T.includes("lab mix")?"Labrador Retriever":T.includes("german shepherd")?"German Shepherd":T.includes("husky")||T.includes("alaskan malamute")?"Husky / Northern Breed":T.includes("bulldog")||T.includes("american bulldog")||T.includes("french bulldog")||T.includes("english bulldog")?"Bulldog":T.includes("belgian malinois")||T.includes("belgian shepherd")?"Belgian Malinois":T.includes("rottweiler")?"Rottweiler":T.includes("cane corso")?"Cane Corso":T.includes("border collie")?"Border Collie":T.includes("chihuahua")?"Chihuahua":T.includes("great dane")?"Great Dane":T.includes("terrier")&&!T.includes("pit bull")&&!T.includes("staffordshire")?"Terrier":T.includes("retriever")&&!T.includes("labrador")?"Retriever":T.includes("shepherd")&&!T.includes("german")?"Shepherd":T.includes("mixed breed")||T.includes("mix")?"Mixed Breed":P.split(",")[0].trim()||"Mixed Breed"},S=k.useMemo(()=>{const P=w.map(T=>p(T["Breed AI"]));return[...new Set(P)].sort()},[w]),_=k.useMemo(()=>w.filter(P=>{const T=s===""||P.Name.toLowerCase().includes(s.toLowerCase())||p(P["Breed AI"]).toLowerCase().includes(s.toLowerCase()),E=e==="all"||p(P["Breed AI"])===e,R=a==="all"||a==="yes"&&P.Location_kennel==="Foster Care"||a==="no"&&P.Location_kennel!=="Foster Care";return T&&E&&R}),[w,s,e,a]),C=k.useMemo(()=>{const P=[..._];switch(l){case"name":P.sort((T,E)=>T.Name.localeCompare(E.Name));break;case"age":P.sort((T,E)=>{const R=ss(T.Approx_Age),I=ss(E.Approx_Age);return R-I});break;case"size":P.sort((T,E)=>parseFloat(String(T.Weight||0))-parseFloat(String(E.Weight||0)));break;case"level":P.sort((T,E)=>parseInt(String(T.Level||0))-parseInt(String(E.Level||0)));break;case"weight":P.sort((T,E)=>parseFloat(String(T.Weight||0))-parseFloat(String(E.Weight||0)));break;case"dftdEligible":P.sort((T,E)=>{const R=T.DFTD_eligibility==="Yes"?1:0;return(E.DFTD_eligibility==="Yes"?1:0)-R});break}return P},[_,l]);return c?x.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50",children:[x.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8",children:x.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[x.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-4",children:"Find Your Perfect Companion"}),x.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto mb-8",children:"Every dog deserves a loving home. Browse our adorable rescue dogs and find your new best friend today! ðŸ¾"}),x.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-orange-100 max-w-5xl mx-auto opacity-50",children:x.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:x.jsxs("div",{className:"relative flex-1 min-w-0",children:[x.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),x.jsx(fr,{placeholder:"Loading dogs...",disabled:!0,className:"pl-10 h-12 border-orange-200 rounded-xl text-base"})]})})})]})}),x.jsx("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:x.jsx("div",{className:"max-w-7xl mx-auto text-center",children:x.jsx("div",{className:"text-lg text-gray-600",children:"Loading amazing dogs..."})})})]}):h?x.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50 flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-8xl mb-6",children:"ðŸ˜¢"}),x.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Oops! Something went wrong"}),x.jsx("p",{className:"text-gray-500 mb-4",children:"We couldn't fetch the dogs right now"}),x.jsx(wt,{onClick:()=>window.location.reload(),className:"bg-orange-500 hover:bg-orange-600",children:"Try Again"})]})}):x.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50",children:[x.jsx("section",{className:"py-16 px-4 sm:px-6 lg:px-8",children:x.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[x.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-4",children:"Find Your Perfect Companion"}),x.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto mb-8",children:"Every dog deserves a loving home. Browse our adorable rescue dogs and find your new best friend today! ðŸ¾"}),x.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-orange-100 max-w-5xl mx-auto",children:[x.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[x.jsxs("div",{className:"relative flex-1 min-w-0",children:[x.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),x.jsx(fr,{placeholder:"Search by name or breed...",value:s,onChange:P=>t(P.target.value),className:"pl-10 h-12 border-orange-200 focus:border-orange-400 focus:ring-orange-400 rounded-xl text-base"})]}),x.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[x.jsxs(Yt,{value:e,onValueChange:o,children:[x.jsx(Pt,{className:"h-12 w-48 border-orange-200 focus:border-orange-400 focus:ring-orange-400 rounded-xl",children:x.jsx(Zt,{placeholder:"All Breeds"})}),x.jsxs(Tt,{children:[x.jsx(Re,{value:"all",children:"All Breeds"}),S.map(P=>x.jsx(Re,{value:P,children:P},P))]})]}),x.jsxs(Yt,{value:a,onValueChange:i,children:[x.jsx(Pt,{className:"h-12 w-40 border-orange-200 focus:border-orange-400 focus:ring-orange-400 rounded-xl",children:x.jsx(Zt,{placeholder:"Location"})}),x.jsxs(Tt,{children:[x.jsx(Re,{value:"all",children:"All Dogs"}),x.jsx(Re,{value:"yes",children:"Foster Care"}),x.jsx(Re,{value:"no",children:"At Shelter"})]})]}),x.jsxs(Yt,{value:l,onValueChange:P=>n(P),children:[x.jsxs(Pt,{className:"h-12 w-40 border-orange-200 focus:border-orange-400 focus:ring-orange-400 rounded-xl",children:[x.jsx(ao,{className:"h-4 w-4 mr-2"}),x.jsx(Zt,{placeholder:"Sort by"})]}),x.jsxs(Tt,{children:[x.jsx(Re,{value:"name",children:"Name"}),x.jsx(Re,{value:"age",children:"Age"}),x.jsx(Re,{value:"size",children:"Size"}),x.jsx(Re,{value:"level",children:"Level"}),x.jsx(Re,{value:"weight",children:"Weight"}),x.jsx(Re,{value:"dftdEligible",children:"DFTD Eligible"})]})]}),x.jsxs(_n,{type:"single",value:f,onValueChange:v,className:"bg-gray-100 rounded-xl p-1 h-12",children:[x.jsx(br,{value:"cards",className:"data-[state=on]:bg-white data-[state=on]:shadow-sm h-10 px-3",children:x.jsx(Ao,{className:"h-4 w-4"})}),x.jsx(br,{value:"table",className:"data-[state=on]:bg-white data-[state=on]:shadow-sm h-10 px-3",children:x.jsx(Po,{className:"h-4 w-4"})})]})]})]}),x.jsx("div",{className:"flex items-center justify-center mt-4",children:x.jsxs("span",{className:"text-gray-600 font-medium",children:[_.length," of ",w.length," dogs"]})})]})]})}),x.jsx("section",{className:"py-8 px-4 sm:px-6 lg:px-8",children:x.jsxs("div",{className:"max-w-7xl mx-auto",children:[x.jsx(Qa,{dogs:C,favorites:g,onToggleFavorite:y,viewMode:f}),_.length===0&&x.jsxs("div",{className:"text-center py-16",children:[x.jsx("div",{className:"text-8xl mb-6",children:"ðŸ•â€ðŸ¦º"}),x.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"No dogs found"}),x.jsx("p",{className:"text-gray-500 mb-6",children:"Try adjusting your search criteria to find more furry friends!"}),x.jsx(wt,{onClick:()=>{t(""),o("all"),i("all")},className:"bg-orange-500 hover:bg-orange-600",children:"Clear Filters"})]})]})})]})};export{Rc as default};
